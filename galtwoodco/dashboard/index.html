<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galtwood Co - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f0f0f;
            --bg-card: #1a1a1a;
            --bg-elevated: #242424;
            --accent: #c9a66b;
            --accent-hover: #d4b67a;
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-tertiary: rgba(255, 255, 255, 0.4);
            --border: rgba(255, 255, 255, 0.1);
            --success: #22c55e;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Login Screen */
        .login-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-box {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 40px;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .login-logo {
            font-size: 2rem;
            font-weight: 800;
            color: var(--accent);
            margin-bottom: 8px;
        }

        .login-subtitle {
            color: var(--text-secondary);
            margin-bottom: 32px;
        }

        .login-input {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 16px;
            outline: none;
        }

        .login-input:focus {
            border-color: var(--accent);
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: var(--accent);
            color: #000;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .login-btn:hover {
            background: var(--accent-hover);
        }

        .login-error {
            color: #ef4444;
            font-size: 0.9rem;
            margin-top: 12px;
            display: none;
        }

        /* Dashboard Layout */
        .dashboard {
            display: none;
            min-height: 100vh;
        }

        .dashboard.active {
            display: block;
        }

        /* Header */
        .header {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .header-logo {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--accent);
        }

        .header-nav {
            display: flex;
            gap: 8px;
        }

        .header-nav-btn {
            padding: 8px 16px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .header-nav-btn:hover {
            background: var(--bg-elevated);
            color: var(--text-primary);
        }

        .header-nav-btn.active {
            background: var(--accent);
            color: #000;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .credits-display {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-elevated);
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .credits-amount {
            font-weight: 700;
            color: var(--accent);
        }

        .logout-btn {
            padding: 8px 16px;
            background: none;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .logout-btn:hover {
            border-color: var(--text-secondary);
            color: var(--text-primary);
        }

        /* Main Content */
        .main-content {
            padding: 32px 24px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* View Panels */
        .view-panel {
            display: none;
        }

        .view-panel.active {
            display: block;
        }

        /* Content Generator */
        .section-header {
            margin-bottom: 24px;
        }

        .section-header h1 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .section-header p {
            color: var(--text-secondary);
        }

        .generator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        @media (max-width: 900px) {
            .generator-grid {
                grid-template-columns: 1fr;
            }
        }

        .generator-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
        }

        .generator-card h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .generator-card h3 span {
            font-size: 1.25rem;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 14px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 0.95rem;
            font-family: inherit;
            outline: none;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: var(--accent);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .generate-btn {
            width: 100%;
            padding: 14px;
            background: var(--accent);
            color: #000;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .generate-btn:hover {
            background: var(--accent-hover);
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .credit-cost {
            font-size: 0.85rem;
            color: var(--text-tertiary);
            text-align: center;
            margin-top: 12px;
        }

        /* Output Section */
        .output-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
        }

        .output-card h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .output-empty {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-tertiary);
        }

        .output-content {
            background: var(--bg-elevated);
            border-radius: 10px;
            padding: 16px;
            white-space: pre-wrap;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .output-actions {
            display: flex;
            gap: 10px;
            margin-top: 16px;
        }

        .output-btn {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .output-btn-primary {
            background: var(--accent);
            color: #000;
            border: none;
        }

        .output-btn-secondary {
            background: none;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .output-btn:hover {
            opacity: 0.9;
        }

        /* Calendar View */
        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .calendar-nav {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .calendar-nav-btn {
            width: 36px;
            height: 36px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 1.1rem;
        }

        .calendar-month {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .calendar-day-header {
            text-align: center;
            padding: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-tertiary);
            text-transform: uppercase;
        }

        .calendar-day {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            min-height: 100px;
            padding: 10px;
        }

        .calendar-day.other-month {
            opacity: 0.3;
        }

        .calendar-day.today {
            border-color: var(--accent);
        }

        .calendar-day-num {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .calendar-event {
            background: var(--accent);
            color: #000;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .calendar-event.draft {
            background: var(--bg-elevated);
            color: var(--text-secondary);
            border: 1px dashed var(--border);
        }

        /* Quick Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
        }

        .stat-value.accent {
            color: var(--accent);
        }

        /* Scheduled Posts */
        .scheduled-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .scheduled-item {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }

        .scheduled-date {
            background: var(--bg-elevated);
            border-radius: 8px;
            padding: 10px 14px;
            text-align: center;
            min-width: 60px;
        }

        .scheduled-date-day {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .scheduled-date-month {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
        }

        .scheduled-content {
            flex: 1;
        }

        .scheduled-platform {
            font-size: 0.8rem;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .scheduled-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .scheduled-actions {
            display: flex;
            gap: 8px;
        }

        .scheduled-action-btn {
            width: 32px;
            height: 32px;
            background: var(--bg-elevated);
            border: none;
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9rem;
        }

        .scheduled-action-btn:hover {
            color: var(--text-primary);
        }

        /* This Week Guide */
        .week-guide {
            max-width: 700px;
        }

        .week-header {
            background: linear-gradient(135deg, var(--accent) 0%, #a08050 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            color: #000;
        }

        .week-header h1 {
            font-size: 1.5rem;
            margin-bottom: 4px;
        }

        .week-header p {
            opacity: 0.8;
            font-size: 0.95rem;
        }

        .week-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .week-section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .week-section-icon {
            width: 40px;
            height: 40px;
            background: var(--bg-elevated);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .week-section-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .week-section-subtitle {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .task-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 14px;
            background: var(--bg-elevated);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .task-item:hover {
            background: #2a2a2a;
        }

        .task-item.completed {
            opacity: 0.5;
        }

        .task-item.completed .task-text {
            text-decoration: line-through;
        }

        .task-checkbox {
            width: 22px;
            height: 22px;
            border: 2px solid var(--border);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 2px;
            transition: all 0.2s;
        }

        .task-item.completed .task-checkbox {
            background: var(--accent);
            border-color: var(--accent);
        }

        .task-checkbox-icon {
            color: #000;
            font-size: 0.8rem;
            display: none;
        }

        .task-item.completed .task-checkbox-icon {
            display: block;
        }

        .task-content {
            flex: 1;
        }

        .task-text {
            font-size: 0.95rem;
            margin-bottom: 4px;
        }

        .task-hint {
            font-size: 0.8rem;
            color: var(--text-tertiary);
        }

        .task-day {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent);
            background: rgba(201, 166, 107, 0.15);
            padding: 4px 8px;
            border-radius: 4px;
        }

        .tip-box {
            background: rgba(201, 166, 107, 0.1);
            border: 1px solid rgba(201, 166, 107, 0.3);
            border-radius: 10px;
            padding: 16px;
            margin-top: 16px;
        }

        .tip-box-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 8px;
        }

        .tip-box p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-elevated);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 20px;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .caption-formula {
            background: var(--bg-elevated);
            border-radius: 10px;
            padding: 16px;
            font-family: monospace;
            font-size: 0.85rem;
            line-height: 1.8;
            color: var(--text-secondary);
        }

        .caption-formula strong {
            color: var(--accent);
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-box">
            <div class="login-logo">Galtwood Co</div>
            <p class="login-subtitle">Marketing Dashboard</p>
            <input type="password" class="login-input" id="loginPassword" placeholder="Enter password" onkeypress="if(event.key==='Enter')attemptLogin()">
            <button class="login-btn" onclick="attemptLogin()">Sign In</button>
            <p class="login-error" id="loginError">Invalid password</p>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard" id="dashboard">
        <header class="header">
            <div class="header-left">
                <div class="header-logo">Galtwood Co</div>
                <nav class="header-nav">
                    <button class="header-nav-btn active" data-view="thisweek" onclick="switchView('thisweek')">This Week</button>
                    <button class="header-nav-btn" data-view="generate" onclick="switchView('generate')">Generate</button>
                    <button class="header-nav-btn" data-view="calendar" onclick="switchView('calendar')">Calendar</button>
                </nav>
            </div>
            <div class="header-right">
                <div class="credits-display">
                    <span>Credits:</span>
                    <span class="credits-amount" id="creditsDisplay">0</span>
                </div>
                <button class="logout-btn" onclick="logout()">Sign Out</button>
            </div>
        </header>

        <main class="main-content">
            <!-- This Week View -->
            <div class="view-panel active" id="viewThisweek">
                <div class="week-guide">
                    <div class="week-header">
                        <h1>üì∏ Your Content Plan</h1>
                        <p>Simple weekly tasks to grow your Instagram presence</p>
                    </div>

                    <!-- Photo Tasks -->
                    <div class="week-section">
                        <div class="week-section-header">
                            <div class="week-section-icon">üì∑</div>
                            <div>
                                <div class="week-section-title">Photos to Capture</div>
                                <div class="week-section-subtitle">Take these during your normal work this week</div>
                            </div>
                        </div>
                        <div class="task-list" id="photoTasks">
                            <div class="task-item" onclick="toggleTask(this)">
                                <div class="task-checkbox"><span class="task-checkbox-icon">‚úì</span></div>
                                <div class="task-content">
                                    <div class="task-text">Raw slab or lumber before you start</div>
                                    <div class="task-hint">Show the starting material - customers love seeing the "before"</div>
                                </div>
                            </div>
                            <div class="task-item" onclick="toggleTask(this)">
                                <div class="task-checkbox"><span class="task-checkbox-icon">‚úì</span></div>
                                <div class="task-content">
                                    <div class="task-text">Mid-project work-in-progress shot</div>
                                    <div class="task-hint">Glue-up, clamping, sanding, routing - any process step</div>
                                </div>
                            </div>
                            <div class="task-item" onclick="toggleTask(this)">
                                <div class="task-checkbox"><span class="task-checkbox-icon">‚úì</span></div>
                                <div class="task-content">
                                    <div class="task-text">Close-up detail shot</div>
                                    <div class="task-hint">Grain pattern, joint detail, finish close-up - show the craftsmanship</div>
                                </div>
                            </div>
                            <div class="task-item" onclick="toggleTask(this)">
                                <div class="task-checkbox"><span class="task-checkbox-icon">‚úì</span></div>
                                <div class="task-content">
                                    <div class="task-text">Finished piece (good lighting!)</div>
                                    <div class="task-hint">Natural light works best - near a window or outside</div>
                                </div>
                            </div>
                        </div>
                        <div class="tip-box">
                            <div class="tip-box-title">üí° Pro Tip</div>
                            <p>Don't overthink it - phone photos are fine. Just wipe sawdust off the lens and get good natural lighting. One project = 4+ posts worth of content.</p>
                        </div>
                    </div>

                    <!-- Posting Schedule -->
                    <div class="week-section">
                        <div class="week-section-header">
                            <div class="week-section-icon">üìÖ</div>
                            <div>
                                <div class="week-section-title">Posting Schedule</div>
                                <div class="week-section-subtitle">3 posts per week - that's it</div>
                            </div>
                        </div>
                        <div class="task-list" id="postTasks">
                            <div class="task-item" onclick="toggleTask(this)">
                                <div class="task-checkbox"><span class="task-checkbox-icon">‚úì</span></div>
                                <div class="task-content">
                                    <div class="task-text">Post 1: Process or work-in-progress shot</div>
                                    <div class="task-hint">Show the craft - sanding, gluing, cutting, routing</div>
                                </div>
                                <div class="task-day">MON</div>
                            </div>
                            <div class="task-item" onclick="toggleTask(this)">
                                <div class="task-checkbox"><span class="task-checkbox-icon">‚úì</span></div>
                                <div class="task-content">
                                    <div class="task-text">Post 2: Detail or shop life shot</div>
                                    <div class="task-hint">Grain close-up, tools, workspace, sawdust vibes</div>
                                </div>
                                <div class="task-day">WED</div>
                            </div>
                            <div class="task-item" onclick="toggleTask(this)">
                                <div class="task-checkbox"><span class="task-checkbox-icon">‚úì</span></div>
                                <div class="task-content">
                                    <div class="task-text">Post 3: Finished piece or delivery</div>
                                    <div class="task-hint">The hero shot - completed work in good lighting</div>
                                </div>
                                <div class="task-day">FRI</div>
                            </div>
                        </div>

                        <div class="progress-bar">
                            <div class="progress-fill" id="weekProgress" style="width: 0%"></div>
                        </div>
                        <div class="progress-text" id="progressText">0 of 3 posts this week</div>
                    </div>

                    <!-- Caption Formula -->
                    <div class="week-section">
                        <div class="week-section-header">
                            <div class="week-section-icon">‚úçÔ∏è</div>
                            <div>
                                <div class="week-section-title">Easy Caption Formula</div>
                                <div class="week-section-subtitle">Copy this structure for every post</div>
                            </div>
                        </div>
                        <div class="caption-formula">
<strong>[What it is]</strong> + <strong>[One interesting detail]</strong> + <strong>[Call to action]</strong>

Example:
"Black walnut live edge desk heading to its new home in Toronto. This slab had the most incredible feathered grain pattern I've seen all year. DM for custom orders ‚Üí"
                        </div>
                        <div class="tip-box">
                            <div class="tip-box-title">Hashtags to Use</div>
                            <p>#galtwoodco #customfurniture #liveedge #woodworking #handcrafted #walnut #torontofurniture #madeinontario #customtable #woodwork</p>
                        </div>
                    </div>

                    <!-- Weekly Time Commitment -->
                    <div class="week-section">
                        <div class="week-section-header">
                            <div class="week-section-icon">‚è±Ô∏è</div>
                            <div>
                                <div class="week-section-title">Time Required</div>
                                <div class="week-section-subtitle">This should take ~15 minutes total per week</div>
                            </div>
                        </div>
                        <div class="task-list">
                            <div class="task-item" style="cursor: default;">
                                <div class="task-content">
                                    <div class="task-text">Taking photos during work</div>
                                    <div class="task-hint">2-3 minutes scattered through your week</div>
                                </div>
                                <div class="task-day">~3 min</div>
                            </div>
                            <div class="task-item" style="cursor: default;">
                                <div class="task-content">
                                    <div class="task-text">Sunday batch session</div>
                                    <div class="task-hint">Pick 3 photos, write captions, schedule posts</div>
                                </div>
                                <div class="task-day">~12 min</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generate View -->
            <div class="view-panel" id="viewGenerate">
                <div class="section-header">
                    <h1>Content Generator</h1>
                    <p>Create posts, captions, and content ideas for Galtwood Co</p>
                </div>

                <div class="generator-grid">
                    <div class="generator-card">
                        <h3><span>üìù</span> Generate Content</h3>

                        <div class="form-group">
                            <label class="form-label">Content Type</label>
                            <select class="form-select" id="contentType">
                                <option value="instagram-post">Instagram Post</option>
                                <option value="instagram-story">Instagram Story Idea</option>
                                <option value="facebook-post">Facebook Post</option>
                                <option value="product-description">Product Description</option>
                                <option value="blog-outline">Blog Post Outline</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Topic / Product</label>
                            <input type="text" class="form-input" id="contentTopic" placeholder="e.g., Live edge walnut dining table">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Additional Details (optional)</label>
                            <textarea class="form-textarea" id="contentDetails" placeholder="Any specific details, dimensions, features to highlight..."></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Tone</label>
                            <select class="form-select" id="contentTone">
                                <option value="professional">Professional</option>
                                <option value="casual">Casual & Friendly</option>
                                <option value="luxurious">Luxurious & Premium</option>
                                <option value="educational">Educational</option>
                            </select>
                        </div>

                        <button class="generate-btn" id="generateBtn" onclick="generateContent()">
                            Generate Content
                        </button>
                        <p class="credit-cost">Costs 5 credits per generation</p>
                    </div>

                    <div class="output-card">
                        <h3>Generated Content</h3>
                        <div id="outputArea">
                            <div class="output-empty">
                                <p>Your generated content will appear here</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar View -->
            <div class="view-panel" id="viewCalendar">
                <div class="section-header">
                    <h1>Content Calendar</h1>
                    <p>Plan and schedule your posts</p>
                </div>

                <div class="calendar-header">
                    <div class="calendar-nav">
                        <button class="calendar-nav-btn" onclick="changeMonth(-1)">&larr;</button>
                        <span class="calendar-month" id="calendarMonth">January 2026</span>
                        <button class="calendar-nav-btn" onclick="changeMonth(1)">&rarr;</button>
                    </div>
                </div>

                <div class="calendar-grid" id="calendarGrid">
                    <!-- Generated by JS -->
                </div>
            </div>

            <!-- Scheduled View -->
            <div class="view-panel" id="viewScheduled">
                <div class="section-header">
                    <h1>Scheduled Posts</h1>
                    <p>Upcoming content ready to publish</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Scheduled This Week</div>
                        <div class="stat-value" id="statWeek">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Drafts</div>
                        <div class="stat-value" id="statDrafts">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Published This Month</div>
                        <div class="stat-value" id="statPublished">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Credits Remaining</div>
                        <div class="stat-value accent" id="statCredits">0</div>
                    </div>
                </div>

                <h3 style="margin-bottom: 16px;">Upcoming Posts</h3>
                <div class="scheduled-list" id="scheduledList">
                    <p style="color: var(--text-tertiary); text-align: center; padding: 40px;">No scheduled posts yet. Generate content and schedule it!</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Config
        const SUPABASE_URL = 'https://rdsmdywbdiskxknluiym.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkc21keXdiZGlza3hrbmx1aXltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3ODk3MTgsImV4cCI6MjA4MzM2NTcxOH0.DcLpWs8Lf1s4Flf54J5LubokSYrd7h-XvI_X0jj6bLM';
        const GALTWOOD_USER_ID = 'galtwood_alex'; // Placeholder - would be real user ID

        let isLoggedIn = false;
        let userCredits = 0;
        let currentMonth = new Date();
        let scheduledPosts = [];

        // Brand context for AI
        const BRAND_CONTEXT = `
Galtwood Co is a premium custom woodworking company specializing in:
- Live edge tables and furniture
- Custom dining tables
- Handcrafted cutting boards
- Bespoke wood pieces

Brand voice: Craftsman-like, warm, premium quality, attention to detail.
Location: Works alongside Proto Golf (local artisan workshop).
Target audience: Homeowners looking for unique, handcrafted furniture pieces.
        `.trim();

        // Check login on load
        document.addEventListener('DOMContentLoaded', () => {
            // Check if authenticated via parent (Google OAuth)
            const urlParams = new URLSearchParams(window.location.search);
            const isAuthed = urlParams.get('authed') === 'true';
            const email = urlParams.get('email');

            if (isAuthed && email) {
                // Authenticated via Google OAuth from parent
                localStorage.setItem('galtwood_token', 'google_' + Date.now());
                localStorage.setItem('galtwood_email', email);
                showDashboard();
                return;
            }

            // Check for existing token
            const token = localStorage.getItem('galtwood_token');
            if (token) {
                showDashboard();
            }
        });

        async function attemptLogin() {
            const password = document.getElementById('loginPassword').value;
            const errorEl = document.getElementById('loginError');

            // Simple password check as fallback
            if (password === 'galtwood2026') {
                localStorage.setItem('galtwood_token', 'galtwood_' + Date.now());
                showDashboard();
            } else {
                errorEl.style.display = 'block';
                setTimeout(() => errorEl.style.display = 'none', 3000);
            }
        }

        function showDashboard() {
            isLoggedIn = true;
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('dashboard').classList.add('active');
            loadUserCredits();
            renderCalendar();
            loadScheduledPosts();
        }

        function logout() {
            localStorage.removeItem('galtwood_token');
            location.reload();
        }

        function switchView(view) {
            // Update nav
            document.querySelectorAll('.header-nav-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === view);
            });

            // Update panels
            document.querySelectorAll('.view-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.getElementById('view' + view.charAt(0).toUpperCase() + view.slice(1)).classList.add('active');
        }

        async function loadUserCredits() {
            // In production, fetch from Supabase based on user
            // For now, simulate
            userCredits = 500;
            updateCreditsDisplay();
        }

        function updateCreditsDisplay() {
            document.getElementById('creditsDisplay').textContent = userCredits.toLocaleString();
            document.getElementById('statCredits').textContent = userCredits.toLocaleString();
        }

        async function generateContent() {
            const btn = document.getElementById('generateBtn');
            const outputArea = document.getElementById('outputArea');

            const contentType = document.getElementById('contentType').value;
            const topic = document.getElementById('contentTopic').value;
            const details = document.getElementById('contentDetails').value;
            const tone = document.getElementById('contentTone').value;

            if (!topic.trim()) {
                alert('Please enter a topic or product');
                return;
            }

            if (userCredits < 5) {
                alert('Not enough credits. You need 5 credits to generate content.');
                return;
            }

            btn.disabled = true;
            btn.textContent = 'Generating...';

            try {
                const prompt = buildPrompt(contentType, topic, details, tone);

                const response = await fetch('/api/gemini', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        prompt: prompt,
                        model: 'gemini-2.0-flash'
                    })
                });

                if (!response.ok) throw new Error('Generation failed');

                const data = await response.json();
                const generatedText = data.candidates?.[0]?.content?.parts?.[0]?.text || 'No content generated';

                // Deduct credits
                userCredits -= 5;
                updateCreditsDisplay();

                // Show output
                outputArea.innerHTML = `
                    <div class="output-content">${escapeHtml(generatedText)}</div>
                    <div class="output-actions">
                        <button class="output-btn output-btn-secondary" onclick="copyContent()">Copy</button>
                        <button class="output-btn output-btn-primary" onclick="scheduleContent('${escapeHtml(generatedText.substring(0, 100))}')">Schedule</button>
                    </div>
                `;

            } catch (error) {
                console.error('Generation error:', error);
                outputArea.innerHTML = `<div class="output-empty"><p style="color: #ef4444;">Failed to generate. Please try again.</p></div>`;
            }

            btn.disabled = false;
            btn.textContent = 'Generate Content';
        }

        function buildPrompt(type, topic, details, tone) {
            const typeInstructions = {
                'instagram-post': 'Write an engaging Instagram post caption with relevant hashtags.',
                'instagram-story': 'Write 3-4 Instagram story slide ideas with text overlays.',
                'facebook-post': 'Write a Facebook post that encourages engagement.',
                'product-description': 'Write a compelling product description for an e-commerce listing.',
                'blog-outline': 'Create a blog post outline with headings and key points.'
            };

            const toneInstructions = {
                'professional': 'Use a professional, polished tone.',
                'casual': 'Use a casual, friendly, approachable tone.',
                'luxurious': 'Use a premium, luxurious tone that conveys exclusivity.',
                'educational': 'Use an educational, informative tone that teaches the reader.'
            };

            return `${BRAND_CONTEXT}

Task: ${typeInstructions[type]}

Topic/Product: ${topic}
${details ? `Additional Details: ${details}` : ''}

Tone: ${toneInstructions[tone]}

Write the content now. Be concise but compelling. For Instagram, include 5-10 relevant hashtags at the end.`;
        }

        function copyContent() {
            const content = document.querySelector('.output-content');
            if (content) {
                navigator.clipboard.writeText(content.textContent);
                alert('Copied to clipboard!');
            }
        }

        function scheduleContent(preview) {
            // In production, would open a scheduling modal
            alert('Scheduling feature coming soon! For now, copy the content and schedule manually.');
        }

        // Calendar
        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const monthDisplay = document.getElementById('calendarMonth');

            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();

            monthDisplay.textContent = currentMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startPadding = firstDay.getDay();

            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            let html = days.map(d => `<div class="calendar-day-header">${d}</div>`).join('');

            const today = new Date();

            // Previous month padding
            for (let i = 0; i < startPadding; i++) {
                const day = new Date(year, month, -startPadding + i + 1);
                html += `<div class="calendar-day other-month"><div class="calendar-day-num">${day.getDate()}</div></div>`;
            }

            // Current month
            for (let i = 1; i <= lastDay.getDate(); i++) {
                const isToday = today.getDate() === i && today.getMonth() === month && today.getFullYear() === year;
                html += `<div class="calendar-day${isToday ? ' today' : ''}"><div class="calendar-day-num">${i}</div></div>`;
            }

            // Next month padding
            const totalCells = startPadding + lastDay.getDate();
            const remaining = totalCells % 7 === 0 ? 0 : 7 - (totalCells % 7);
            for (let i = 1; i <= remaining; i++) {
                html += `<div class="calendar-day other-month"><div class="calendar-day-num">${i}</div></div>`;
            }

            grid.innerHTML = html;
        }

        function changeMonth(delta) {
            currentMonth.setMonth(currentMonth.getMonth() + delta);
            renderCalendar();
        }

        // Scheduled Posts
        async function loadScheduledPosts() {
            // In production, load from Supabase
            scheduledPosts = [];
            renderScheduledPosts();

            document.getElementById('statWeek').textContent = '0';
            document.getElementById('statDrafts').textContent = '0';
            document.getElementById('statPublished').textContent = '0';
        }

        function renderScheduledPosts() {
            const list = document.getElementById('scheduledList');

            if (scheduledPosts.length === 0) {
                list.innerHTML = `<p style="color: var(--text-tertiary); text-align: center; padding: 40px;">No scheduled posts yet. Generate content and schedule it!</p>`;
                return;
            }

            list.innerHTML = scheduledPosts.map(post => `
                <div class="scheduled-item">
                    <div class="scheduled-date">
                        <div class="scheduled-date-day">${post.day}</div>
                        <div class="scheduled-date-month">${post.month}</div>
                    </div>
                    <div class="scheduled-content">
                        <div class="scheduled-platform">${post.platform}</div>
                        <div class="scheduled-text">${post.preview}</div>
                    </div>
                    <div class="scheduled-actions">
                        <button class="scheduled-action-btn" title="Edit">‚úèÔ∏è</button>
                        <button class="scheduled-action-btn" title="Delete">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Task Management for This Week view
        function toggleTask(element) {
            element.classList.toggle('completed');
            saveTaskProgress();
            updateWeekProgress();
        }

        function saveTaskProgress() {
            const weekKey = getWeekKey();
            const photoTasks = document.querySelectorAll('#photoTasks .task-item');
            const postTasks = document.querySelectorAll('#postTasks .task-item');

            const progress = {
                photos: Array.from(photoTasks).map(t => t.classList.contains('completed')),
                posts: Array.from(postTasks).map(t => t.classList.contains('completed'))
            };

            localStorage.setItem('galtwood_tasks_' + weekKey, JSON.stringify(progress));
        }

        function loadTaskProgress() {
            const weekKey = getWeekKey();
            const saved = localStorage.getItem('galtwood_tasks_' + weekKey);

            if (saved) {
                const progress = JSON.parse(saved);
                const photoTasks = document.querySelectorAll('#photoTasks .task-item');
                const postTasks = document.querySelectorAll('#postTasks .task-item');

                progress.photos.forEach((completed, i) => {
                    if (completed && photoTasks[i]) photoTasks[i].classList.add('completed');
                });

                progress.posts.forEach((completed, i) => {
                    if (completed && postTasks[i]) postTasks[i].classList.add('completed');
                });
            }

            updateWeekProgress();
        }

        function updateWeekProgress() {
            const postTasks = document.querySelectorAll('#postTasks .task-item');
            const completed = document.querySelectorAll('#postTasks .task-item.completed').length;
            const total = postTasks.length;

            const progressBar = document.getElementById('weekProgress');
            const progressText = document.getElementById('progressText');

            if (progressBar) progressBar.style.width = (completed / total * 100) + '%';
            if (progressText) progressText.textContent = completed + ' of ' + total + ' posts this week';
        }

        function getWeekKey() {
            // Get ISO week number
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 1);
            const week = Math.ceil(((now - start) / 86400000 + start.getDay() + 1) / 7);
            return now.getFullYear() + '-W' + week;
        }

        // Load task progress when dashboard loads
        const originalShowDashboard = showDashboard;
        showDashboard = function() {
            originalShowDashboard();
            loadTaskProgress();
        };
    </script>
</body>
</html>
