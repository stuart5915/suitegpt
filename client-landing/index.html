<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUITE Clients | Your AI Dev Team — $50/mo</title>
    <meta name="description" content="Your own AI-powered dev team on retainer. Describe any business problem, get a working solution in 24 hours. Free for 30 days, then from $50/mo.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://clients.suitegpt.app/">
    <meta property="og:title" content="SUITE Clients | Your AI Dev Team — $50/mo">
    <meta property="og:description" content="Describe any business problem in plain English. Get a custom working solution within 24 hours. Free dashboard, unlimited chat support.">
    <meta property="og:image" content="https://clients.suitegpt.app/assets/og-clients.png">
    <meta property="og:site_name" content="SUITE Clients">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="SUITE Clients | Your AI Dev Team — $50/mo">
    <meta name="twitter:description" content="Describe any business problem in plain English. Get a custom working solution within 24 hours.">
    <meta name="twitter:image" content="https://clients.suitegpt.app/assets/og-clients.png">
    <link rel="icon" type="image/png" href="/suitegpt-logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif&family=General+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        :root {
            --cream: #faf8f4;
            --cream-dark: #f0ede6;
            --ink: #0f0f0f;
            --ink-soft: #1a1a1a;
            --ink-muted: #2a2a2a;
            --text: #1a1a1a;
            --text-mid: #555;
            --text-soft: #888;
            --text-faint: #bbb;
            --ember: #e8613a;
            --ember-light: #f4845f;
            --amber: #e8a44a;
            --sage: #3ea878;
            --sage-soft: rgba(62,168,120,0.12);
            --sky: #4a90d9;
            --plum: #8b6cc1;
            --border: rgba(0,0,0,0.07);
            --border-light: rgba(255,255,255,0.08);
            --glass: rgba(255,255,255,0.65);
            --glass-border: rgba(255,255,255,0.35);
            --shadow-soft: 0 4px 24px rgba(0,0,0,0.06);
            --shadow-med: 0 8px 40px rgba(0,0,0,0.08);
            --shadow-heavy: 0 20px 60px rgba(0,0,0,0.12);
            --shadow-glow: 0 8px 40px rgba(232,97,58,0.25);
            --radius: 20px;
            --radius-sm: 12px;
            --radius-xs: 8px;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'General Sans', -apple-system, sans-serif;
            background: var(--cream);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        /* ════════════ GRAIN TEXTURE ════════════ */
        body::after {
            content: ''; position: fixed; inset: 0; pointer-events: none; z-index: 10000;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23g)' opacity='0.025'/%3E%3C/svg%3E");
            background-size: 256px;
        }

        /* ════════════ NAV ════════════ */
        .nav {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            padding: 16px 24px;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .nav.scrolled {
            background: rgba(250,248,244,0.82);
            backdrop-filter: blur(24px) saturate(1.4);
            -webkit-backdrop-filter: blur(24px) saturate(1.4);
        }
        .nav-inner {
            max-width: 1140px; margin: 0 auto;
            display: flex; align-items: center; justify-content: space-between;
        }
        .nav-brand {
            display: flex; align-items: center; gap: 10px;
            font-weight: 700; font-size: 0.95rem; letter-spacing: -0.01em;
        }
        .nav-mark {
            width: 32px; height: 32px; border-radius: 10px;
            background: linear-gradient(135deg, var(--ember), var(--amber));
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: 700; font-size: 0.75rem; letter-spacing: 0.02em;
        }
        .nav-links { display: flex; gap: 28px; }
        .nav-links a {
            font-size: 0.84rem; font-weight: 500; color: var(--text-mid);
            text-decoration: none; transition: color 0.2s;
        }
        .nav-links a:hover { color: var(--text); }
        .nav-cta {
            padding: 10px 24px; border-radius: 100px; border: none;
            background: var(--ink); color: white;
            font-family: inherit; font-weight: 600; font-size: 0.84rem;
            cursor: pointer; transition: all 0.25s; text-decoration: none;
        }
        .nav-cta:hover { background: var(--ember); transform: translateY(-1px); box-shadow: var(--shadow-glow); }
        .nav-hamburger {
            display: none; width: 40px; height: 40px; border-radius: 10px;
            border: 1px solid var(--border); background: var(--glass);
            backdrop-filter: blur(8px); cursor: pointer;
            align-items: center; justify-content: center; flex-shrink: 0;
        }
        .nav-hamburger svg { width: 18px; height: 18px; color: var(--text); }
        .nav-hamburger .icon-close { display: none; }
        .nav-hamburger.open .icon-menu { display: none; }
        .nav-hamburger.open .icon-close { display: block; }
        @media (max-width: 768px) {
            .nav-hamburger { display: flex; }
            .nav-links {
                display: none; position: absolute; top: 100%; left: 16px; right: 16px;
                background: rgba(250,248,244,0.96); backdrop-filter: blur(24px);
                -webkit-backdrop-filter: blur(24px);
                border: 1px solid var(--border); border-radius: 14px;
                padding: 12px 0; flex-direction: column; gap: 0;
                box-shadow: var(--shadow-med); margin-top: 8px;
            }
            .nav-links.open { display: flex; }
            .nav-links a {
                padding: 12px 24px; font-size: 0.92rem;
                border-bottom: 1px solid var(--border);
            }
            .nav-links a:last-child { border-bottom: none; }
            .nav-links a:hover { background: rgba(0,0,0,0.02); }
        }

        /* ════════════ HERO ════════════ */
        .hero {
            display: flex; align-items: center;
            padding: 120px 24px 60px;
            position: relative; overflow: hidden;
        }
        .hero-bg {
            position: absolute; inset: 0; z-index: 0;
        }
        .hero-orb {
            position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.4;
            animation: orbFloat 20s ease-in-out infinite;
        }
        .hero-orb-1 {
            width: 500px; height: 500px; top: -10%; right: -5%;
            background: radial-gradient(circle, rgba(232,97,58,0.35), transparent 70%);
            animation-delay: 0s;
        }
        .hero-orb-2 {
            width: 400px; height: 400px; bottom: -5%; left: -5%;
            background: radial-gradient(circle, rgba(232,164,74,0.3), transparent 70%);
            animation-delay: -7s;
        }
        .hero-orb-3 {
            width: 350px; height: 350px; top: 30%; left: 40%;
            background: radial-gradient(circle, rgba(139,108,193,0.2), transparent 70%);
            animation-delay: -14s;
        }
        @keyframes orbFloat {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -20px) scale(1.05); }
            66% { transform: translate(-20px, 15px) scale(0.95); }
        }
        .hero-grid {
            position: absolute; inset: 0;
            background-image:
                linear-gradient(rgba(0,0,0,0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,0,0,0.02) 1px, transparent 1px);
            background-size: 60px 60px;
            mask-image: radial-gradient(ellipse 70% 60% at 50% 40%, black, transparent);
            -webkit-mask-image: radial-gradient(ellipse 70% 60% at 50% 40%, black, transparent);
        }
        .hero-content {
            position: relative; z-index: 1;
            max-width: 1140px; margin: 0 auto; width: 100%;
            display: flex; flex-direction: column; align-items: center; text-align: center;
        }
        .hero-text {}
        .hero-pill {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 6px 16px 6px 8px; border-radius: 100px;
            background: var(--glass); border: 1px solid var(--glass-border);
            backdrop-filter: blur(12px);
            font-size: 0.78rem; font-weight: 600; color: var(--text-mid);
            margin-bottom: 28px;
            animation: fadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.1s both;
        }
        .hero-pill-dot {
            width: 8px; height: 8px; border-radius: 50%; background: var(--sage);
            box-shadow: 0 0 8px rgba(62,168,120,0.5);
            animation: pulseGlow 2.5s ease-in-out infinite;
        }
        @keyframes pulseGlow {
            0%, 100% { opacity: 1; box-shadow: 0 0 8px rgba(62,168,120,0.5); }
            50% { opacity: 0.6; box-shadow: 0 0 4px rgba(62,168,120,0.2); }
        }
        .hero h1 {
            font-family: 'Instrument Serif', serif;
            font-size: clamp(2.6rem, 5.5vw, 4.2rem);
            line-height: 1.05; letter-spacing: -0.025em;
            margin-bottom: 24px;
            animation: fadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both;
        }
        .hero h1 em {
            font-style: italic; color: var(--ember);
            position: relative;
        }
        .hero-sub {
            font-size: 1.1rem; color: var(--text-mid);
            max-width: 520px; line-height: 1.7; margin-bottom: 36px;
            margin-left: auto; margin-right: auto;
            animation: fadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.35s both;
        }
        .hero-actions {
            display: flex; gap: 12px; flex-wrap: wrap; justify-content: center;
            animation: fadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.45s both;
        }
        .btn-main {
            padding: 16px 32px; border-radius: 14px; border: none;
            background: var(--ink); color: white;
            font-family: inherit; font-weight: 600; font-size: 0.95rem;
            cursor: pointer; transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            text-decoration: none; display: inline-flex; align-items: center; gap: 8px;
        }
        .btn-main:hover { background: var(--ember); transform: translateY(-2px); box-shadow: var(--shadow-glow); }
        .btn-main svg { transition: transform 0.3s; }
        .btn-main:hover svg { transform: translateX(3px); }
        .btn-ghost {
            padding: 16px 32px; border-radius: 14px;
            border: 1.5px solid var(--border); background: var(--glass);
            backdrop-filter: blur(8px);
            color: var(--text); font-family: inherit; font-weight: 600; font-size: 0.95rem;
            cursor: pointer; transition: all 0.3s; text-decoration: none;
        }
        .btn-ghost:hover { border-color: rgba(0,0,0,0.15); background: white; }
        .hero-proof {
            display: flex; gap: 32px; margin-top: 40px; justify-content: center;
            animation: fadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.55s both;
        }
        .hero-proof-item { display: flex; flex-direction: column; }
        .hero-proof-val { font-size: 1.6rem; font-weight: 700; letter-spacing: -0.02em; }
        .hero-proof-label { font-size: 0.75rem; color: var(--text-soft); font-weight: 500; }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* (mockup styles removed — replaced by preview system) */

        /* ════════════ PREVIEW SYSTEM ════════════ */
        .hero-preview-input {
            max-width: 620px; width: 100%; margin: 0 auto;
            animation: fadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.3s both;
        }
        .preview-form {
            display: flex; flex-direction: column; gap: 0; position: relative;
            background: white; border-radius: 16px;
            box-shadow: 0 4px 32px rgba(0,0,0,0.1), 0 0 0 1px rgba(0,0,0,0.04);
            overflow: hidden; transition: box-shadow 0.3s;
        }
        .preview-form:focus-within {
            box-shadow: 0 8px 48px rgba(232,97,58,0.15), 0 0 0 2px var(--ember);
        }
        .preview-form textarea {
            width: 100%; padding: 20px 24px; border: none; outline: none;
            font-family: inherit; font-size: 1.05rem; color: var(--text);
            background: transparent; resize: none;
            line-height: 1.5;
        }
        .preview-form textarea::placeholder { color: var(--text-soft); }
        .preview-form button {
            padding: 14px 28px; margin: 0 6px 6px; border-radius: 12px; border: none;
            background: var(--ink); color: white;
            font-family: inherit; font-weight: 700; font-size: 0.9rem;
            cursor: pointer; transition: all 0.3s; white-space: nowrap;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            align-self: flex-end;
        }
        .preview-form button:hover { background: var(--ember); }
        .preview-form button:disabled { opacity: 0.5; cursor: not-allowed; }
        .preview-hint {
            text-align: center; margin-top: 14px;
            font-size: 0.82rem; color: var(--text-soft);
            animation: fadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.45s both;
        }
        .preview-examples {
            display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; margin-top: 16px;
            animation: fadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.55s both;
        }
        .preview-example {
            padding: 6px 14px; border-radius: 100px;
            background: var(--glass); border: 1px solid var(--glass-border);
            font-size: 0.76rem; color: var(--text-mid); font-weight: 500;
            cursor: pointer; transition: all 0.25s; backdrop-filter: blur(8px);
        }
        .preview-example:hover { background: white; border-color: var(--ember); color: var(--ember); }

        @media (max-width: 540px) {
            .preview-form textarea { padding: 18px 20px; }
            .preview-form button { align-self: stretch; }
        }

        /* Inline Preview Card (replaces fullscreen loading) */
        .inline-preview {
            display: none; max-width: 720px; width: 100%; margin: 36px auto 0;
            animation: fadeUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) both;
        }
        .inline-preview.active { display: block; }
        .inline-preview-browser {
            background: var(--ink); border-radius: 16px; overflow: hidden;
            box-shadow: 0 24px 80px rgba(0,0,0,0.18), 0 0 0 1px rgba(255,255,255,0.04);
        }
        .inline-preview-bar {
            display: flex; align-items: center; gap: 6px;
            padding: 10px 16px; background: var(--ink-soft);
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }
        .inline-preview-bar .mockup-dot { width: 9px; height: 9px; border-radius: 50%; }
        .inline-preview-bar .mockup-dot:nth-child(1) { background: #ff5f57; }
        .inline-preview-bar .mockup-dot:nth-child(2) { background: #ffbd2e; }
        .inline-preview-bar .mockup-dot:nth-child(3) { background: #28c840; }
        .inline-preview-url {
            flex: 1; margin-left: 12px; padding: 5px 14px;
            background: rgba(255,255,255,0.06); border-radius: 8px;
            font-size: 0.7rem; color: rgba(255,255,255,0.3); font-family: 'SF Mono', monospace;
        }
        .inline-preview-body {
            position: relative; height: 420px; overflow: hidden;
            background: #0a0a0a;
        }
        .inline-preview-body iframe {
            width: 100%; height: 100%; border: none;
            transform-origin: top left;
        }
        .inline-preview-loading {
            position: absolute; inset: 0;
            display: flex; align-items: center; justify-content: center;
            flex-direction: column; gap: 16px;
            background: var(--ink); z-index: 2;
            transition: opacity 0.4s;
        }
        .inline-preview-loading.done { opacity: 0; pointer-events: none; }
        .inline-preview-progress {
            position: absolute; top: 0; left: 0; height: 3px; z-index: 5;
            background: linear-gradient(90deg, var(--ember), #e8a44a, var(--ember));
            background-size: 200% 100%;
            animation: progressShimmer 1.2s linear infinite;
            width: 0; opacity: 0; transition: opacity 0.3s;
            border-radius: 0 0 2px 2px;
        }
        .inline-preview-progress.active { width: 100%; opacity: 1; }
        @keyframes progressShimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .inline-preview-body.updating { opacity: 0.6; transition: opacity 0.3s; }
        .inline-preview-body:not(.updating) { transition: opacity 0.3s; }
        .inline-preview-actions {
            display: flex; gap: 10px; justify-content: center; margin-top: 16px;
        }
        .inline-preview-actions .btn-main { padding: 14px 28px; }
        .inline-preview-actions .btn-ghost { padding: 14px 20px; }

        .inline-feedback {
            margin-top: 16px; background: var(--ink); border-radius: 16px;
            padding: 20px; text-align: center;
        }
        .inline-feedback-question {
            color: white; font-weight: 600; font-size: 0.95rem; margin-bottom: 12px;
        }
        .inline-feedback-chips {
            display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-bottom: 14px;
        }
        .inline-feedback-chip {
            padding: 8px 16px; border-radius: 20px; border: 1.5px solid rgba(255,255,255,0.15);
            background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.8);
            font-family: inherit; font-size: 0.82rem; font-weight: 500;
            cursor: pointer; transition: all 0.2s;
        }
        .inline-feedback-chip:hover {
            border-color: var(--ember); color: white; background: rgba(232,97,58,0.15);
        }
        .color-preset-row {
            display: flex; align-items: center; gap: 10px; justify-content: center;
            margin-bottom: 14px; flex-wrap: wrap;
        }
        .color-preset-label {
            font-size: 0.78rem; color: rgba(255,255,255,0.4); font-weight: 500;
        }
        .color-dot {
            width: 28px; height: 28px; border-radius: 50%; border: 2.5px solid rgba(255,255,255,0.12);
            cursor: pointer; transition: all 0.2s; padding: 0;
        }
        .color-dot:hover {
            transform: scale(1.2); border-color: rgba(255,255,255,0.5);
        }
        .color-dot.active {
            border-color: white; box-shadow: 0 0 0 2px rgba(255,255,255,0.3);
            transform: scale(1.15);
        }
        .inline-feedback-input {
            display: flex; gap: 8px; margin-bottom: 14px;
        }
        .inline-feedback-input input {
            flex: 1; padding: 12px 16px; border-radius: 12px; border: 1.5px solid rgba(255,255,255,0.12);
            background: rgba(255,255,255,0.06); color: white; font-family: inherit; font-size: 0.88rem;
            outline: none; transition: border-color 0.2s;
        }
        .inline-feedback-input input::placeholder { color: rgba(255,255,255,0.3); }
        .inline-feedback-input input:focus { border-color: var(--ember); }
        .inline-feedback-input button {
            padding: 12px 20px; border-radius: 12px; border: none;
            background: var(--ember); color: white; font-family: inherit;
            font-weight: 700; font-size: 0.85rem; cursor: pointer; white-space: nowrap;
            transition: opacity 0.2s;
        }
        .inline-feedback-input button:disabled { opacity: 0.5; cursor: not-allowed; }
        .inline-feedback-input button:hover:not(:disabled) { opacity: 0.9; }
        .inline-feedback-status {
            font-size: 0.8rem; color: rgba(255,255,255,0.4); min-height: 1.2em; margin-bottom: 10px;
        }

        .preview-loading-spinner {
            width: 40px; height: 40px; border-radius: 50%;
            border: 3px solid rgba(255,255,255,0.08);
            border-top-color: var(--ember);
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .inline-preview-loading h3 { color: white; font-size: 1.1rem; font-weight: 700; margin: 0; }
        .inline-preview-loading p { color: rgba(255,255,255,0.4); font-size: 0.82rem; margin: 0; }
        .preview-loading-dots::after {
            content: ''; animation: dots 1.5s steps(4, end) infinite;
        }
        @keyframes dots {
            0% { content: ''; } 25% { content: '.'; } 50% { content: '..'; } 75% { content: '...'; }
        }

        @media (max-width: 600px) {
            .inline-preview-body { height: 320px; }
            .inline-preview-actions { flex-direction: column; }
            .inline-preview-actions .btn-main,
            .inline-preview-actions .btn-ghost { width: 100%; justify-content: center; text-align: center; }
            .inline-feedback { padding: 16px; }
            .inline-feedback-chips { gap: 6px; }
            .inline-feedback-chip { font-size: 0.78rem; padding: 7px 12px; }
            .color-dot { width: 24px; height: 24px; }
            .color-preset-row { gap: 7px; }
        }

        /* Keep old loading overlay hidden — replaced by inline */
        .preview-loading { display: none !important; }

        /* Full-Screen Preview */
        .preview-screen {
            position: fixed; inset: 0; z-index: 9999;
            background: var(--ink);
            display: none; grid-template-columns: 1fr 380px;
        }
        .preview-screen.active { display: grid; }

        .preview-left {
            display: flex; flex-direction: column;
            border-right: 1px solid rgba(255,255,255,0.08);
        }
        .preview-toolbar {
            display: flex; align-items: center; gap: 12px;
            padding: 12px 20px;
            background: var(--ink-soft);
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }
        .preview-back {
            padding: 8px 16px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);
            background: transparent; color: rgba(255,255,255,0.6);
            font-family: inherit; font-weight: 600; font-size: 0.82rem;
            cursor: pointer; transition: all 0.2s;
        }
        .preview-back:hover { background: rgba(255,255,255,0.06); color: white; }
        .preview-toolbar-title {
            flex: 1; font-size: 0.82rem; color: rgba(255,255,255,0.4); font-weight: 500;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        .preview-device-btns {
            display: flex; gap: 4px;
        }
        .preview-device-btn {
            padding: 6px 10px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.08);
            background: transparent; color: rgba(255,255,255,0.35);
            font-size: 0.72rem; font-weight: 600; cursor: pointer; transition: all 0.2s;
        }
        .preview-device-btn.active { background: rgba(255,255,255,0.08); color: white; border-color: rgba(255,255,255,0.15); }
        .preview-device-btn:hover { color: rgba(255,255,255,0.7); }

        .preview-iframe-wrap {
            flex: 1; display: flex; align-items: center; justify-content: center;
            padding: 24px; overflow: hidden;
            background: linear-gradient(180deg, #111 0%, #0a0a0a 100%);
        }
        .preview-device-frame {
            width: 375px; height: 100%; max-height: 700px;
            border-radius: 36px; background: #000;
            padding: 10px; box-shadow: 0 25px 80px rgba(0,0,0,0.4);
            transition: width 0.4s cubic-bezier(0.16, 1, 0.3, 1), border-radius 0.4s;
        }
        .preview-device-frame.desktop { width: 100%; max-width: 1000px; border-radius: 12px; padding: 0; }
        .preview-device-frame.tablet { width: 768px; border-radius: 20px; }
        .preview-device-frame iframe {
            width: 100%; height: 100%; border: none;
            border-radius: 28px; background: white;
        }
        .preview-device-frame.desktop iframe { border-radius: 12px; }
        .preview-device-frame.tablet iframe { border-radius: 14px; }
        .preview-iframe-loading {
            position: absolute; inset: 0;
            display: none; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.6); z-index: 2; border-radius: inherit;
        }
        .preview-iframe-loading.active { display: flex; }

        .preview-bottom-bar {
            display: flex; align-items: center; gap: 12px; padding: 12px 20px;
            background: var(--ink-soft); border-top: 1px solid rgba(255,255,255,0.06);
        }
        .preview-bottom-bar .btn-main { padding: 12px 24px; font-size: 0.88rem; }
        .preview-bottom-bar .btn-ghost {
            padding: 12px 24px; border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.12); background: transparent;
            color: rgba(255,255,255,0.6); font-family: inherit; font-weight: 600;
            font-size: 0.88rem; cursor: pointer; transition: all 0.2s; text-decoration: none;
        }
        .preview-bottom-bar .btn-ghost:hover { border-color: rgba(255,255,255,0.25); color: white; }

        /* Chat Panel */
        .preview-right {
            display: flex; flex-direction: column;
            background: var(--ink-soft);
        }
        .preview-chat-header {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }
        .preview-chat-header h4 { color: white; font-size: 0.95rem; font-weight: 700; margin-bottom: 2px; }
        .preview-chat-counter { font-size: 0.76rem; color: rgba(255,255,255,0.35); }
        .preview-chat-messages {
            flex: 1; overflow-y: auto; padding: 16px 20px;
            display: flex; flex-direction: column; gap: 12px;
        }
        .pchat-msg {
            max-width: 90%; padding: 12px 16px; border-radius: 14px;
            font-size: 0.88rem; line-height: 1.5;
        }
        .pchat-msg.user {
            align-self: flex-end;
            background: var(--ember); color: white; border-bottom-right-radius: 4px;
        }
        .pchat-msg.assistant {
            align-self: flex-start;
            background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.8);
            border: 1px solid rgba(255,255,255,0.06); border-bottom-left-radius: 4px;
        }
        .preview-chat-input-wrap {
            padding: 12px 16px;
            border-top: 1px solid rgba(255,255,255,0.06);
            display: flex; gap: 8px; align-items: flex-end;
        }
        .preview-chat-input-wrap textarea {
            flex: 1; padding: 12px 16px; border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.04); color: white;
            font-family: inherit; font-size: 0.88rem;
            resize: none; outline: none; min-height: 44px; max-height: 100px;
        }
        .preview-chat-input-wrap textarea::placeholder { color: rgba(255,255,255,0.25); }
        .preview-chat-input-wrap textarea:focus { border-color: var(--ember); }
        .preview-chat-send {
            width: 44px; height: 44px; border-radius: 12px; border: none;
            background: var(--ember); color: white;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.2s; flex-shrink: 0;
        }
        .preview-chat-send:hover { background: var(--ember-light); }
        .preview-chat-send:disabled { opacity: 0.3; cursor: not-allowed; }

        /* Modals */
        .preview-modal-overlay {
            position: fixed; inset: 0; z-index: 10001;
            background: rgba(0,0,0,0.7); backdrop-filter: blur(4px);
            display: none; align-items: center; justify-content: center; padding: 24px;
        }
        .preview-modal-overlay.active { display: flex; }
        .preview-modal {
            background: var(--ink-soft); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px; padding: 36px; width: 100%; max-width: 440px;
        }
        .preview-modal h3 {
            font-family: 'Instrument Serif', serif;
            font-size: 1.5rem; color: white; margin-bottom: 8px;
        }
        .preview-modal p { color: rgba(255,255,255,0.5); font-size: 0.9rem; margin-bottom: 24px; line-height: 1.6; }
        .preview-modal .form-group { margin-bottom: 14px; }
        .preview-modal .form-label { display: block; font-size: 0.78rem; font-weight: 600; color: rgba(255,255,255,0.5); margin-bottom: 6px; }
        .preview-modal .form-input {
            width: 100%; padding: 13px 16px;
            border: 1px solid rgba(255,255,255,0.1); border-radius: var(--radius-xs);
            background: rgba(255,255,255,0.04); color: white;
            font-family: inherit; font-size: 0.92rem; outline: none;
        }
        .preview-modal .form-input:focus { border-color: var(--ember); box-shadow: 0 0 0 3px rgba(232,97,58,0.15); }
        .preview-modal .form-input::placeholder { color: rgba(255,255,255,0.2); }
        .preview-modal-submit {
            width: 100%; padding: 16px; border-radius: 12px; border: none;
            background: linear-gradient(135deg, var(--ember), var(--amber));
            color: white; font-family: inherit; font-weight: 700; font-size: 1rem;
            cursor: pointer; transition: all 0.3s; margin-top: 8px;
        }
        .preview-modal-submit:hover { transform: translateY(-2px); box-shadow: var(--shadow-glow); }
        .preview-modal-skip {
            display: block; text-align: center; margin-top: 12px;
            color: rgba(255,255,255,0.3); font-size: 0.82rem; cursor: pointer;
            background: none; border: none; font-family: inherit;
        }
        .preview-modal-skip:hover { color: rgba(255,255,255,0.5); }

        @media (max-width: 768px) {
            .preview-screen { grid-template-columns: 1fr; grid-template-rows: 1fr auto; }
            .preview-left { border-right: none; }
            .preview-right {
                position: fixed; bottom: 0; left: 0; right: 0;
                height: 50vh; border-top: 1px solid rgba(255,255,255,0.1);
                z-index: 10000; transform: translateY(calc(100% - 56px)); transition: transform 0.35s cubic-bezier(0.16, 1, 0.3, 1);
            }
            .preview-right.expanded { transform: translateY(0); }
            .preview-chat-header { cursor: pointer; }
            .preview-device-frame { width: 100%; border-radius: 0; padding: 0; max-height: none; }
            .preview-device-frame iframe { border-radius: 0; }
            .preview-device-btns { display: none; }
            .preview-iframe-wrap { padding: 0; }
        }

        /* ════════════ SECTIONS ════════════ */
        .section { padding: 100px 24px; }
        .container { max-width: 1140px; margin: 0 auto; }
        .section-eyebrow {
            font-size: 0.72rem; font-weight: 700; letter-spacing: 0.1em;
            text-transform: uppercase; color: var(--ember);
            margin-bottom: 12px;
        }
        .section-heading {
            font-family: 'Instrument Serif', serif;
            font-size: clamp(1.8rem, 3.5vw, 2.8rem);
            line-height: 1.15; letter-spacing: -0.02em;
            margin-bottom: 16px;
        }
        .section-desc {
            font-size: 1.05rem; color: var(--text-mid); line-height: 1.7;
            max-width: 520px;
        }
        .section-header-center { text-align: center; }
        .section-header-center .section-desc { margin: 0 auto; }

        /* Scroll Reveal */
        .reveal {
            opacity: 0; transform: translateY(28px);
            transition: opacity 0.7s cubic-bezier(0.16, 1, 0.3, 1), transform 0.7s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal.vis { opacity: 1; transform: none; }
        .reveal-d1 { transition-delay: 0.08s; }
        .reveal-d2 { transition-delay: 0.16s; }
        .reveal-d3 { transition-delay: 0.24s; }
        .reveal-d4 { transition-delay: 0.32s; }

        /* ════════════ FEATURES ════════════ */
        .features-grid {
            display: grid; grid-template-columns: repeat(4, 1fr);
            gap: 1px; margin-top: 48px;
            background: var(--border); border-radius: var(--radius);
            overflow: hidden; box-shadow: var(--shadow-soft);
        }
        .feat {
            background: white; padding: 36px 28px;
            transition: all 0.35s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
        }
        .feat:hover { background: var(--cream); }
        .feat:hover .feat-icon { transform: scale(1.1) rotate(-3deg); }
        .feat-icon {
            width: 48px; height: 48px; border-radius: 14px;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 18px; transition: transform 0.35s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .feat h3 { font-size: 1rem; font-weight: 700; margin-bottom: 8px; letter-spacing: -0.01em; }
        .feat p { font-size: 0.88rem; color: var(--text-mid); line-height: 1.6; }

        @media (max-width: 900px) { .features-grid { grid-template-columns: 1fr 1fr; } }
        @media (max-width: 540px) { .features-grid { grid-template-columns: 1fr; } }

        /* ════════════ HOW IT WORKS ════════════ */
        .how-section {
            background: var(--ink); color: white;
            padding: 100px 24px; position: relative; overflow: hidden;
        }
        .how-section .section-eyebrow { color: var(--ember-light); }
        .how-section .section-desc { color: rgba(255,255,255,0.5); }
        .how-grid {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 24px; margin-top: 56px;
        }
        .how-card {
            background: rgba(255,255,255,0.04); border: 1px solid var(--border-light);
            border-radius: 18px; padding: 36px 28px;
            transition: all 0.35s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
        }
        .how-card:hover { background: rgba(255,255,255,0.07); border-color: rgba(255,255,255,0.15); transform: translateY(-4px); }
        .how-num {
            font-family: 'Instrument Serif', serif;
            font-size: 3.5rem; font-weight: 400; line-height: 1;
            margin-bottom: 16px; opacity: 0.15;
        }
        .how-card h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 8px; }
        .how-card p { font-size: 0.9rem; color: rgba(255,255,255,0.5); line-height: 1.6; }
        .how-card:nth-child(1) .how-num { color: var(--ember); opacity: 0.4; }
        .how-card:nth-child(2) .how-num { color: var(--amber); opacity: 0.4; }
        .how-card:nth-child(3) .how-num { color: var(--sage); opacity: 0.4; }
        .how-glow {
            position: absolute; width: 400px; height: 400px; border-radius: 50%;
            background: radial-gradient(circle, rgba(232,97,58,0.08), transparent 70%);
            top: -100px; right: -100px; pointer-events: none;
        }
        @media (max-width: 768px) { .how-grid { grid-template-columns: 1fr; } }

        /* ════════════ SHOWCASE ════════════ */
        .showcase-grid {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 20px; margin-top: 48px;
        }
        .showcase-card {
            border-radius: 18px; overflow: hidden;
            border: 1px solid var(--border);
            background: white; transition: all 0.35s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .showcase-card:hover { transform: translateY(-6px); box-shadow: var(--shadow-heavy); }
        .showcase-preview {
            height: 200px; padding: 16px; position: relative; overflow: hidden;
        }
        .showcase-mini {
            width: 100%; height: 100%; border-radius: 8px;
            border: 1px solid rgba(0,0,0,0.06); overflow: hidden;
            font-size: 0.55rem; font-family: 'SF Mono', monospace;
        }
        .showcase-info { padding: 20px 24px; }
        .showcase-type { font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 6px; }
        .showcase-info h3 { font-size: 1rem; font-weight: 700; letter-spacing: -0.01em; margin-bottom: 4px; }
        .showcase-info p { font-size: 0.82rem; color: var(--text-mid); }
        @media (max-width: 768px) { .showcase-grid { grid-template-columns: 1fr; max-width: 400px; margin-left: auto; margin-right: auto; } }

        /* Mini dashboard previews */
        .mini-dash { background: #0f0f0f; height: 100%; padding: 10px; display: flex; flex-direction: column; gap: 6px; }
        .mini-row { display: flex; gap: 5px; }
        .mini-box { border-radius: 5px; padding: 6px 8px; }
        .mini-stat-row { display: flex; gap: 5px; }
        .mini-stat { flex: 1; background: rgba(255,255,255,0.04); border-radius: 5px; padding: 6px 8px; border: 1px solid rgba(255,255,255,0.06); }
        .mini-stat-v { font-size: 0.7rem; font-weight: 700; }
        .mini-stat-l { font-size: 0.45rem; color: #555; }
        .mini-table { flex: 1; background: rgba(255,255,255,0.03); border-radius: 5px; padding: 6px; border: 1px solid rgba(255,255,255,0.06); }
        .mini-tr { display: flex; justify-content: space-between; padding: 3px 4px; border-bottom: 1px solid rgba(255,255,255,0.04); }
        .mini-tr:last-child { border-bottom: none; }
        .mini-td { font-size: 0.45rem; color: #777; }
        .mini-td:first-child { color: #aaa; font-weight: 600; }

        /* ════════════ CASE STUDY ════════════ */
        .case-section { background: var(--cream-dark); }
        .case-card {
            margin-top: 48px;
            display: grid; grid-template-columns: 1fr 1fr;
            background: white; border-radius: var(--radius);
            overflow: hidden; box-shadow: var(--shadow-med);
        }
        .case-visual {
            background: var(--ink); padding: 0;
            display: flex; flex-direction: column; justify-content: flex-end; align-items: center;
            position: relative; overflow: hidden; min-height: 380px;
        }
        .case-visual img.case-hero-img {
            position: absolute; inset: 0; width: 100%; height: 100%;
            object-fit: cover; object-position: center 30%;
        }
        .case-visual::before {
            content: ''; position: absolute; inset: 0; z-index: 1;
            background: linear-gradient(to top, rgba(15,15,15,0.95) 0%, rgba(15,15,15,0.5) 40%, rgba(15,15,15,0.1) 100%);
        }
        .case-logo {
            font-family: 'Instrument Serif', serif;
            font-size: 2.8rem; color: white; position: relative; z-index: 2;
            letter-spacing: -0.03em;
        }
        .case-logo-sub { font-size: 0.78rem; color: #999; letter-spacing: 0.12em; text-transform: uppercase; font-weight: 600; position: relative; z-index: 2; margin-top: 4px; }
        .case-tags { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 20px; margin-bottom: 32px; justify-content: center; position: relative; z-index: 2; }
        .case-tag {
            padding: 5px 14px; border-radius: 100px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08);
            font-size: 0.7rem; font-weight: 600; color: #888;
        }
        .case-content { padding: 56px 48px; display: flex; flex-direction: column; justify-content: center; }
        .case-quote {
            font-family: 'Instrument Serif', serif;
            font-size: 1.5rem; line-height: 1.4; margin-bottom: 20px;
            color: var(--text); letter-spacing: -0.01em;
        }
        .case-quote::before { content: '\201C'; color: var(--ember); }
        .case-desc { font-size: 0.92rem; color: var(--text-mid); line-height: 1.7; margin-bottom: 28px; }
        .case-metrics { display: flex; gap: 36px; }
        .case-metric-val {
            font-size: 1.8rem; font-weight: 700; letter-spacing: -0.02em;
            background: linear-gradient(135deg, var(--ember), var(--amber));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }
        .case-metric-label { font-size: 0.68rem; color: var(--text-soft); font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; margin-top: 2px; }
        @media (max-width: 768px) {
            .case-card { grid-template-columns: 1fr; }
            .case-visual { padding: 40px 32px; min-height: 200px; }
            .case-content { padding: 36px 28px; }
            .case-metrics { flex-direction: column; gap: 16px; }
        }

        /* ════════════ PRICING ════════════ */
        .pricing-grid {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 20px; margin-top: 48px;
        }
        .price-card {
            background: white; border: 1px solid var(--border);
            border-radius: 18px; padding: 36px 28px;
            transition: all 0.35s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
        }
        .price-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-heavy); }
        .price-card.pop {
            border-color: var(--ember);
            box-shadow: 0 0 0 1px var(--ember), var(--shadow-med);
        }
        .price-card.pop::before {
            content: 'Most Popular';
            position: absolute; top: -11px; left: 50%; transform: translateX(-50%);
            padding: 4px 18px; border-radius: 100px;
            background: linear-gradient(135deg, var(--ember), var(--amber));
            color: white; font-size: 0.68rem; font-weight: 700; letter-spacing: 0.03em;
        }
        .price-free {
            display: inline-block; padding: 4px 12px; border-radius: 6px;
            background: var(--sage-soft); color: var(--sage);
            font-size: 0.7rem; font-weight: 700; margin-bottom: 16px;
        }
        .price-tier { font-size: 0.8rem; font-weight: 700; color: var(--text-soft); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 10px; }
        .price-amount {
            font-family: 'Instrument Serif', serif;
            font-size: 3rem; letter-spacing: -0.03em; line-height: 1; margin-bottom: 4px;
        }
        .price-period { font-size: 0.85rem; color: var(--text-soft); margin-bottom: 28px; }
        .price-list { list-style: none; margin-bottom: 28px; }
        .price-list li {
            padding: 8px 0; font-size: 0.88rem; color: var(--text-mid);
            display: flex; align-items: center; gap: 10px;
        }
        .price-check {
            width: 18px; height: 18px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
        }
        .price-check svg { width: 10px; height: 10px; }
        .price-btn {
            width: 100%; padding: 14px; border-radius: 12px; border: none;
            font-family: inherit; font-weight: 600; font-size: 0.92rem;
            cursor: pointer; transition: all 0.3s; text-decoration: none;
            display: block; text-align: center;
        }
        .price-btn-fill { background: var(--ink); color: white; }
        .price-btn-fill:hover { background: var(--ember); box-shadow: var(--shadow-glow); }
        .price-btn-line { background: transparent; border: 1.5px solid var(--border); color: var(--text); }
        .price-btn-line:hover { border-color: var(--ink); }
        .pricing-note {
            text-align: center; margin-top: 28px;
            font-size: 0.88rem; color: var(--text-soft); font-weight: 500;
        }
        @media (max-width: 768px) { .pricing-grid { grid-template-columns: 1fr; max-width: 380px; margin-left: auto; margin-right: auto; } }

        /* ════════════ FORM ════════════ */
        .form-section {
            background: var(--ink); color: white;
            padding: 100px 24px; position: relative; overflow: hidden;
        }
        .form-glow {
            position: absolute; width: 500px; height: 500px; border-radius: 50%;
            background: radial-gradient(circle, rgba(232,97,58,0.1), transparent 70%);
            bottom: -150px; left: -100px; pointer-events: none;
        }
        .form-card {
            position: relative; z-index: 1;
            max-width: 600px; margin: 0 auto;
            background: rgba(255,255,255,0.04); border: 1px solid var(--border-light);
            border-radius: var(--radius); padding: 48px;
            backdrop-filter: blur(20px);
        }
        .form-card .section-heading { color: white; text-align: center; }
        .form-card .section-desc { color: rgba(255,255,255,0.5); text-align: center; margin: 0 auto 36px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin-bottom: 14px; }
        .form-group { margin-bottom: 14px; }
        .form-label { display: block; font-size: 0.78rem; font-weight: 600; color: rgba(255,255,255,0.5); margin-bottom: 6px; }
        .form-label .opt { font-weight: 400; color: rgba(255,255,255,0.25); }
        .form-input, .form-select, .form-textarea {
            width: 100%; padding: 13px 16px;
            border: 1px solid rgba(255,255,255,0.1); border-radius: var(--radius-xs);
            background: rgba(255,255,255,0.04); color: white;
            font-family: inherit; font-size: 0.92rem;
            transition: border-color 0.25s, box-shadow 0.25s, background 0.25s;
            outline: none;
        }
        .form-input::placeholder, .form-textarea::placeholder { color: rgba(255,255,255,0.2); }
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: var(--ember); background: rgba(255,255,255,0.06);
            box-shadow: 0 0 0 3px rgba(232,97,58,0.15);
        }
        .form-select {
            cursor: pointer; appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23666' stroke-width='2' fill='none'/%3E%3C/svg%3E");
            background-repeat: no-repeat; background-position: right 16px center;
            padding-right: 40px;
        }
        .form-select option { background: var(--ink); color: white; }
        .form-textarea { resize: vertical; min-height: 90px; }
        .form-submit {
            width: 100%; padding: 16px; border-radius: 12px; border: none;
            background: linear-gradient(135deg, var(--ember), var(--amber));
            color: white; font-family: inherit; font-weight: 700; font-size: 1rem;
            cursor: pointer; transition: all 0.3s; margin-top: 8px;
            letter-spacing: 0.01em;
        }
        .form-submit:hover { transform: translateY(-2px); box-shadow: var(--shadow-glow); }
        .form-submit:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .form-success { display: none; text-align: center; padding: 40px 20px; }
        .form-success.show { display: block; }
        .form-success-check {
            width: 64px; height: 64px; border-radius: 50%; margin: 0 auto 20px;
            background: var(--sage-soft); display: flex; align-items: center; justify-content: center;
        }
        .form-success h3 { font-family: 'Instrument Serif', serif; font-size: 1.6rem; margin-bottom: 8px; color: white; }
        .form-success p { color: rgba(255,255,255,0.5); }
        .form-error {
            display: none; padding: 12px 16px; border-radius: var(--radius-xs);
            background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.2);
            color: #f87171; font-size: 0.85rem; font-weight: 600; margin-bottom: 14px;
        }
        .form-error.show { display: block; }
        @media (max-width: 600px) {
            .form-row { grid-template-columns: 1fr; }
            .form-card { padding: 32px 24px; }
        }

        /* ════════════ FOOTER ════════════ */
        .footer {
            text-align: center; padding: 40px 24px;
            background: var(--ink); color: rgba(255,255,255,0.3);
            font-size: 0.82rem; border-top: 1px solid var(--border-light);
        }
        .footer strong { color: rgba(255,255,255,0.6); }

        /* ════════════ MOBILE GLOBAL ════════════ */
        @media (max-width: 480px) {
            .hero h1 { font-size: 2.2rem; }
            .section { padding: 70px 20px; }
        }
    </style>
</head>
<body>

<nav class="nav" id="nav">
    <div class="nav-inner">
        <div class="nav-brand">
            <div class="nav-mark">S</div>
            SUITE Clients
        </div>
        <div class="nav-links">
            <a href="#features">Services</a>
            <a href="#showcase">Work</a>
            <a href="#pricing">Pricing</a>
        </div>
        <button class="nav-hamburger" id="navHamburger" aria-label="Toggle menu">
            <svg class="icon-menu" fill="none" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            <svg class="icon-close" fill="none" viewBox="0 0 24 24"><path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
        <a href="#previewForm" class="nav-cta" onclick="document.getElementById('businessDesc').focus();return false;">Try It Free</a>
    </div>
</nav>

<!-- ════════ HERO ════════ -->
<section class="hero">
    <div class="hero-bg">
        <div class="hero-orb hero-orb-1"></div>
        <div class="hero-orb hero-orb-2"></div>
        <div class="hero-orb hero-orb-3"></div>
        <div class="hero-grid"></div>
    </div>
    <div class="hero-content">
        <div class="hero-text">
            <div class="hero-pill">
                <span class="hero-pill-dot"></span>
                See it before you commit
            </div>
            <h1>Describe your business.<br><em>Get a website in seconds.</em></h1>
            <p class="hero-sub">Describe your business, explain a problem, or just tell us what you need — we'll build it.</p>
            <div class="hero-preview-input">
                <form class="preview-form" id="previewForm">
                    <textarea id="businessDesc" placeholder="e.g. &quot;barbershop in Calgary, online booking&quot; or &quot;I run a small bakery and I'm losing customers because I have no website and don't know where to start...&quot;" maxlength="1000" rows="2" required></textarea>
                    <button type="submit" id="previewBtn">Generate Preview</button>
                </form>
                <p class="preview-hint">Free preview, no signup required</p>
                <div class="preview-examples">
                    <span class="preview-example" data-desc="Italian restaurant in Toronto, family-owned, dinner reservations">Restaurant</span>
                    <span class="preview-example" data-desc="freelance photographer in Vancouver, weddings and portraits">Photographer</span>
                    <span class="preview-example" data-desc="CrossFit gym in Calgary, group classes, personal training">Gym</span>
                    <span class="preview-example" data-desc="plumbing company in Edmonton, emergency repairs, residential">Plumber</span>
                </div>
            </div>
        </div>
        <!-- Inline Preview Card -->
        <div class="inline-preview" id="inlinePreview">
            <div class="inline-preview-browser">
                <div class="inline-preview-bar">
                    <span class="mockup-dot"></span>
                    <span class="mockup-dot"></span>
                    <span class="mockup-dot"></span>
                    <span class="inline-preview-url" id="inlinePreviewUrl">suitegpt.app/s/your-site</span>
                </div>
                <div class="inline-preview-body" id="inlinePreviewBody">
                    <div class="inline-preview-progress" id="inlineProgress"></div>
                    <iframe id="inlinePreviewIframe" sandbox="allow-scripts"></iframe>
                    <div class="inline-preview-loading" id="inlinePreviewLoading">
                        <div class="preview-loading-spinner"></div>
                        <h3>Building your website<span class="preview-loading-dots"></span></h3>
                        <p id="inlineLoadingHint">Analyzing your business</p>
                    </div>
                </div>
            </div>
            <div class="inline-preview-actions" id="inlinePreviewActions" style="display:none;">
                <button class="btn-main" id="inlinePublishBtn">
                    Get this site
                    <svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </button>
            </div>
            <div class="inline-feedback" id="inlineFeedback" style="display:none;">
                <div class="inline-feedback-question">Want any changes?</div>
                <div class="inline-feedback-chips" id="feedbackChips">
                    <button class="inline-feedback-chip" data-feedback="Different colors">Different colors</button>
                    <button class="inline-feedback-chip" data-feedback="Make it simpler and cleaner">Simpler</button>
                    <button class="inline-feedback-chip" data-feedback="Make it look more professional and corporate">More professional</button>
                    <button class="inline-feedback-chip" data-feedback="Add more sections and content">More content</button>
                    <button class="inline-feedback-chip" data-feedback="Make it more modern and bold">Bolder design</button>
                    <button class="inline-feedback-chip" data-feedback="Change the layout completely">New layout</button>
                </div>
                <div class="color-preset-row" id="colorPresetRow" style="display:none;">
                    <span class="color-preset-label">Quick palette:</span>
                    <button class="color-dot" data-preset="warm" title="Warm" style="background:linear-gradient(135deg,#e8613a,#e8a44a)"></button>
                    <button class="color-dot" data-preset="cool" title="Cool" style="background:linear-gradient(135deg,#3b82f6,#06b6d4)"></button>
                    <button class="color-dot" data-preset="dark" title="Dark" style="background:linear-gradient(135deg,#a78bfa,#f472b6)"></button>
                    <button class="color-dot" data-preset="forest" title="Forest" style="background:linear-gradient(135deg,#22c55e,#a3e635)"></button>
                    <button class="color-dot" data-preset="pastel" title="Pastel" style="background:linear-gradient(135deg,#c4b5fd,#f9a8d4)"></button>
                    <button class="color-dot" data-preset="earth" title="Earth" style="background:linear-gradient(135deg,#b45309,#65a30d)"></button>
                    <button class="color-dot" data-preset="ocean" title="Ocean" style="background:linear-gradient(135deg,#0891b2,#2dd4bf)"></button>
                    <button class="color-dot" data-preset="rose" title="Rose" style="background:linear-gradient(135deg,#e11d48,#f472b6)"></button>
                </div>
                <div class="inline-feedback-input">
                    <input type="text" id="feedbackInput" placeholder="Or type what you'd change..." maxlength="300">
                    <button id="feedbackSendBtn">Send</button>
                </div>
                <div class="inline-feedback-status" id="feedbackStatus"></div>
            </div>
        </div>
    </div>
</section>

<!-- ════════ LOADING OVERLAY (legacy, hidden) ════════ -->
<div class="preview-loading" id="previewLoading">
    <div class="preview-loading-spinner"></div>
    <h3 id="loadingTitle">Building your website<span class="preview-loading-dots"></span></h3>
    <p id="loadingHint">Analyzing your business</p>
</div>

<!-- ════════ FULL-SCREEN PREVIEW ════════ -->
<div class="preview-screen" id="previewScreen">
    <div class="preview-left">
        <div class="preview-toolbar">
            <button class="preview-back" id="previewBack">&#8592; Back</button>
            <div class="preview-toolbar-title" id="previewTitle">Preview</div>
            <div class="preview-device-btns">
                <button class="preview-device-btn active" data-device="mobile">Mobile</button>
                <button class="preview-device-btn" data-device="tablet">Tablet</button>
                <button class="preview-device-btn" data-device="desktop">Desktop</button>
            </div>
        </div>
        <div class="preview-iframe-wrap">
            <div class="preview-device-frame" id="previewFrame">
                <iframe id="previewIframe" sandbox="allow-scripts"></iframe>
                <div class="preview-iframe-loading" id="previewIframeLoading">
                    <div class="preview-loading-spinner"></div>
                </div>
            </div>
        </div>
        <div class="preview-bottom-bar">
            <button class="btn-main" id="publishBtn">Publish Site <svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
            <button class="btn-ghost" id="downloadHtmlBtn">Download HTML</button>
        </div>
    </div>
    <div class="preview-right" id="previewChatPanel">
        <div class="preview-chat-header" id="previewChatToggle">
            <h4>Refine Your Site</h4>
            <div class="preview-chat-counter" id="refinementCounter">2 free refinements remaining</div>
        </div>
        <div class="preview-chat-messages" id="previewChatMessages"></div>
        <div class="preview-chat-input-wrap">
            <textarea id="previewChatInput" placeholder="e.g. make the colors warmer, add a pricing section..." rows="1"></textarea>
            <button class="preview-chat-send" id="sendRefinement">
                <svg width="18" height="18" fill="none" viewBox="0 0 18 18"><path d="M3 9h12M11 5l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
        </div>
    </div>
</div>

<!-- ════════ EMAIL CAPTURE MODAL ════════ -->
<div class="preview-modal-overlay" id="emailModal">
    <div class="preview-modal">
        <h3>Save your progress</h3>
        <p>Enter your email to keep refining. We'll save your site so you can come back anytime.</p>
        <form id="emailCaptureForm">
            <div class="form-group">
                <label class="form-label">Email</label>
                <input class="form-input" type="email" id="captureEmail" placeholder="you@business.com" required>
            </div>
            <button type="submit" class="preview-modal-submit">Continue Refining</button>
        </form>
        <button class="preview-modal-skip" id="emailModalSkip">Maybe later</button>
    </div>
</div>

<!-- ════════ PUBLISH MODAL ════════ -->
<div class="preview-modal-overlay" id="publishModal">
    <div class="preview-modal">
        <h3>Publish your website</h3>
        <p>Pick a name and your site goes live instantly.</p>
        <form id="publishForm">
            <div class="form-group" id="publishEmailGroup">
                <label class="form-label">Email *</label>
                <input class="form-input" type="email" id="publishEmail" placeholder="you@business.com" required>
            </div>
            <div class="form-group">
                <label class="form-label">Business Name</label>
                <input class="form-input" type="text" id="publishName" placeholder="Jane's Bakery">
            </div>
            <div class="form-group">
                <label class="form-label">Your URL</label>
                <div style="display:flex;align-items:center;gap:6px;">
                    <span style="color:rgba(255,255,255,0.35);font-size:0.85rem;white-space:nowrap;">suitegpt.app/s/</span>
                    <input class="form-input" type="text" id="publishSlug" placeholder="janes-bakery" style="flex:1;" required>
                </div>
                <div id="slugStatus" style="font-size:0.78rem;margin-top:6px;min-height:1.2em;"></div>
            </div>
            <button type="submit" class="preview-modal-submit" id="publishSubmitBtn">Publish</button>
        </form>
        <button class="preview-modal-skip" id="publishModalSkip">Not yet</button>
    </div>
</div>

<!-- ════════ PUBLISH SUCCESS MODAL ════════ -->
<div class="preview-modal-overlay" id="publishSuccessModal">
    <div class="preview-modal" style="text-align:center;">
        <div style="width:64px;height:64px;border-radius:50%;background:rgba(62,168,120,0.12);display:flex;align-items:center;justify-content:center;margin:0 auto 20px;">
            <svg width="28" height="28" fill="none" viewBox="0 0 28 28"><path d="M7 14l5 5L21 9" stroke="#3ea878" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
        <h3>Your site is live!</h3>
        <p id="publishedUrlText" style="font-size:1.05rem;color:var(--ember);margin:12px 0 20px;word-break:break-all;"></p>
        <a id="publishedLink" href="#" target="_blank" class="preview-modal-submit" style="display:inline-block;text-decoration:none;text-align:center;">Visit Your Site</a>
        <button class="preview-modal-skip" id="successModalClose" style="margin-top:12px;">Keep Editing</button>
    </div>
</div>

<!-- ════════ FEATURES ════════ -->
<section class="section" id="features">
    <div class="container">
        <div class="section-eyebrow reveal">What You Get</div>
        <div class="section-heading reveal">A custom dashboard, a dev team,<br>and a chat to run it all</div>
        <p class="section-desc reveal">Describe any problem in plain English. Get a working solution delivered to your dashboard.</p>
        <div class="features-grid">
            <div class="feat reveal">
                <div class="feat-icon" style="background:rgba(232,97,58,0.1);">
                    <svg width="24" height="24" fill="none" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="3" stroke="#e8613a" stroke-width="1.5"/><path d="M3 9h18M9 9v12" stroke="#e8613a" stroke-width="1.5"/></svg>
                </div>
                <h3>Your Own Dashboard</h3>
                <p>A custom control center tailored to your business — orders, bookings, inventory, revenue, all in one place.</p>
            </div>
            <div class="feat reveal reveal-d1">
                <div class="feat-icon" style="background:rgba(232,164,74,0.1);">
                    <svg width="24" height="24" fill="none" viewBox="0 0 24 24"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" stroke="#e8a44a" stroke-width="1.5"/></svg>
                </div>
                <h3>Chat-Based Requests</h3>
                <p>Need a booking page? Inventory tracker? Just describe it in the chat. No technical jargon required.</p>
            </div>
            <div class="feat reveal reveal-d2">
                <div class="feat-icon" style="background:rgba(139,108,193,0.1);">
                    <svg width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="#8b6cc1" stroke-width="1.5"/><path d="M12 6v6l4 2" stroke="#8b6cc1" stroke-width="1.5" stroke-linecap="round"/></svg>
                </div>
                <h3>24-Hour Turnaround</h3>
                <p>AI agents build fast. Most requests are completed and deployed within a single business day.</p>
            </div>
            <div class="feat reveal reveal-d3">
                <div class="feat-icon" style="background:rgba(62,168,120,0.1);">
                    <svg width="24" height="24" fill="none" viewBox="0 0 24 24"><path d="M17 1l4 4-4 4" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 11V9a4 4 0 014-4h14M7 23l-4-4 4-4" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 13v2a4 4 0 01-4 4H3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <h3>Unlimited Changes</h3>
                <p>Don't like something? Want a new feature? Request changes anytime — that's the whole point.</p>
            </div>
        </div>
    </div>
</section>

<!-- ════════ HOW IT WORKS ════════ -->
<section class="how-section" id="how">
    <div class="how-glow"></div>
    <div class="container" style="position:relative;z-index:1;">
        <div class="section-header-center">
            <div class="section-eyebrow reveal">How It Works</div>
            <div class="section-heading reveal" style="color:white;">Three steps. Zero risk.</div>
            <p class="section-desc reveal">From signup to a fully working solution — most requests delivered within 24 hours.</p>
        </div>
        <div class="how-grid">
            <div class="how-card reveal">
                <div class="how-num">01</div>
                <h3>Describe your business</h3>
                <p>Fill out a quick form. We set up your free dashboard and get you access to the request chat.</p>
            </div>
            <div class="how-card reveal reveal-d1">
                <div class="how-num">02</div>
                <h3>Chat your requests</h3>
                <p>Need a booking page? Inventory tracker? Just describe it. Get a working solution within 24 hours.</p>
            </div>
            <div class="how-card reveal reveal-d2">
                <div class="how-num">03</div>
                <h3>Love it? Subscribe.</h3>
                <p>After 30 days free, keep everything running from $50/mo. Request changes anytime.</p>
            </div>
        </div>
    </div>
</section>

<!-- ════════ SHOWCASE ════════ -->
<section class="section" id="showcase">
    <div class="container">
        <div class="section-header-center">
            <div class="section-eyebrow reveal">Examples</div>
            <div class="section-heading reveal">Built for businesses like yours</div>
            <p class="section-desc reveal">Every project is custom. Here's a taste of what we build.</p>
        </div>
        <div class="showcase-grid">
            <!-- CARD 1: Plumber — Kanban dispatch board with sidebar -->
            <div class="showcase-card reveal">
                <div class="showcase-preview" style="background:#0b1926;">
                    <div class="showcase-mini" style="border-color:rgba(59,130,246,0.12);">
                        <div style="display:flex;height:100%;">
                            <div style="width:26%;background:rgba(59,130,246,0.05);border-right:1px solid rgba(59,130,246,0.1);padding:8px 5px;display:flex;flex-direction:column;gap:2px;">
                                <div style="font-size:0.38rem;font-weight:800;color:#3b82f6;padding:2px 4px;letter-spacing:0.03em;">CLEARFLOW</div>
                                <div style="font-size:0.32rem;padding:3px 5px;color:#3b82f6;background:rgba(59,130,246,0.1);border-radius:3px;font-weight:600;">Dispatch</div>
                                <div style="font-size:0.32rem;padding:3px 5px;color:#556;">Invoices</div>
                                <div style="font-size:0.32rem;padding:3px 5px;color:#556;">Clients</div>
                                <div style="font-size:0.32rem;padding:3px 5px;color:#556;">Parts</div>
                                <div style="margin-top:auto;padding:4px;background:rgba(34,197,94,0.08);border-radius:3px;text-align:center;">
                                    <div style="font-size:0.5rem;font-weight:700;color:#22c55e;">$3.8k</div>
                                    <div style="font-size:0.25rem;color:#556;">this week</div>
                                </div>
                            </div>
                            <div style="flex:1;padding:6px;display:flex;gap:4px;overflow:hidden;">
                                <div style="flex:1;display:flex;flex-direction:column;gap:3px;">
                                    <div style="font-size:0.3rem;font-weight:700;color:#f59e0b;text-align:center;padding:2px;background:rgba(245,158,11,0.08);border-radius:2px;">QUEUED</div>
                                    <div style="background:rgba(245,158,11,0.06);border:1px solid rgba(245,158,11,0.1);border-radius:3px;padding:4px;">
                                        <div style="font-size:0.3rem;font-weight:700;color:#bbb;">42 Oak St</div>
                                        <div style="font-size:0.25rem;color:#667;">Drain repair</div>
                                        <div style="font-size:0.25rem;color:#f59e0b;margin-top:2px;">9:00 AM</div>
                                    </div>
                                    <div style="background:rgba(245,158,11,0.06);border:1px solid rgba(245,158,11,0.1);border-radius:3px;padding:4px;">
                                        <div style="font-size:0.3rem;font-weight:700;color:#bbb;">7 Maple Dr</div>
                                        <div style="font-size:0.25rem;color:#667;">Water heater</div>
                                        <div style="font-size:0.25rem;color:#f59e0b;margin-top:2px;">2:00 PM</div>
                                    </div>
                                </div>
                                <div style="flex:1;display:flex;flex-direction:column;gap:3px;">
                                    <div style="font-size:0.3rem;font-weight:700;color:#3b82f6;text-align:center;padding:2px;background:rgba(59,130,246,0.08);border-radius:2px;">EN ROUTE</div>
                                    <div style="background:rgba(59,130,246,0.06);border:1px solid rgba(59,130,246,0.1);border-radius:3px;padding:4px;">
                                        <div style="font-size:0.3rem;font-weight:700;color:#bbb;">18 Pine Ave</div>
                                        <div style="font-size:0.25rem;color:#667;">Pipe burst</div>
                                        <div style="font-size:0.25rem;color:#3b82f6;margin-top:2px;">11:30 AM</div>
                                    </div>
                                </div>
                                <div style="flex:1;display:flex;flex-direction:column;gap:3px;">
                                    <div style="font-size:0.3rem;font-weight:700;color:#22c55e;text-align:center;padding:2px;background:rgba(34,197,94,0.08);border-radius:2px;">DONE</div>
                                    <div style="background:rgba(34,197,94,0.06);border:1px solid rgba(34,197,94,0.1);border-radius:3px;padding:4px;">
                                        <div style="font-size:0.3rem;font-weight:700;color:#bbb;">5 Elm Ct</div>
                                        <div style="font-size:0.25rem;color:#667;">Faucet install</div>
                                        <div style="font-size:0.25rem;color:#22c55e;margin-top:2px;">$280</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="showcase-info">
                    <div class="showcase-type" style="color:var(--ember);">Service</div>
                    <h3>Plumber Dispatch Board</h3>
                    <p>Job scheduling, invoicing, route planning</p>
                </div>
            </div>
            <!-- CARD 2: Salon — Time-slot booking calendar -->
            <div class="showcase-card reveal reveal-d1">
                <div class="showcase-preview" style="background:#160a18;">
                    <div class="showcase-mini" style="border-color:rgba(217,70,219,0.12);">
                        <div style="height:100%;padding:7px;display:flex;flex-direction:column;gap:5px;">
                            <div style="display:flex;justify-content:space-between;align-items:center;">
                                <div style="font-size:0.38rem;font-weight:800;color:#d946db;letter-spacing:0.03em;">GLOW STUDIO</div>
                                <div style="display:flex;gap:2px;">
                                    <div style="width:16px;height:16px;border-radius:50%;background:rgba(244,114,182,0.1);border:1px solid rgba(244,114,182,0.2);display:flex;align-items:center;justify-content:center;font-size:0.25rem;color:#f472b6;">&#9664;</div>
                                    <div style="font-size:0.32rem;font-weight:600;color:#ccc;padding:0 4px;line-height:16px;">Feb 1</div>
                                    <div style="width:16px;height:16px;border-radius:50%;background:rgba(244,114,182,0.1);border:1px solid rgba(244,114,182,0.2);display:flex;align-items:center;justify-content:center;font-size:0.25rem;color:#f472b6;">&#9654;</div>
                                </div>
                            </div>
                            <div style="display:flex;gap:3px;">
                                <div style="flex:1;text-align:center;padding:3px;background:rgba(217,70,219,0.08);border-radius:3px;"><div style="font-size:0.5rem;font-weight:800;color:#d946db;">14</div><div style="font-size:0.25rem;color:#667;">booked</div></div>
                                <div style="flex:1;text-align:center;padding:3px;background:rgba(244,114,182,0.08);border-radius:3px;"><div style="font-size:0.5rem;font-weight:800;color:#f472b6;">$1.2k</div><div style="font-size:0.25rem;color:#667;">revenue</div></div>
                                <div style="flex:1;text-align:center;padding:3px;background:rgba(167,139,250,0.08);border-radius:3px;"><div style="font-size:0.5rem;font-weight:800;color:#a78bfa;">2</div><div style="font-size:0.25rem;color:#667;">open</div></div>
                            </div>
                            <div style="flex:1;display:grid;grid-template-columns:32px 1fr;gap:0;">
                                <div style="display:flex;flex-direction:column;border-right:1px solid rgba(255,255,255,0.04);padding-right:3px;">
                                    <div style="font-size:0.26rem;color:#556;padding:4px 0;text-align:right;">10:00</div>
                                    <div style="font-size:0.26rem;color:#556;padding:4px 0;text-align:right;">11:00</div>
                                    <div style="font-size:0.26rem;color:#556;padding:4px 0;text-align:right;">12:00</div>
                                    <div style="font-size:0.26rem;color:#556;padding:4px 0;text-align:right;">1:00</div>
                                    <div style="font-size:0.26rem;color:#556;padding:4px 0;text-align:right;">2:00</div>
                                </div>
                                <div style="display:flex;flex-direction:column;gap:2px;padding-left:4px;">
                                    <div style="background:linear-gradient(90deg,rgba(217,70,219,0.12),rgba(217,70,219,0.04));border-left:2px solid #d946db;border-radius:0 3px 3px 0;padding:3px 5px;"><div style="font-size:0.28rem;font-weight:700;color:#d946db;">Sarah K.</div><div style="font-size:0.24rem;color:#889;">Color + Cut — 90min</div></div>
                                    <div style="background:linear-gradient(90deg,rgba(244,114,182,0.12),rgba(244,114,182,0.04));border-left:2px solid #f472b6;border-radius:0 3px 3px 0;padding:3px 5px;"><div style="font-size:0.28rem;font-weight:700;color:#f472b6;">Maria L.</div><div style="font-size:0.24rem;color:#889;">Balayage — 120min</div></div>
                                    <div style="background:rgba(255,255,255,0.02);border-left:2px solid rgba(255,255,255,0.08);border-radius:0 3px 3px 0;padding:3px 5px;opacity:0.5;"><div style="font-size:0.28rem;font-weight:600;color:#889;">Open slot</div></div>
                                    <div style="background:linear-gradient(90deg,rgba(167,139,250,0.12),rgba(167,139,250,0.04));border-left:2px solid #a78bfa;border-radius:0 3px 3px 0;padding:3px 5px;"><div style="font-size:0.28rem;font-weight:700;color:#a78bfa;">Jess W.</div><div style="font-size:0.24rem;color:#889;">Blowout — 45min</div></div>
                                    <div style="background:linear-gradient(90deg,rgba(244,114,182,0.12),rgba(244,114,182,0.04));border-left:2px solid #f472b6;border-radius:0 3px 3px 0;padding:3px 5px;"><div style="font-size:0.28rem;font-weight:700;color:#f472b6;">Amy T.</div><div style="font-size:0.24rem;color:#889;">Extensions — 150min</div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="showcase-info">
                    <div class="showcase-type" style="color:var(--plum);">Beauty</div>
                    <h3>Salon Booking System</h3>
                    <p>Online booking, client profiles, reminders</p>
                </div>
            </div>
            <!-- CARD 3: Contractor — Progress tracker with bars -->
            <div class="showcase-card reveal reveal-d2">
                <div class="showcase-preview" style="background:#0c1508;">
                    <div class="showcase-mini" style="border-color:rgba(34,197,94,0.12);">
                        <div style="height:100%;padding:7px;display:flex;flex-direction:column;gap:5px;">
                            <div style="display:flex;justify-content:space-between;align-items:center;">
                                <div style="font-size:0.38rem;font-weight:800;color:#22c55e;letter-spacing:0.03em;">RIDGELINE BUILD CO</div>
                                <div style="font-size:0.28rem;color:#22c55e;background:rgba(34,197,94,0.1);padding:2px 6px;border-radius:10px;font-weight:600;">3 active</div>
                            </div>
                            <div style="flex:1;display:flex;flex-direction:column;gap:4px;">
                                <div style="background:rgba(34,197,94,0.04);border:1px solid rgba(34,197,94,0.1);border-radius:4px;padding:6px;">
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:3px;">
                                        <div style="font-size:0.32rem;font-weight:700;color:#ccc;">Elm St Full Renovation</div>
                                        <div style="font-size:0.28rem;font-weight:700;color:#22c55e;">75%</div>
                                    </div>
                                    <div style="height:4px;background:rgba(255,255,255,0.06);border-radius:2px;overflow:hidden;"><div style="width:75%;height:100%;background:linear-gradient(90deg,#22c55e,#4ade80);border-radius:2px;"></div></div>
                                    <div style="display:flex;justify-content:space-between;margin-top:3px;"><div style="font-size:0.25rem;color:#667;">Framing complete</div><div style="font-size:0.25rem;color:#22c55e;">$18,400</div></div>
                                </div>
                                <div style="background:rgba(245,158,11,0.04);border:1px solid rgba(245,158,11,0.1);border-radius:4px;padding:6px;">
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:3px;">
                                        <div style="font-size:0.32rem;font-weight:700;color:#ccc;">Cedar Deck Build</div>
                                        <div style="font-size:0.28rem;font-weight:700;color:#f59e0b;">40%</div>
                                    </div>
                                    <div style="height:4px;background:rgba(255,255,255,0.06);border-radius:2px;overflow:hidden;"><div style="width:40%;height:100%;background:linear-gradient(90deg,#f59e0b,#fbbf24);border-radius:2px;"></div></div>
                                    <div style="display:flex;justify-content:space-between;margin-top:3px;"><div style="font-size:0.25rem;color:#667;">Footings poured</div><div style="font-size:0.25rem;color:#f59e0b;">$6,200</div></div>
                                </div>
                                <div style="background:rgba(59,130,246,0.04);border:1px solid rgba(59,130,246,0.1);border-radius:4px;padding:6px;">
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:3px;">
                                        <div style="font-size:0.32rem;font-weight:700;color:#ccc;">Kitchen Remodel</div>
                                        <div style="font-size:0.28rem;font-weight:700;color:#3b82f6;">10%</div>
                                    </div>
                                    <div style="height:4px;background:rgba(255,255,255,0.06);border-radius:2px;overflow:hidden;"><div style="width:10%;height:100%;background:linear-gradient(90deg,#3b82f6,#60a5fa);border-radius:2px;"></div></div>
                                    <div style="display:flex;justify-content:space-between;margin-top:3px;"><div style="font-size:0.25rem;color:#667;">Demo phase</div><div style="font-size:0.25rem;color:#3b82f6;">$3,800</div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="showcase-info">
                    <div class="showcase-type" style="color:var(--sage);">Construction</div>
                    <h3>Contractor Project Tracker</h3>
                    <p>Estimates, milestones, client portal, invoicing</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ════════ CASE STUDY ════════ -->
<section class="section case-section" id="case-study">
    <div class="container">
        <div class="section-eyebrow reveal">Case Study</div>
        <div class="section-heading reveal">Real project. Real business.</div>
        <div class="case-card reveal">
            <div class="case-visual">
                <img class="case-hero-img" src="/client-landing/proto-golf-hero.jpg" alt="Proto Golf custom putter">
                <div class="case-logo">Proto Golf</div>
                <div class="case-logo-sub">Custom Putters</div>
                <div class="case-tags">
                    <span class="case-tag">E-Commerce</span>
                    <span class="case-tag">Admin Panel</span>
                    <span class="case-tag">Inventory</span>
                    <span class="case-tag">Configurator</span>
                </div>
            </div>
            <div class="case-content">
                <div class="case-quote">From a concept to a fully functional online store with a custom putter configurator — in two weeks.</div>
                <p class="case-desc">Proto Golf needed an e-commerce storefront, a putter variant configurator with finish and shaft options, an admin dashboard for inventory and orders, and a professional brand presence. We built the entire system from scratch.</p>
                <div class="case-metrics">
                    <div>
                        <div class="case-metric-val">6+</div>
                        <div class="case-metric-label">Products Live</div>
                    </div>
                    <div>
                        <div class="case-metric-val">Full</div>
                        <div class="case-metric-label">Admin System</div>
                    </div>
                    <div>
                        <div class="case-metric-val">$0</div>
                        <div class="case-metric-label">Upfront Cost</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ════════ PRICING ════════ -->
<section class="section" id="pricing">
    <div class="container">
        <div class="section-header-center">
            <div class="section-eyebrow reveal">Pricing</div>
            <div class="section-heading reveal">Free to start. Pay for what you need.</div>
            <p class="section-desc reveal">Every plan starts with 30 days free. Pick your tier based on how many requests you need per month.</p>
        </div>
        <div class="pricing-grid">
            <div class="price-card reveal">
                <div class="price-free">30 days free</div>
                <div class="price-tier">Starter</div>
                <div class="price-amount">$50</div>
                <div class="price-period">per month after trial</div>
                <ul class="price-list">
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>4 requests per month</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Custom dashboard for your business</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Chat-based request system</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>24-hour turnaround</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Perfect for maintaining your site</li>
                </ul>
                <a href="#form" class="price-btn price-btn-line">Get Started Free</a>
            </div>
            <div class="price-card pop reveal reveal-d1">
                <div class="price-free">30 days free</div>
                <div class="price-tier">Growth</div>
                <div class="price-amount">$99</div>
                <div class="price-period">per month after trial</div>
                <ul class="price-list">
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>10 requests per month</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Everything in Starter</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Priority turnaround</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Analytics & reporting</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>For businesses actively growing</li>
                </ul>
                <a href="#form" class="price-btn price-btn-fill">Get Started Free</a>
            </div>
            <div class="price-card reveal reveal-d2">
                <div class="price-free">30 days free</div>
                <div class="price-tier">Unlimited</div>
                <div class="price-amount">$199</div>
                <div class="price-period">per month after trial</div>
                <ul class="price-list">
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Unlimited requests</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Everything in Growth</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Fastest turnaround</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Dedicated support channel</li>
                    <li><span class="price-check" style="background:var(--sage-soft);"><svg fill="none" viewBox="0 0 10 10"><path d="M2 5l2.5 2.5L8 3" stroke="#3ea878" stroke-width="1.5" stroke-linecap="round"/></svg></span>Like having a full dev team on call</li>
                </ul>
                <a href="#form" class="price-btn price-btn-line">Get Started Free</a>
            </div>
        </div>
        <p class="pricing-note reveal">Every tier gets the full stack — dashboards, websites, AI features, e-commerce, the works. The only difference is how many requests you can make. Cancel anytime. No contracts.</p>
    </div>
</section>

<!-- ════════ FORM ════════ -->
<section class="form-section" id="form">
    <div class="form-glow"></div>
    <div class="form-card reveal">
        <div class="section-heading">Get your free dashboard</div>
        <p class="section-desc">Tell us about your business. We'll set you up within 24 hours.</p>

        <div id="formError" class="form-error"></div>

        <form id="leadForm" autocomplete="on">
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="name">Your Name *</label>
                    <input class="form-input" type="text" id="name" name="name" required placeholder="Jane Smith" autocomplete="name">
                </div>
                <div class="form-group">
                    <label class="form-label" for="email">Email *</label>
                    <input class="form-input" type="email" id="email" name="email" required placeholder="jane@business.com" autocomplete="email">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="phone">Phone <span class="opt">(optional)</span></label>
                    <input class="form-input" type="tel" id="phone" name="phone" placeholder="(555) 123-4567" autocomplete="tel">
                </div>
                <div class="form-group">
                    <label class="form-label" for="businessName">Business Name</label>
                    <input class="form-input" type="text" id="businessName" name="businessName" placeholder="Jane's Bakery" autocomplete="organization">
                </div>
            </div>
            <div class="form-group">
                <label class="form-label" for="businessType">Type of Business</label>
                <select class="form-select" id="businessType" name="businessType">
                    <option value="">Select your industry...</option>
                    <option value="Restaurant">Restaurant / Food & Beverage</option>
                    <option value="Retail">Retail / Shop</option>
                    <option value="Fitness">Fitness / Gym</option>
                    <option value="Professional Services">Professional Services</option>
                    <option value="Real Estate">Real Estate</option>
                    <option value="E-commerce">E-commerce</option>
                    <option value="Health & Wellness">Health & Wellness</option>
                    <option value="Construction">Construction / Trades</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label" for="whatTheyNeed">What do you need? *</label>
                <textarea class="form-textarea" id="whatTheyNeed" name="whatTheyNeed" required placeholder="Tell us about your business and what kind of app, website, or tool would help you..."></textarea>
            </div>
            <button type="submit" class="form-submit" id="submitBtn">Send My Request</button>
            <p style="text-align:center;margin-top:12px;font-size:0.78rem;color:rgba(255,255,255,0.3);">By submitting, you agree to our <a href="/client-landing/privacy.html" style="color:rgba(255,255,255,0.5);text-decoration:underline;">Privacy Policy</a>.</p>
        </form>

        <div id="formSuccess" class="form-success">
            <div class="form-success-check">
                <svg width="28" height="28" fill="none" viewBox="0 0 28 28"><path d="M7 14l5 5L21 9" stroke="#3ea878" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
            <h3>Request received!</h3>
            <p>We'll review your needs and get back to you within 24 hours.</p>
        </div>
    </div>
</section>

<footer class="footer">
    <p>Powered by <a href="https://suitegpt.app" target="_blank" style="color:rgba(255,255,255,0.6);text-decoration:none;font-weight:700;transition:color .2s">SUITE</a> &mdash; Anyone Can Build. Everyone Gets Paid.</p>
    <p style="margin-top:8px;"><a href="/client-landing/privacy.html" style="color:rgba(255,255,255,0.35);text-decoration:none;font-size:0.78rem;">Privacy Policy</a></p>
</footer>

<script>
(function() {
    // ── Config ──
    var params = new URLSearchParams(window.location.search);
    var refMap = { kijiji: 'kijiji', fb: 'fb-marketplace', linkedin: 'linkedin', ig: 'instagram', reddit: 'reddit' };
    var source = refMap[params.get('ref')] || params.get('ref') || 'direct';
    var adId = params.get('ad') || null;

    var SB_URL = 'https://rdsmdywbdiskxknluiym.supabase.co';
    var SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkc21keXdiZGlza3hrbmx1aXltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3ODk3MTgsImV4cCI6MjA4MzM2NTcxOH0.DcLpWs8Lf1s4Flf54J5LubokSYrd7h-XvI_X0jj6bLM';
    var FREE_REFINEMENTS = 2;
    var EMAIL_REFINEMENTS = 5;

    // ══════════════════════════════════════════════════════
    // ── TEMPLATES & MERGE ENGINE ──
    // ══════════════════════════════════════════════════════

    var ICON_SVG = {
        star: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>',
        check: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>',
        mail: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 4L12 13 2 4"/></svg>',
        phone: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>',
        mappin: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>',
        clock: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',
        grid: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>',
        users: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>',
        zap: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>',
        shield: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>',
        heart: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg>',
        camera: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/><circle cx="12" cy="13" r="4"/></svg>',
        cart: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"/></svg>',
        layout: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>',
        bar: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M18 20V10M12 20V4M6 20v-6"/></svg>',
        calendar: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>',
        dollar: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 1v22M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg>',
        tool: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>'
    };

    var COLOR_PRESETS = {
        warm:   { primary: '#e8613a', primaryLight: '#f0845e', secondary: '#1a1a1a', bg: '#fefefe', text: '#1a1a1a', textSoft: '#666', accent: '#e8a44a' },
        cool:   { primary: '#3b82f6', primaryLight: '#60a5fa', secondary: '#0f172a', bg: '#f8fafc', text: '#0f172a', textSoft: '#64748b', accent: '#06b6d4' },
        dark:   { primary: '#a78bfa', primaryLight: '#c4b5fd', secondary: '#0f0f0f', bg: '#111111', text: '#f1f1f1', textSoft: '#999', accent: '#f472b6' },
        forest: { primary: '#22c55e', primaryLight: '#4ade80', secondary: '#14532d', bg: '#f0fdf4', text: '#14532d', textSoft: '#4d7c5f', accent: '#a3e635' },
        pastel: { primary: '#a78bfa', primaryLight: '#c4b5fd', secondary: '#2e1065', bg: '#faf5ff', text: '#2e1065', textSoft: '#7c6b9e', accent: '#f9a8d4' },
        earth:  { primary: '#b45309', primaryLight: '#d97706', secondary: '#292524', bg: '#faf7f2', text: '#292524', textSoft: '#78716c', accent: '#65a30d' },
        ocean:  { primary: '#0891b2', primaryLight: '#22d3ee', secondary: '#164e63', bg: '#f0fdfa', text: '#134e4a', textSoft: '#5f8a8b', accent: '#2dd4bf' },
        rose:   { primary: '#e11d48', primaryLight: '#fb7185', secondary: '#1c1917', bg: '#fff1f2', text: '#1c1917', textSoft: '#78716c', accent: '#f472b6' }
    };

    var TEMPLATES = {};

    // ── LANDING TEMPLATE ──
    TEMPLATES.landing = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{businessName}}</title>
<link href="https://fonts.googleapis.com/css2?family={{fontFamily}}&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--primary:{{primaryColor}};--primary-light:{{primaryLight}};--secondary:{{secondaryColor}};--bg:{{bgColor}};--text:{{textColor}};--text-soft:{{textSoft}};--accent:{{accentColor}}}
html{scroll-behavior:smooth}
body{font-family:'{{fontName}}', -apple-system, system-ui, sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased}
a{color:var(--primary);text-decoration:none}
.nav{position:fixed;top:0;width:100%;z-index:100;padding:16px 24px;background:rgba(255,255,255,0.85);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid rgba(0,0,0,0.06);transition:all 0.3s}
.nav-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
.nav-brand{font-weight:800;font-size:1.1rem;color:var(--text);letter-spacing:-0.02em}
.nav-links{display:flex;gap:28px;list-style:none}
.nav-links a{color:var(--text-soft);font-size:0.88rem;font-weight:500;transition:color 0.2s}
.nav-links a:hover{color:var(--primary)}
.nav-cta{padding:10px 22px;background:var(--primary);color:#fff;border-radius:10px;font-weight:600;font-size:0.85rem;transition:all 0.3s}
.nav-cta:hover{background:var(--primary-light);transform:translateY(-1px)}
.hamburger{display:none;background:none;border:none;cursor:pointer;padding:4px}
.hamburger svg{width:24px;height:24px;stroke:var(--text);stroke-width:2}
@media(max-width:768px){
.nav-links,.nav-cta{display:none}
.hamburger{display:block}
.nav-links.open{display:flex;flex-direction:column;position:absolute;top:100%;left:0;right:0;background:white;padding:20px 24px;box-shadow:0 8px 24px rgba(0,0,0,0.08);gap:16px}
.nav-links.open+.nav-cta{display:inline-block;margin:0 24px 20px}
}
.hero{padding:140px 24px 80px;text-align:center;position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 80% 60% at 50% 20%,rgba(var(--primary-rgb,232,97,58),0.06),transparent);pointer-events:none}
.hero h1{font-size:3.2rem;font-weight:800;letter-spacing:-0.03em;line-height:1.15;margin-bottom:20px;max-width:720px;margin-left:auto;margin-right:auto}
.hero p{font-size:1.15rem;color:var(--text-soft);max-width:560px;margin:0 auto 36px;line-height:1.7}
.cta-btn{display:inline-block;padding:16px 36px;background:var(--primary);color:#fff;border-radius:14px;font-weight:700;font-size:1rem;transition:all 0.3s;box-shadow:0 4px 16px rgba(var(--primary-rgb,232,97,58),0.3)}
.cta-btn:hover{background:var(--primary-light);transform:translateY(-2px);box-shadow:0 8px 24px rgba(var(--primary-rgb,232,97,58),0.35)}
.section{padding:80px 24px}
.section-inner{max-width:1100px;margin:0 auto}
.section-label{text-transform:uppercase;font-size:0.75rem;font-weight:700;letter-spacing:0.1em;color:var(--primary);margin-bottom:12px}
.section h2{font-size:2rem;font-weight:800;letter-spacing:-0.02em;margin-bottom:16px}
.section .desc{color:var(--text-soft);max-width:560px;margin-bottom:48px;font-size:1.02rem}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:24px}
@media(max-width:768px){.grid-3{grid-template-columns:1fr}.hero h1{font-size:2.2rem}.section{padding:60px 20px}}
.card{background:white;border-radius:16px;padding:32px;border:1px solid rgba(0,0,0,0.06);transition:all 0.3s}
.card:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(0,0,0,0.08)}
.card-icon{width:48px;height:48px;border-radius:14px;background:rgba(var(--primary-rgb,232,97,58),0.08);display:flex;align-items:center;justify-content:center;margin-bottom:18px;color:var(--primary)}
.card-icon svg{width:22px;height:22px}
.card h3{font-size:1.05rem;font-weight:700;margin-bottom:8px}
.card p{font-size:0.9rem;color:var(--text-soft);line-height:1.65}
.about-section{background:var(--secondary);color:#fff;border-radius:24px;max-width:1100px;margin:0 auto;padding:64px 48px}
.about-section h2{color:#fff}
.about-section .desc{color:rgba(255,255,255,0.7)}
.testimonials{text-align:center}
.testimonial-card{background:white;border-radius:16px;padding:28px;border:1px solid rgba(0,0,0,0.06)}
.testimonial-card blockquote{font-size:1rem;font-style:italic;color:var(--text);margin-bottom:16px;line-height:1.7}
.testimonial-card cite{font-size:0.85rem;color:var(--text-soft);font-style:normal;font-weight:600}
.contact-section{text-align:center}
.contact-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;max-width:700px;margin:0 auto 40px}
@media(max-width:600px){.contact-grid{grid-template-columns:1fr}}
.contact-item{display:flex;align-items:center;gap:12px;padding:16px;border-radius:12px;background:rgba(var(--primary-rgb,232,97,58),0.04)}
.contact-item svg{width:20px;height:20px;color:var(--primary);flex-shrink:0}
.contact-item span{font-size:0.88rem;color:var(--text-soft)}
.contact-form{max-width:480px;margin:0 auto}
.contact-form input,.contact-form textarea{width:100%;padding:14px 18px;border:1.5px solid rgba(0,0,0,0.1);border-radius:12px;font-family:inherit;font-size:0.92rem;margin-bottom:12px;transition:border-color 0.2s;outline:none;background:white;color:var(--text)}
.contact-form input:focus,.contact-form textarea:focus{border-color:var(--primary)}
.contact-form textarea{height:100px;resize:vertical}
.contact-form button{width:100%;padding:16px;background:var(--primary);color:#fff;border:none;border-radius:12px;font-family:inherit;font-weight:700;font-size:0.95rem;cursor:pointer;transition:all 0.3s}
.contact-form button:hover{background:var(--primary-light)}
.footer{text-align:center;padding:40px 24px;border-top:1px solid rgba(0,0,0,0.06);color:var(--text-soft);font-size:0.82rem}
[data-reveal]{opacity:0;transform:translateY(24px);transition:all 0.6s cubic-bezier(0.16,1,0.3,1)}
[data-reveal].visible{opacity:1;transform:none}
</style>
</head>
<body>
<nav class="nav"><div class="nav-inner">
<div class="nav-brand">{{businessName}}</div>
<button class="hamburger" onclick="this.nextElementSibling.classList.toggle('open')"><svg fill="none" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round"/></svg></button>
<div class="nav-links"><a href="#services">Services</a><a href="#about">About</a><a href="#contact">Contact</a></div>
<a href="#contact" class="nav-cta">{{ctaText}}</a>
</div></nav>
<section class="hero">
<h1>{{heroHeadline}}</h1>
<p>{{heroSubtext}}</p>
<a href="#contact" class="cta-btn">{{ctaText}}</a>
</section>
{{sectionsHtml}}
<footer class="footer"><p>{{footerText}}</p></footer>
<script>
document.querySelectorAll('[data-reveal]').forEach(function(el){
var o=new IntersectionObserver(function(e){e[0].isIntersecting&&(el.classList.add('visible'),o.disconnect())},{threshold:0.15});
o.observe(el)});
</script>
</body>
</html>`;

    // ── PORTFOLIO TEMPLATE ──
    TEMPLATES.portfolio = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{businessName}}</title>
<link href="https://fonts.googleapis.com/css2?family={{fontFamily}}&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--primary:{{primaryColor}};--primary-light:{{primaryLight}};--secondary:{{secondaryColor}};--bg:{{bgColor}};--text:{{textColor}};--text-soft:{{textSoft}};--accent:{{accentColor}}}
html{scroll-behavior:smooth}
body{font-family:'{{fontName}}', -apple-system, system-ui, sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased}
a{color:var(--primary);text-decoration:none}
.nav{position:fixed;top:0;width:100%;z-index:100;padding:16px 24px;background:rgba(255,255,255,0.85);backdrop-filter:blur(20px);border-bottom:1px solid rgba(0,0,0,0.06)}
.nav-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
.nav-brand{font-weight:800;font-size:1.1rem;letter-spacing:-0.02em}
.nav-links{display:flex;gap:28px;list-style:none}
.nav-links a{color:var(--text-soft);font-size:0.88rem;font-weight:500;transition:color 0.2s}
.nav-links a:hover{color:var(--primary)}
.hamburger{display:none;background:none;border:none;cursor:pointer;padding:4px}
.hamburger svg{width:24px;height:24px;stroke:var(--text);stroke-width:2}
@media(max-width:768px){.nav-links{display:none}.hamburger{display:block}.nav-links.open{display:flex;flex-direction:column;position:absolute;top:100%;left:0;right:0;background:white;padding:20px 24px;box-shadow:0 8px 24px rgba(0,0,0,0.08)}}
.hero{padding:140px 24px 60px;text-align:center}
.hero h1{font-size:3rem;font-weight:800;letter-spacing:-0.03em;margin-bottom:16px}
.hero p{font-size:1.15rem;color:var(--text-soft);max-width:500px;margin:0 auto 32px}
.section{padding:60px 24px}
.section-inner{max-width:1100px;margin:0 auto}
.section h2{font-size:1.8rem;font-weight:800;letter-spacing:-0.02em;margin-bottom:40px;text-align:center}
.gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
@media(max-width:768px){.gallery{grid-template-columns:repeat(2,1fr)}.hero h1{font-size:2.2rem}}
@media(max-width:480px){.gallery{grid-template-columns:1fr}}
.gallery-item{aspect-ratio:4/3;border-radius:14px;overflow:hidden;position:relative;cursor:pointer}
.gallery-item .thumb{width:100%;height:100%;object-fit:cover;transition:transform 0.4s}
.gallery-item:hover .thumb{transform:scale(1.05)}
.gallery-item .overlay{position:absolute;inset:0;background:linear-gradient(transparent 40%,rgba(0,0,0,0.7));display:flex;flex-direction:column;justify-content:flex-end;padding:20px;opacity:0;transition:opacity 0.3s}
.gallery-item:hover .overlay{opacity:1}
.gallery-item .overlay h3{color:#fff;font-size:0.95rem;font-weight:700}
.gallery-item .overlay p{color:rgba(255,255,255,0.7);font-size:0.8rem}
.placeholder-img{width:100%;height:100%;background:linear-gradient(135deg,var(--primary),var(--accent))}
.bio{display:flex;gap:48px;align-items:center;max-width:900px;margin:0 auto;padding:60px 24px}
@media(max-width:768px){.bio{flex-direction:column;text-align:center}}
.bio-photo{width:200px;height:200px;border-radius:50%;flex-shrink:0;background:linear-gradient(135deg,var(--primary),var(--accent));display:flex;align-items:center;justify-content:center;color:#fff;font-size:3rem;font-weight:800}
.bio-text h2{font-size:1.6rem;font-weight:800;margin-bottom:12px;text-align:left}
.bio-text p{color:var(--text-soft);font-size:0.95rem;line-height:1.75}
@media(max-width:768px){.bio-text h2{text-align:center}}
.contact-section{text-align:center;padding:60px 24px}
.cta-btn{display:inline-block;padding:16px 36px;background:var(--primary);color:#fff;border-radius:14px;font-weight:700;font-size:1rem;transition:all 0.3s}
.cta-btn:hover{background:var(--primary-light);transform:translateY(-2px)}
.footer{text-align:center;padding:40px 24px;border-top:1px solid rgba(0,0,0,0.06);color:var(--text-soft);font-size:0.82rem}
[data-reveal]{opacity:0;transform:translateY(24px);transition:all 0.6s cubic-bezier(0.16,1,0.3,1)}
[data-reveal].visible{opacity:1;transform:none}
</style>
</head>
<body>
<nav class="nav"><div class="nav-inner">
<div class="nav-brand">{{businessName}}</div>
<button class="hamburger" onclick="this.nextElementSibling.classList.toggle('open')"><svg fill="none" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round"/></svg></button>
<div class="nav-links"><a href="#work">Work</a><a href="#about">About</a><a href="#contact">Contact</a></div>
</div></nav>
<section class="hero">
<h1>{{heroHeadline}}</h1>
<p>{{heroSubtext}}</p>
</section>
{{sectionsHtml}}
<footer class="footer"><p>{{footerText}}</p></footer>
<script>
document.querySelectorAll('[data-reveal]').forEach(function(el){
var o=new IntersectionObserver(function(e){e[0].isIntersecting&&(el.classList.add('visible'),o.disconnect())},{threshold:0.15});
o.observe(el)});
</script>
</body>
</html>`;

    // ── BOOKING TEMPLATE ──
    TEMPLATES.booking = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{businessName}}</title>
<link href="https://fonts.googleapis.com/css2?family={{fontFamily}}&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--primary:{{primaryColor}};--primary-light:{{primaryLight}};--secondary:{{secondaryColor}};--bg:{{bgColor}};--text:{{textColor}};--text-soft:{{textSoft}};--accent:{{accentColor}}}
html{scroll-behavior:smooth}
body{font-family:'{{fontName}}', -apple-system, system-ui, sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased}
a{color:var(--primary);text-decoration:none}
.nav{position:fixed;top:0;width:100%;z-index:100;padding:16px 24px;background:rgba(255,255,255,0.85);backdrop-filter:blur(20px);border-bottom:1px solid rgba(0,0,0,0.06)}
.nav-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
.nav-brand{font-weight:800;font-size:1.1rem}
.nav-links{display:flex;gap:28px;list-style:none}
.nav-links a{color:var(--text-soft);font-size:0.88rem;font-weight:500;transition:color 0.2s}
.nav-links a:hover{color:var(--primary)}
.nav-cta{padding:10px 22px;background:var(--primary);color:#fff;border-radius:10px;font-weight:600;font-size:0.85rem;transition:all 0.3s}
.nav-cta:hover{background:var(--primary-light)}
.hamburger{display:none;background:none;border:none;cursor:pointer;padding:4px}
.hamburger svg{width:24px;height:24px;stroke:var(--text);stroke-width:2}
@media(max-width:768px){.nav-links,.nav-cta{display:none}.hamburger{display:block}.nav-links.open{display:flex;flex-direction:column;position:absolute;top:100%;left:0;right:0;background:white;padding:20px 24px;box-shadow:0 8px 24px rgba(0,0,0,0.08)}}
.hero{padding:140px 24px 80px;text-align:center}
.hero h1{font-size:3rem;font-weight:800;letter-spacing:-0.03em;margin-bottom:16px}
.hero p{font-size:1.15rem;color:var(--text-soft);max-width:520px;margin:0 auto 32px}
.cta-btn{display:inline-block;padding:16px 36px;background:var(--primary);color:#fff;border-radius:14px;font-weight:700;font-size:1rem;transition:all 0.3s}
.cta-btn:hover{background:var(--primary-light);transform:translateY(-2px)}
.section{padding:80px 24px}
.section-inner{max-width:1100px;margin:0 auto}
.section h2{font-size:2rem;font-weight:800;text-align:center;margin-bottom:40px}
.pricing-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:24px}
@media(max-width:768px){.pricing-grid{grid-template-columns:1fr}.hero h1{font-size:2.2rem}}
.price-card{background:white;border-radius:16px;padding:36px 28px;border:1.5px solid rgba(0,0,0,0.06);text-align:center;transition:all 0.3s;position:relative}
.price-card:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(0,0,0,0.08)}
.price-card.featured{border-color:var(--primary);box-shadow:0 8px 30px rgba(var(--primary-rgb,232,97,58),0.15)}
.price-card .badge{position:absolute;top:-12px;left:50%;transform:translateX(-50%);padding:4px 16px;background:var(--primary);color:#fff;border-radius:20px;font-size:0.72rem;font-weight:700;text-transform:uppercase;letter-spacing:0.05em}
.price-card h3{font-size:1.1rem;font-weight:700;margin-bottom:8px}
.price-card .price{font-size:2.4rem;font-weight:800;color:var(--primary);margin-bottom:4px}
.price-card .price span{font-size:0.85rem;font-weight:400;color:var(--text-soft)}
.price-card .desc{color:var(--text-soft);font-size:0.88rem;margin-bottom:20px}
.price-card ul{list-style:none;margin-bottom:24px;text-align:left}
.price-card ul li{padding:6px 0;font-size:0.88rem;color:var(--text-soft);display:flex;align-items:center;gap:8px}
.price-card ul li::before{content:'✓';color:var(--primary);font-weight:700}
.price-card .card-cta{display:block;padding:14px;background:var(--primary);color:#fff;border-radius:12px;font-weight:700;font-size:0.9rem;transition:all 0.3s;text-align:center}
.price-card .card-cta:hover{background:var(--primary-light)}
.testimonials{text-align:center}
.test-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
@media(max-width:768px){.test-grid{grid-template-columns:1fr}}
.test-card{background:white;border-radius:16px;padding:28px;border:1px solid rgba(0,0,0,0.06);text-align:left}
.test-card blockquote{font-size:0.95rem;font-style:italic;line-height:1.7;margin-bottom:16px;color:var(--text)}
.test-card cite{font-size:0.82rem;color:var(--text-soft);font-style:normal;font-weight:600}
.contact-section{text-align:center}
.footer{text-align:center;padding:40px 24px;border-top:1px solid rgba(0,0,0,0.06);color:var(--text-soft);font-size:0.82rem}
[data-reveal]{opacity:0;transform:translateY(24px);transition:all 0.6s cubic-bezier(0.16,1,0.3,1)}
[data-reveal].visible{opacity:1;transform:none}
</style>
</head>
<body>
<nav class="nav"><div class="nav-inner">
<div class="nav-brand">{{businessName}}</div>
<button class="hamburger" onclick="this.nextElementSibling.classList.toggle('open')"><svg fill="none" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round"/></svg></button>
<div class="nav-links"><a href="#services">Services</a><a href="#pricing">Pricing</a><a href="#reviews">Reviews</a><a href="#contact">Contact</a></div>
<a href="#contact" class="nav-cta">Book Now</a>
</div></nav>
<section class="hero">
<h1>{{heroHeadline}}</h1>
<p>{{heroSubtext}}</p>
<a href="#contact" class="cta-btn">{{ctaText}}</a>
</section>
{{sectionsHtml}}
<footer class="footer"><p>{{footerText}}</p></footer>
<script>
document.querySelectorAll('[data-reveal]').forEach(function(el){
var o=new IntersectionObserver(function(e){e[0].isIntersecting&&(el.classList.add('visible'),o.disconnect())},{threshold:0.15});
o.observe(el)});
</script>
</body>
</html>`;

    // ── STORE TEMPLATE ──
    TEMPLATES.store = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{businessName}}</title>
<link href="https://fonts.googleapis.com/css2?family={{fontFamily}}&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--primary:{{primaryColor}};--primary-light:{{primaryLight}};--secondary:{{secondaryColor}};--bg:{{bgColor}};--text:{{textColor}};--text-soft:{{textSoft}};--accent:{{accentColor}}}
html{scroll-behavior:smooth}
body{font-family:'{{fontName}}', -apple-system, system-ui, sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased}
a{color:var(--primary);text-decoration:none}
.nav{position:fixed;top:0;width:100%;z-index:100;padding:16px 24px;background:rgba(255,255,255,0.85);backdrop-filter:blur(20px);border-bottom:1px solid rgba(0,0,0,0.06)}
.nav-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
.nav-brand{font-weight:800;font-size:1.1rem}
.nav-links{display:flex;gap:28px;list-style:none}
.nav-links a{color:var(--text-soft);font-size:0.88rem;font-weight:500;transition:color 0.2s}
.nav-links a:hover{color:var(--primary)}
.hamburger{display:none;background:none;border:none;cursor:pointer;padding:4px}
.hamburger svg{width:24px;height:24px;stroke:var(--text);stroke-width:2}
@media(max-width:768px){.nav-links{display:none}.hamburger{display:block}.nav-links.open{display:flex;flex-direction:column;position:absolute;top:100%;left:0;right:0;background:white;padding:20px 24px;box-shadow:0 8px 24px rgba(0,0,0,0.08)}}
.hero{padding:140px 24px 60px;text-align:center;background:linear-gradient(180deg,rgba(var(--primary-rgb,232,97,58),0.04),transparent)}
.hero h1{font-size:3rem;font-weight:800;letter-spacing:-0.03em;margin-bottom:16px}
.hero p{font-size:1.15rem;color:var(--text-soft);max-width:520px;margin:0 auto 32px}
.cta-btn{display:inline-block;padding:16px 36px;background:var(--primary);color:#fff;border-radius:14px;font-weight:700;font-size:1rem;transition:all 0.3s}
.cta-btn:hover{background:var(--primary-light);transform:translateY(-2px)}
.section{padding:80px 24px}
.section-inner{max-width:1100px;margin:0 auto}
.section h2{font-size:2rem;font-weight:800;text-align:center;margin-bottom:40px}
.product-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:24px}
@media(max-width:768px){.product-grid{grid-template-columns:repeat(2,1fr)}.hero h1{font-size:2.2rem}}
@media(max-width:480px){.product-grid{grid-template-columns:1fr}}
.product-card{background:white;border-radius:16px;overflow:hidden;border:1px solid rgba(0,0,0,0.06);transition:all 0.3s}
.product-card:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(0,0,0,0.08)}
.product-img{aspect-ratio:4/3;background:linear-gradient(135deg,var(--primary),var(--accent));display:flex;align-items:center;justify-content:center}
.product-img svg{width:40px;height:40px;color:rgba(255,255,255,0.6)}
.product-info{padding:20px}
.product-info h3{font-size:1rem;font-weight:700;margin-bottom:6px}
.product-info .price{font-size:1.15rem;font-weight:800;color:var(--primary);margin-bottom:8px}
.product-info p{font-size:0.85rem;color:var(--text-soft);margin-bottom:14px}
.product-info .add-btn{display:block;text-align:center;padding:12px;background:var(--primary);color:#fff;border-radius:10px;font-weight:600;font-size:0.85rem;transition:all 0.2s}
.product-info .add-btn:hover{background:var(--primary-light)}
.features-strip{display:flex;justify-content:center;gap:48px;flex-wrap:wrap;padding:40px 24px;border-top:1px solid rgba(0,0,0,0.06)}
.features-strip .feat{display:flex;align-items:center;gap:10px;font-size:0.88rem;color:var(--text-soft);font-weight:500}
.features-strip .feat svg{width:20px;height:20px;color:var(--primary)}
.footer{text-align:center;padding:40px 24px;border-top:1px solid rgba(0,0,0,0.06);color:var(--text-soft);font-size:0.82rem}
[data-reveal]{opacity:0;transform:translateY(24px);transition:all 0.6s cubic-bezier(0.16,1,0.3,1)}
[data-reveal].visible{opacity:1;transform:none}
</style>
</head>
<body>
<nav class="nav"><div class="nav-inner">
<div class="nav-brand">{{businessName}}</div>
<button class="hamburger" onclick="this.nextElementSibling.classList.toggle('open')"><svg fill="none" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round"/></svg></button>
<div class="nav-links"><a href="#products">Products</a><a href="#about">About</a><a href="#contact">Contact</a></div>
</div></nav>
<section class="hero">
<h1>{{heroHeadline}}</h1>
<p>{{heroSubtext}}</p>
<a href="#products" class="cta-btn">{{ctaText}}</a>
</section>
{{sectionsHtml}}
<footer class="footer"><p>{{footerText}}</p></footer>
<script>
document.querySelectorAll('[data-reveal]').forEach(function(el){
var o=new IntersectionObserver(function(e){e[0].isIntersecting&&(el.classList.add('visible'),o.disconnect())},{threshold:0.15});
o.observe(el)});
</script>
</body>
</html>`;

    // ── DASHBOARD TEMPLATE ──
    TEMPLATES.dashboard = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{businessName}}</title>
<link href="https://fonts.googleapis.com/css2?family={{fontFamily}}&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--primary:{{primaryColor}};--primary-light:{{primaryLight}};--secondary:{{secondaryColor}};--bg:{{bgColor}};--text:{{textColor}};--text-soft:{{textSoft}};--accent:{{accentColor}}}
body{font-family:'{{fontName}}', -apple-system, system-ui, sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased;display:flex;min-height:100vh}
a{color:var(--primary);text-decoration:none}
.sidebar{width:240px;background:var(--secondary);color:#fff;padding:24px 0;flex-shrink:0;position:fixed;top:0;bottom:0;left:0;overflow-y:auto}
.sidebar-brand{padding:0 24px 28px;font-weight:800;font-size:1.1rem;border-bottom:1px solid rgba(255,255,255,0.08)}
.sidebar-nav{list-style:none;padding:16px 12px}
.sidebar-nav li{margin-bottom:2px}
.sidebar-nav a{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;color:rgba(255,255,255,0.6);font-size:0.88rem;font-weight:500;transition:all 0.2s}
.sidebar-nav a:hover,.sidebar-nav a.active{background:rgba(255,255,255,0.08);color:#fff}
.sidebar-nav svg{width:18px;height:18px}
.main{margin-left:240px;flex:1;padding:28px 32px}
@media(max-width:768px){.sidebar{display:none}.main{margin-left:0}}
.topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:28px}
.topbar h1{font-size:1.6rem;font-weight:800;letter-spacing:-0.02em}
.topbar-actions{display:flex;gap:10px}
.topbar-btn{padding:10px 20px;background:var(--primary);color:#fff;border:none;border-radius:10px;font-family:inherit;font-weight:600;font-size:0.85rem;cursor:pointer;transition:all 0.2s}
.topbar-btn:hover{background:var(--primary-light)}
.topbar-btn.ghost{background:transparent;border:1.5px solid rgba(0,0,0,0.1);color:var(--text)}
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:28px}
@media(max-width:900px){.stats-grid{grid-template-columns:repeat(2,1fr)}}
.stat-card{background:white;border-radius:14px;padding:20px;border:1px solid rgba(0,0,0,0.06)}
.stat-card .label{font-size:0.78rem;color:var(--text-soft);font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:6px}
.stat-card .value{font-size:1.8rem;font-weight:800;letter-spacing:-0.02em}
.stat-card .change{font-size:0.78rem;margin-top:4px;font-weight:600}
.stat-card .change.up{color:#22c55e}
.stat-card .change.down{color:#ef4444}
.panel{background:white;border-radius:16px;border:1px solid rgba(0,0,0,0.06);margin-bottom:20px}
.panel-header{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;border-bottom:1px solid rgba(0,0,0,0.06)}
.panel-header h2{font-size:1.05rem;font-weight:700}
.panel-body{padding:20px 22px}
table{width:100%;border-collapse:collapse}
table th{text-align:left;font-size:0.78rem;font-weight:700;color:var(--text-soft);text-transform:uppercase;letter-spacing:0.05em;padding:10px 0;border-bottom:1px solid rgba(0,0,0,0.06)}
table td{padding:12px 0;font-size:0.9rem;border-bottom:1px solid rgba(0,0,0,0.03)}
.status{display:inline-block;padding:3px 10px;border-radius:20px;font-size:0.75rem;font-weight:600}
.status.active{background:rgba(34,197,94,0.1);color:#16a34a}
.status.pending{background:rgba(234,179,8,0.1);color:#ca8a04}
.status.done{background:rgba(59,130,246,0.1);color:#2563eb}
</style>
</head>
<body>
<aside class="sidebar">
<div class="sidebar-brand">{{businessName}}</div>
<ul class="sidebar-nav">
{{sidebarHtml}}
</ul>
</aside>
<div class="main">
<div class="topbar">
<h1>{{heroHeadline}}</h1>
<div class="topbar-actions"><button class="topbar-btn">{{ctaText}}</button></div>
</div>
{{sectionsHtml}}
</div>
</body>
</html>`;

    // ══════════════════════════════════════════════════════
    // ── SECTION RENDERERS ──
    // ══════════════════════════════════════════════════════

    function escHtml(s) {
        if (!s) return '';
        return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
    }

    function iconHtml(name) {
        return ICON_SVG[name] || ICON_SVG.star;
    }

    var SECTION_RENDERERS = {
        services: function(s) {
            var cards = (s.items || []).map(function(item) {
                return '<div class="card" data-reveal><div class="card-icon">' + iconHtml(item.icon) + '</div><h3>' + escHtml(item.title) + '</h3><p>' + escHtml(item.desc) + '</p></div>';
            }).join('');
            return '<section class="section" id="services" data-reveal><div class="section-inner"><div class="section-label">' + escHtml(s.label || 'Services') + '</div><h2>' + escHtml(s.title) + '</h2>' + (s.text ? '<p class="desc">' + escHtml(s.text) + '</p>' : '') + '<div class="grid-3">' + cards + '</div></div></section>';
        },
        about: function(s) {
            return '<section class="section" data-reveal><div class="about-section"><h2>' + escHtml(s.title) + '</h2><p class="desc">' + escHtml(s.text) + '</p></div></section>';
        },
        testimonials: function(s) {
            var cards = (s.items || []).map(function(item) {
                return '<div class="test-card" data-reveal><blockquote>"' + escHtml(item.quote) + '"</blockquote><cite>' + escHtml(item.author) + '</cite></div>';
            }).join('');
            return '<section class="section testimonials" id="reviews" data-reveal><div class="section-inner"><h2>' + escHtml(s.title) + '</h2><div class="test-grid">' + cards + '</div></div></section>';
        },
        contact: function(s) {
            var infoHtml = '';
            if (s.address || s.phone || s.hours) {
                var items = [];
                if (s.address) items.push('<div class="contact-item">' + iconHtml('mappin') + '<span>' + escHtml(s.address) + '</span></div>');
                if (s.phone) items.push('<div class="contact-item">' + iconHtml('phone') + '<span>' + escHtml(s.phone) + '</span></div>');
                if (s.hours) items.push('<div class="contact-item">' + iconHtml('clock') + '<span>' + escHtml(s.hours) + '</span></div>');
                infoHtml = '<div class="contact-grid">' + items.join('') + '</div>';
            }
            var formHtml = s.showForm !== false ? '<div class="contact-form"><input type="text" placeholder="Your name"><input type="email" placeholder="Your email"><textarea placeholder="Your message"></textarea><button type="button">Send Message</button></div>' : '';
            return '<section class="section contact-section" id="contact" data-reveal><div class="section-inner"><h2>' + escHtml(s.title) + '</h2>' + infoHtml + formHtml + '</div></section>';
        },
        pricing: function(s) {
            var cards = (s.items || []).map(function(item, i) {
                var featured = item.featured || i === 1;
                var feats = (item.features || []).map(function(f) { return '<li>' + escHtml(f) + '</li>'; }).join('');
                return '<div class="price-card' + (featured ? ' featured' : '') + '" data-reveal>' +
                    (featured ? '<div class="badge">Popular</div>' : '') +
                    '<h3>' + escHtml(item.title) + '</h3>' +
                    '<div class="price">' + escHtml(item.price) + (item.period ? '<span>/' + escHtml(item.period) + '</span>' : '') + '</div>' +
                    (item.desc ? '<p class="desc">' + escHtml(item.desc) + '</p>' : '') +
                    '<ul>' + feats + '</ul>' +
                    '<a href="#contact" class="card-cta">' + escHtml(item.cta || 'Get Started') + '</a></div>';
            }).join('');
            return '<section class="section" id="pricing" data-reveal><div class="section-inner"><h2>' + escHtml(s.title) + '</h2><div class="pricing-grid">' + cards + '</div></div></section>';
        },
        gallery: function(s) {
            var items = (s.items || []).map(function(item) {
                return '<div class="gallery-item" data-reveal><div class="placeholder-img thumb"></div><div class="overlay"><h3>' + escHtml(item.title) + '</h3><p>' + escHtml(item.desc) + '</p></div></div>';
            }).join('');
            return '<section class="section" id="work" data-reveal><div class="section-inner"><h2>' + escHtml(s.title) + '</h2><div class="gallery">' + items + '</div></div></section>';
        },
        bio: function(s) {
            var initials = (s.name || '').split(' ').map(function(w) { return w[0] || ''; }).join('').toUpperCase();
            return '<section class="bio" id="about" data-reveal><div class="bio-photo">' + escHtml(initials) + '</div><div class="bio-text"><h2>' + escHtml(s.title || 'About') + '</h2><p>' + escHtml(s.text) + '</p></div></section>';
        },
        products: function(s) {
            var cards = (s.items || []).map(function(item) {
                return '<div class="product-card" data-reveal><div class="product-img">' + iconHtml(item.icon || 'cart') + '</div><div class="product-info"><h3>' + escHtml(item.title) + '</h3>' + (item.price ? '<div class="price">' + escHtml(item.price) + '</div>' : '') + '<p>' + escHtml(item.desc) + '</p><a href="#" class="add-btn">Add to Cart</a></div></div>';
            }).join('');
            return '<section class="section" id="products" data-reveal><div class="section-inner"><h2>' + escHtml(s.title) + '</h2><div class="product-grid">' + cards + '</div></div></section>';
        },
        features: function(s) {
            var items = (s.items || []).map(function(item) {
                return '<div class="feat">' + iconHtml(item.icon) + '<span>' + escHtml(item.title) + '</span></div>';
            }).join('');
            return '<div class="features-strip" data-reveal>' + items + '</div>';
        },
        stats: function(s) {
            var cards = (s.items || []).map(function(item) {
                return '<div class="stat-card"><div class="label">' + escHtml(item.title) + '</div><div class="value">' + escHtml(item.value) + '</div>' + (item.change ? '<div class="change ' + (item.change.startsWith('+') ? 'up' : item.change.startsWith('-') ? 'down' : '') + '">' + escHtml(item.change) + '</div>' : '') + '</div>';
            }).join('');
            return '<div class="stats-grid">' + cards + '</div>';
        },
        table: function(s) {
            var cols = s.columns || [];
            var rows = s.rows || [];
            var thead = '<tr>' + cols.map(function(c) { return '<th>' + escHtml(c) + '</th>'; }).join('') + '</tr>';
            var tbody = rows.map(function(row) {
                return '<tr>' + row.map(function(cell, i) {
                    if (i === cols.length - 1 && /active|pending|done|completed/i.test(cell)) {
                        var cls = /active/i.test(cell) ? 'active' : /pending/i.test(cell) ? 'pending' : 'done';
                        return '<td><span class="status ' + cls + '">' + escHtml(cell) + '</span></td>';
                    }
                    return '<td>' + escHtml(cell) + '</td>';
                }).join('') + '</tr>';
            }).join('');
            return '<div class="panel"><div class="panel-header"><h2>' + escHtml(s.title) + '</h2></div><div class="panel-body"><table><thead>' + thead + '</thead><tbody>' + tbody + '</tbody></table></div></div>';
        }
    };

    // ── MERGE ENGINE ──

    function mergeTemplate(config) {
        var tpl = TEMPLATES[config.template] || TEMPLATES.landing;
        var fontName = (config.font || 'Inter:wght@400;600;700;800').split(':')[0].replace(/\+/g, ' ');
        var html = tpl;

        var replacements = {
            '{{businessName}}': escHtml(config.businessName || 'My Business'),
            '{{tagline}}': escHtml(config.tagline || ''),
            '{{primaryColor}}': config.colors.primary,
            '{{primaryLight}}': config.colors.primaryLight,
            '{{secondaryColor}}': config.colors.secondary,
            '{{bgColor}}': config.colors.bg,
            '{{textColor}}': config.colors.text,
            '{{textSoft}}': config.colors.textSoft,
            '{{accentColor}}': config.colors.accent,
            '{{fontFamily}}': config.font || 'Inter:wght@400;600;700;800',
            '{{fontName}}': fontName,
            '{{heroHeadline}}': escHtml(config.hero.headline),
            '{{heroSubtext}}': escHtml(config.hero.subtext),
            '{{ctaText}}': escHtml(config.hero.cta || 'Get Started'),
            '{{footerText}}': config.footer || ''
        };

        for (var key in replacements) {
            html = html.split(key).join(replacements[key]);
        }

        // Build sections
        var sectionsHtml = (config.sections || []).map(function(s) {
            var renderer = SECTION_RENDERERS[s.id];
            if (renderer) return renderer(s);
            // Default: simple text section
            return '<section class="section" data-reveal><div class="section-inner"><h2>' + escHtml(s.title) + '</h2><p class="desc">' + escHtml(s.text || '') + '</p></div></section>';
        }).join('\n');

        html = html.split('{{sectionsHtml}}').join(sectionsHtml);

        // Dashboard sidebar
        if (config.template === 'dashboard' && config.sidebar) {
            var sidebarHtml = (config.sidebar || []).map(function(item, i) {
                return '<li><a href="#" class="' + (i === 0 ? 'active' : '') + '">' + iconHtml(item.icon) + ' ' + escHtml(item.label) + '</a></li>';
            }).join('');
            html = html.split('{{sidebarHtml}}').join(sidebarHtml);
        } else {
            html = html.split('{{sidebarHtml}}').join('<li><a href="#" class="active">' + iconHtml('layout') + ' Dashboard</a></li>');
        }

        return html;
    }

    function deepMerge(target, delta) {
        var result = {};
        for (var k in target) result[k] = target[k];
        for (var k in delta) {
            if (delta[k] && typeof delta[k] === 'object' && !Array.isArray(delta[k]) && target[k] && typeof target[k] === 'object' && !Array.isArray(target[k])) {
                result[k] = deepMerge(target[k], delta[k]);
            } else {
                result[k] = delta[k];
            }
        }
        return result;
    }

    function extractJson(text) {
        try { return JSON.parse(text); } catch(e) {}
        var m = text.match(/```(?:json)?\s*([\s\S]*?)\s*```/);
        if (m) try { return JSON.parse(m[1]); } catch(e) {}
        var start = text.indexOf('{');
        var end = text.lastIndexOf('}');
        if (start >= 0 && end > start) try { return JSON.parse(text.substring(start, end + 1)); } catch(e) {}
        return null;
    }


    // ── Preview State ──
    var pState = {
        businessDesc: '',
        currentHtml: '',
        currentConfig: null,
        refinementCount: 0,
        email: null,
        trialStarted: false,
        publishedSlug: null
    };

    function saveState() {
        try { localStorage.setItem('suitePreview', JSON.stringify(pState)); } catch(e) {}
    }
    function loadState() {
        try {
            var s = localStorage.getItem('suitePreview');
            if (s) pState = JSON.parse(s);
        } catch(e) {}
    }

    // ── Nav ──
    var nav = document.getElementById('nav');
    window.addEventListener('scroll', function() {
        nav.classList.toggle('scrolled', window.scrollY > 40);
    });
    var hamburger = document.getElementById('navHamburger');
    var navLinksEl = document.querySelector('.nav-links');
    hamburger.addEventListener('click', function() {
        hamburger.classList.toggle('open');
        navLinksEl.classList.toggle('open');
    });
    navLinksEl.querySelectorAll('a').forEach(function(link) {
        link.addEventListener('click', function() {
            hamburger.classList.remove('open');
            navLinksEl.classList.remove('open');
        });
    });

    // ── Scroll Reveal ──
    var reveals = document.querySelectorAll('.reveal');
    var revealObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(e) {
            if (e.isIntersecting) { e.target.classList.add('vis'); revealObserver.unobserve(e.target); }
        });
    }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });
    reveals.forEach(function(el) { revealObserver.observe(el); });

    // ── Form Submit (bottom form) ──
    var form = document.getElementById('leadForm');
    if (form) {
        var btn = document.getElementById('submitBtn');
        var errorEl = document.getElementById('formError');
        var successEl = document.getElementById('formSuccess');
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            errorEl.classList.remove('show');
            btn.disabled = true;
            btn.textContent = 'Sending...';
            var body = {
                name: document.getElementById('name').value.trim(),
                email: document.getElementById('email').value.trim(),
                phone: document.getElementById('phone').value.trim() || null,
                business_name: document.getElementById('businessName').value.trim() || null,
                business_type: document.getElementById('businessType').value || null,
                what_they_need: document.getElementById('whatTheyNeed').value.trim(),
                source: source, status: 'new'
            };
            if (adId) body.ad_id = adId;
            fetch(SB_URL + '/rest/v1/client_leads', {
                method: 'POST',
                headers: { 'apikey': SB_KEY, 'Authorization': 'Bearer ' + SB_KEY, 'Content-Type': 'application/json', 'Prefer': 'return=minimal' },
                body: JSON.stringify(body)
            }).then(function(resp) {
                if (!resp.ok) throw new Error('Server error');
                form.style.display = 'none'; errorEl.style.display = 'none'; successEl.classList.add('show');
                fetch('/api/notify-lead', { method: 'POST', headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: body.name, email: body.email, phone: body.phone, business_name: body.business_name, business_type: body.business_type, message: body.what_they_need, source: body.source, ad_id: adId })
                }).catch(function() {});
            }).catch(function() {
                errorEl.textContent = 'Something went wrong. Please try again.';
                errorEl.classList.add('show'); btn.disabled = false; btn.textContent = 'Send My Request';
            });
        });
    }

    // ════════════════════════════════════════
    // PREVIEW SYSTEM
    // ════════════════════════════════════════

    var previewForm = document.getElementById('previewForm');
    var descInput = document.getElementById('businessDesc');
    var previewBtn = document.getElementById('previewBtn');
    var loadingEl = document.getElementById('previewLoading');
    var loadingHint = document.getElementById('loadingHint');
    var screenEl = document.getElementById('previewScreen');
    var iframeEl = document.getElementById('previewIframe');
    var frameEl = document.getElementById('previewFrame');
    var iframeLoading = document.getElementById('previewIframeLoading');
    var chatMessages = document.getElementById('previewChatMessages');
    var chatInput = document.getElementById('previewChatInput');
    var sendBtn = document.getElementById('sendRefinement');
    var counterEl = document.getElementById('refinementCounter');
    var titleEl = document.getElementById('previewTitle');

    // ── Example chips ──
    document.querySelectorAll('.preview-example').forEach(function(chip) {
        chip.addEventListener('click', function() {
            descInput.value = chip.getAttribute('data-desc');
            descInput.focus();
        });
    });

    // ── Generate ──
    previewForm.addEventListener('submit', function(e) {
        e.preventDefault();
        var desc = descInput.value.trim();
        if (desc.length < 5) return;
        generatePreview(desc);
    });

    // ── Template-based prompt (single call, returns JSON) ──
    function buildTemplatePrompt(desc) {
        var tplKeys = Object.keys(TEMPLATES).join(', ');
        var iconKeys = Object.keys(ICON_SVG).join(', ');
        return 'You are a website configuration engine. Given a business description (which may be vague, a rant, or a clear spec), output a JSON object to configure a website template.\n\n' +
            'BUSINESS: "' + desc + '"\n\n' +
            'Available templates: ' + tplKeys + '\n' +
            '- landing: hero + services grid + about + contact (restaurants, salons, agencies, freelancers, general businesses)\n' +
            '- portfolio: gallery grid + project cards + bio (photographers, designers, artists)\n' +
            '- booking: service list + pricing cards + booking CTA + testimonials (gyms, clinics, coaches)\n' +
            '- store: product grid + featured items (bakeries, shops, boutiques)\n' +
            '- dashboard: sidebar + stats cards + data tables (inventory, scheduling, tools)\n\n' +
            'Available icon names: ' + iconKeys + '\n\n' +
            'Section id values that have renderers: services, about, testimonials, contact, pricing, gallery, bio, products, features, stats, table\n\n' +
            'Choose the best template. Infer business name, colors, and all content from the description.\n\n' +
            'Output ONLY valid JSON:\n' +
            '{"template":"landing","businessName":"string","tagline":"string","colors":{"primary":"#hex","primaryLight":"#hex","secondary":"#hex","bg":"#hex","text":"#hex","textSoft":"#hex","accent":"#hex"},"font":"Google+Font:wght@400;700","hero":{"headline":"string","subtext":"string","cta":"string"},"sections":[{"id":"services","title":"string","label":"string","text":"string","items":[{"icon":"iconname","title":"string","desc":"string"}]},{"id":"about","title":"string","text":"string"},{"id":"contact","title":"string","address":"string","phone":"string","hours":"string","showForm":true}],"footer":"string"}\n\n' +
            'For pricing sections: items need {title, price, period, desc, features:["..."], cta}\n' +
            'For gallery sections: items need {title, desc}\n' +
            'For bio sections: include {name, title, text}\n' +
            'For products: items need {icon, title, price, desc}\n' +
            'For stats: items need {title, value, change}\n' +
            'For table: include {columns:["..."], rows:[["..."]...]}\n' +
            'For dashboard template, also include: "sidebar":[{"icon":"iconname","label":"string"}]\n\n' +
            'No markdown, no explanation, no code fences. Output raw JSON only.';
    }

    // ── Delta refinement prompt ──
    function buildRefinementPromptNew(config, request) {
        return 'Current website config:\n' + JSON.stringify(config, null, 2) + '\n\n' +
            'USER REQUEST: "' + request + '"\n\n' +
            'Output ONLY a JSON delta — include ONLY the fields that need to change.\n' +
            'Examples:\n' +
            '- Change headline: {"hero":{"headline":"New Headline"}}\n' +
            '- Change colors: {"colors":{"primary":"#3498db","accent":"#e74c3c"}}\n' +
            '- Update sections: {"sections":[...full updated sections array...]}\n' +
            '- Switch template: {"template":"portfolio",...all fields needed...}\n\n' +
            'Output raw JSON only. No markdown, no explanation.';
    }

    // ── Legacy full-HTML prompt (fallback) ──
    function buildPromptLegacy(desc) {
        return 'You are generating a professional single-page business landing website.\n\nBUSINESS DESCRIPTION: "' + desc + '"\n\nRequirements:\n- Complete self-contained HTML file with inline CSS and JavaScript\n- Modern, professional design with clean typography\n- Responsive mobile-first layout\n- Include: hero, services, about, contact form\n- Infer appropriate color scheme\n- Use Google Fonts\n- NO external JS dependencies\n\nOutput ONLY the complete HTML code. Start with <!DOCTYPE html> and end with </html>. No markdown, no explanations, no code fences.';
    }

    function extractHtml(text) {
        var m = text.match(/<!DOCTYPE html>[\s\S]*<\/html>/i);
        if (m) return m[0];
        var cb = text.match(/```(?:html)?\s*([\s\S]*?)\s*```/i);
        if (cb && cb[1].includes('<!DOCTYPE')) return cb[1].match(/<!DOCTYPE html>[\s\S]*<\/html>/i)[0];
        return null;
    }

    async function callGemini(prompt, opts) {
        var config = Object.assign({ temperature: 0.7, maxOutputTokens: 1024 }, opts || {});
        var resp = await fetch('/api/gemini', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                prompt: prompt,
                model: 'gemini-2.0-flash',
                generationConfig: config,
                enableSearch: false
            })
        });
        if (!resp.ok) throw new Error('API error ' + resp.status);
        var data = await resp.json();
        return data.text || '';
    }

    var hints = ['Choosing the best layout', 'Picking colors and fonts', 'Writing your content', 'Almost ready'];

    // Inline preview elements
    var inlinePreviewEl = document.getElementById('inlinePreview');
    var inlineIframeEl = document.getElementById('inlinePreviewIframe');
    var inlineLoadingEl = document.getElementById('inlinePreviewLoading');
    var inlineHintEl = document.getElementById('inlineLoadingHint');
    var inlineActionsEl = document.getElementById('inlinePreviewActions');
    var inlineUrlEl = document.getElementById('inlinePreviewUrl');

    async function generatePreview(desc) {
        pState.refinementCount = 0;
        pState.currentHtml = '';
        pState.currentConfig = null;

        // Show inline preview card with loading state
        inlinePreviewEl.classList.add('active');
        inlineLoadingEl.classList.remove('done');
        inlineActionsEl.style.display = 'none';
        document.getElementById('inlineFeedback').style.display = 'none';
        document.getElementById('colorPresetRow').style.display = 'none';
        inlineUrlEl.textContent = 'generating...';

        // Scroll to the inline preview
        inlinePreviewEl.scrollIntoView({ behavior: 'smooth', block: 'center' });

        var hi = 0;
        inlineHintEl.textContent = hints[0];
        var hintTimer = setInterval(function() {
            hi++;
            if (hi < hints.length) inlineHintEl.textContent = hints[hi];
        }, 2000);

        try {
            // Single Gemini call: template selection + content (replaces clarifyInput + buildPrompt)
            var text = await callGemini(buildTemplatePrompt(desc), { maxOutputTokens: 1500 });
            var config = extractJson(text);

            if (config && config.template && config.hero) {
                // Template path — fast!
                pState.currentConfig = config;
                pState.businessDesc = config.businessName || desc;
                pState.currentHtml = mergeTemplate(config);
            } else {
                // Fallback: full HTML generation (slower but reliable)
                console.warn('Template JSON parse failed, falling back to full HTML generation');
                var fallbackText = await callGemini(buildPromptLegacy(desc), { maxOutputTokens: 16000 });
                var html = extractHtml(fallbackText);
                if (!html) throw new Error('No HTML generated');
                pState.businessDesc = desc;
                pState.currentHtml = html;
            }

            saveState();
            clearInterval(hintTimer);

            // Show the generated site in the inline iframe
            inlineIframeEl.srcdoc = pState.currentHtml;
            var slug = (pState.businessDesc || desc).toLowerCase().replace(/[^a-z0-9\s]/g, '').replace(/\s+/g, '-').substring(0, 30);
            inlineUrlEl.textContent = 'suitegpt.app/s/' + slug;

            // Fade out loading, show actions + feedback
            inlineLoadingEl.classList.add('done');
            inlineActionsEl.style.display = 'flex';
            document.getElementById('inlineFeedback').style.display = 'block';
            document.getElementById('colorPresetRow').style.display = pState.currentConfig ? 'flex' : 'none';

            // Log lead to supabase (fire-and-forget)
            fetch(SB_URL + '/rest/v1/client_leads', {
                method: 'POST',
                headers: { 'apikey': SB_KEY, 'Authorization': 'Bearer ' + SB_KEY, 'Content-Type': 'application/json', 'Prefer': 'return=minimal' },
                body: JSON.stringify({ what_they_need: desc, source: source + '-preview', status: 'preview' })
            }).catch(function() {});

        } catch(err) {
            clearInterval(hintTimer);
            inlinePreviewEl.classList.remove('active');
            alert('Failed to generate preview. Please try again.');
            console.error(err);
        }
    }

    function showPreview(html, desc) {
        iframeEl.srcdoc = html;
        titleEl.textContent = desc || pState.businessDesc;
        screenEl.classList.add('active');
        document.body.style.overflow = 'hidden';
        updateCounter();
        chatMessages.innerHTML = '';
        var remaining = getLimit() - pState.refinementCount;
        if (pState.trialStarted) {
            addChat('assistant', 'Here\'s your website. Make any changes you like — unlimited refinements.');
        } else {
            addChat('assistant', 'Here\'s your website preview! Want to change anything? You have ' + remaining + ' free refinement' + (remaining !== 1 ? 's' : '') + '.');
        }
    }

    function hidePreview() {
        screenEl.classList.remove('active');
        document.body.style.overflow = '';
        // Sync inline preview with latest HTML from refinements
        if (pState.currentHtml && inlineIframeEl) {
            inlineIframeEl.srcdoc = pState.currentHtml;
        }
    }

    // ── "Get this site" button (inline → publish modal directly) ──
    document.getElementById('inlinePublishBtn').addEventListener('click', function() {
        if (!pState.currentHtml) return;
        if (pState.email) {
            document.getElementById('publishEmail').value = pState.email;
            document.getElementById('publishEmailGroup').style.display = 'none';
        }
        var slugEl = document.getElementById('publishSlug');
        if (!slugEl.value && pState.businessDesc) {
            var autoSlug = pState.businessDesc.trim().toLowerCase()
                .replace(/[^a-z0-9\s-]/g, '')
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-')
                .replace(/^-|-$/g, '')
                .substring(0, 63);
            slugEl.value = autoSlug;
            checkSlugAvailability(autoSlug);
        }
        document.getElementById('publishModal').classList.add('active');
    });

    // ── Inline feedback: quick chips ──
    var feedbackEl = document.getElementById('inlineFeedback');
    var feedbackInput = document.getElementById('feedbackInput');
    var feedbackSendBtn = document.getElementById('feedbackSendBtn');
    var feedbackStatus = document.getElementById('feedbackStatus');

    document.querySelectorAll('.inline-feedback-chip').forEach(function(chip) {
        chip.addEventListener('click', function() {
            inlineRefine(chip.getAttribute('data-feedback'));
        });
    });

    // ── Color dot clicks: instant palette swap ──
    document.querySelectorAll('.color-dot').forEach(function(dot) {
        dot.addEventListener('click', function() {
            var preset = dot.getAttribute('data-preset');
            if (!pState.currentConfig || !COLOR_PRESETS[preset]) return;
            pState.currentConfig.colors = COLOR_PRESETS[preset];
            pState.currentHtml = mergeTemplate(pState.currentConfig);
            saveState();
            inlineIframeEl.srcdoc = pState.currentHtml;
            document.querySelectorAll('.color-dot').forEach(function(d) { d.classList.remove('active'); });
            dot.classList.add('active');
            feedbackStatus.textContent = 'Colors updated!';
            feedbackStatus.style.color = '#3ea878';
            setTimeout(function() { feedbackStatus.textContent = ''; }, 2000);
        });
    });

    feedbackSendBtn.addEventListener('click', function() {
        var val = feedbackInput.value.trim();
        if (val) inlineRefine(val);
    });
    feedbackInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
            var val = feedbackInput.value.trim();
            if (val) inlineRefine(val);
        }
    });

    var inlineProgressEl = document.getElementById('inlineProgress');
    var inlineBodyEl = document.getElementById('inlinePreviewBody');

    // ── Color preset names mapped to keywords ──
    var COLOR_KEYWORDS = {
        red: 'rose', blue: 'cool', green: 'forest', purple: 'pastel',
        orange: 'warm', dark: 'dark', light: 'warm', teal: 'ocean',
        pink: 'rose', navy: 'cool', brown: 'earth', warm: 'warm',
        cool: 'cool', pastel: 'pastel', earth: 'earth', ocean: 'ocean',
        forest: 'forest', rose: 'rose'
    };

    async function inlineRefine(request) {
        if (!pState.currentHtml) return;

        // ── Instant: color changes (no AI call) ──
        if (pState.currentConfig) {
            var isColorRequest = /\b(color|colours?|theme|scheme|palette)\b/i.test(request);
            if (isColorRequest) {
                var lower = request.toLowerCase();
                for (var kw in COLOR_KEYWORDS) {
                    if (lower.indexOf(kw) !== -1 && COLOR_PRESETS[COLOR_KEYWORDS[kw]]) {
                        pState.currentConfig.colors = COLOR_PRESETS[COLOR_KEYWORDS[kw]];
                        pState.currentHtml = mergeTemplate(pState.currentConfig);
                        saveState();
                        inlineIframeEl.srcdoc = pState.currentHtml;
                        feedbackStatus.textContent = 'Colors updated!';
                        feedbackStatus.style.color = '#3ea878';
                        feedbackInput.value = '';
                        setTimeout(function() { feedbackStatus.textContent = ''; }, 2000);
                        return;
                    }
                }
            }
        }

        feedbackSendBtn.disabled = true;
        feedbackStatus.textContent = 'Applying changes...';
        feedbackStatus.style.color = 'rgba(255,255,255,0.5)';
        inlineProgressEl.classList.add('active');
        inlineBodyEl.classList.add('updating');
        document.querySelectorAll('.inline-feedback-chip').forEach(function(c) { c.disabled = true; });

        try {
            pState.refinementCount++;

            if (pState.currentConfig) {
                // Template path: delta JSON refinement
                var text = await callGemini(buildRefinementPromptNew(pState.currentConfig, request), { maxOutputTokens: 1500 });
                var delta = extractJson(text);
                if (delta) {
                    pState.currentConfig = deepMerge(pState.currentConfig, delta);
                    pState.currentHtml = mergeTemplate(pState.currentConfig);
                } else {
                    throw new Error('Delta parse failed');
                }
            } else {
                // Legacy path: full HTML refinement
                var text = await callGemini(
                    'Here is a business website HTML:\n\n' + pState.currentHtml + '\n\nUSER REQUEST: "' + request + '"\n\nModify the HTML. Output ONLY the complete modified HTML.',
                    { maxOutputTokens: 16000 }
                );
                var html = extractHtml(text);
                if (!html) throw new Error('No HTML');
                pState.currentHtml = html;
            }

            saveState();
            inlineIframeEl.srcdoc = pState.currentHtml;
            inlineProgressEl.classList.remove('active');
            inlineBodyEl.classList.remove('updating');
            feedbackStatus.textContent = 'Changes applied!';
            feedbackStatus.style.color = '#3ea878';
            feedbackInput.value = '';
            setTimeout(function() { feedbackStatus.textContent = ''; }, 3000);
        } catch(err) {
            inlineProgressEl.classList.remove('active');
            inlineBodyEl.classList.remove('updating');
            feedbackStatus.textContent = 'Something went wrong. Try again.';
            feedbackStatus.style.color = '#e8613a';
            pState.refinementCount--;
            console.error(err);
        } finally {
            feedbackSendBtn.disabled = false;
            document.querySelectorAll('.inline-feedback-chip').forEach(function(c) { c.disabled = false; });
        }
    }

    function updateCounter() {
        var limit = getLimit();
        var remaining = limit - pState.refinementCount;
        if (remaining < 0) remaining = 0;
        if (pState.trialStarted) {
            counterEl.textContent = 'Unlimited refinements (trial active)';
        } else if (pState.email) {
            counterEl.textContent = remaining + ' refinement' + (remaining !== 1 ? 's' : '') + ' remaining';
        } else {
            counterEl.textContent = remaining + ' free refinement' + (remaining !== 1 ? 's' : '') + ' remaining';
        }
    }

    function getLimit() {
        if (pState.trialStarted) return 9999;
        if (pState.email) return EMAIL_REFINEMENTS;
        return FREE_REFINEMENTS;
    }

    function addChat(role, text) {
        var div = document.createElement('div');
        div.className = 'pchat-msg ' + role;
        div.textContent = text;
        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // ── Refinement ──
    async function refine(request) {
        if (pState.refinementCount >= getLimit()) {
            if (!pState.email) {
                document.getElementById('emailModal').classList.add('active');
            } else if (!pState.trialStarted) {
                document.getElementById('publishModal').classList.add('active');
            }
            return;
        }

        pState.refinementCount++;
        updateCounter();
        addChat('user', request);
        iframeLoading.classList.add('active');
        sendBtn.disabled = true;

        try {
            if (pState.currentConfig) {
                var text = await callGemini(buildRefinementPromptNew(pState.currentConfig, request), { maxOutputTokens: 1500 });
                var delta = extractJson(text);
                if (delta) {
                    pState.currentConfig = deepMerge(pState.currentConfig, delta);
                    pState.currentHtml = mergeTemplate(pState.currentConfig);
                } else {
                    throw new Error('Delta parse failed');
                }
            } else {
                var text = await callGemini(
                    'Here is a business website HTML:\n\n' + pState.currentHtml + '\n\nUSER REQUEST: "' + request + '"\n\nModify the HTML. Output ONLY the complete modified HTML.',
                    { maxOutputTokens: 16000 }
                );
                var html = extractHtml(text);
                if (!html) throw new Error('No HTML');
                pState.currentHtml = html;
            }
            saveState();
            iframeEl.srcdoc = html;
            iframeLoading.classList.remove('active');
            sendBtn.disabled = false;
            addChat('assistant', 'Updated! Check out the changes.');

            // Check if next refinement would hit wall
            if (pState.refinementCount >= getLimit() && !pState.trialStarted) {
                if (!pState.email) {
                    setTimeout(function() {
                        addChat('assistant', 'You\'ve used your free refinements. Enter your email to keep going!');
                    }, 1000);
                } else {
                    setTimeout(function() {
                        addChat('assistant', 'You\'ve used all your refinements. Publish your site to unlock unlimited changes!');
                    }, 1000);
                }
            }
        } catch(err) {
            iframeLoading.classList.remove('active');
            sendBtn.disabled = false;
            addChat('assistant', 'Sorry, that didn\'t work. Please try again.');
            pState.refinementCount--;
            updateCounter();
            console.error(err);
        }
    }

    sendBtn.addEventListener('click', function() {
        var val = chatInput.value.trim();
        if (!val) return;
        chatInput.value = '';
        refine(val);
    });

    chatInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendBtn.click();
        }
    });

    // ── Device toggle ──
    document.querySelectorAll('.preview-device-btn').forEach(function(btn) {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.preview-device-btn').forEach(function(b) { b.classList.remove('active'); });
            btn.classList.add('active');
            var device = btn.getAttribute('data-device');
            frameEl.className = 'preview-device-frame' + (device !== 'mobile' ? ' ' + device : '');
        });
    });

    // ── Back button ──
    document.getElementById('previewBack').addEventListener('click', hidePreview);

    // ── Mobile chat toggle ──
    document.getElementById('previewChatToggle').addEventListener('click', function() {
        document.getElementById('previewChatPanel').classList.toggle('expanded');
    });

    // ── Download HTML ──
    document.getElementById('downloadHtmlBtn').addEventListener('click', function() {
        if (!pState.currentHtml) return;
        var blob = new Blob([pState.currentHtml], { type: 'text/html' });
        var a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'my-website.html';
        a.click();
    });

    // ── Publish button ──
    var publishBtnEl = document.getElementById('publishBtn');
    publishBtnEl.addEventListener('click', function() {
        // Pre-fill email if already captured
        if (pState.email) {
            document.getElementById('publishEmail').value = pState.email;
            document.getElementById('publishEmailGroup').style.display = 'none';
        }
        document.getElementById('publishModal').classList.add('active');
    });

    // Update publish button text if already published
    function updatePublishBtn() {
        if (pState.publishedSlug) {
            publishBtnEl.innerHTML = 'Update Site <svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
        }
    }

    // ── Email Capture Modal ──
    document.getElementById('emailCaptureForm').addEventListener('submit', function(e) {
        e.preventDefault();
        var email = document.getElementById('captureEmail').value.trim();
        if (!email) return;
        pState.email = email;
        saveState();
        document.getElementById('emailModal').classList.remove('active');
        updateCounter();
        addChat('assistant', 'Email saved! You have ' + (EMAIL_REFINEMENTS - pState.refinementCount) + ' more refinements.');

        fetch(SB_URL + '/rest/v1/client_leads', {
            method: 'POST',
            headers: { 'apikey': SB_KEY, 'Authorization': 'Bearer ' + SB_KEY, 'Content-Type': 'application/json', 'Prefer': 'return=minimal' },
            body: JSON.stringify({ email: email, what_they_need: pState.businessDesc, source: source + '-preview-email', status: 'preview' })
        }).catch(function() {});
    });
    document.getElementById('emailModalSkip').addEventListener('click', function() {
        document.getElementById('emailModal').classList.remove('active');
    });

    // ── Publish Modal: Auto-generate slug from business name ──
    document.getElementById('publishName').addEventListener('input', function() {
        var slug = this.value.trim().toLowerCase()
            .replace(/[^a-z0-9\s-]/g, '')
            .replace(/\s+/g, '-')
            .replace(/-+/g, '-')
            .replace(/^-|-$/g, '')
            .substring(0, 63);
        document.getElementById('publishSlug').value = slug;
        checkSlugAvailability(slug);
    });

    // Manual slug edits also trigger check
    document.getElementById('publishSlug').addEventListener('input', function() {
        var slug = this.value.toLowerCase().replace(/[^a-z0-9-]/g, '').replace(/-+/g, '-').substring(0, 63);
        this.value = slug;
        checkSlugAvailability(slug);
    });

    var slugCheckTimer = null;
    function checkSlugAvailability(slug) {
        clearTimeout(slugCheckTimer);
        var el = document.getElementById('slugStatus');
        if (slug.length < 2) { el.textContent = ''; return; }
        el.textContent = 'Checking...';
        el.style.color = 'rgba(255,255,255,0.4)';
        slugCheckTimer = setTimeout(async function() {
            try {
                var resp = await fetch('/api/publish-site?check=' + encodeURIComponent(slug));
                var data = await resp.json();
                if (pState.publishedSlug === slug) {
                    el.textContent = 'suitegpt.app/s/' + slug + ' — your current site';
                    el.style.color = '#4a90d9';
                } else if (data.available) {
                    el.textContent = 'suitegpt.app/s/' + slug + ' is available!';
                    el.style.color = '#3ea878';
                } else {
                    el.textContent = 'Already taken. Try another name.';
                    el.style.color = '#e8613a';
                }
            } catch(e) { el.textContent = ''; }
        }, 400);
    }

    // ── Publish Form Submit ──
    document.getElementById('publishForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        var email = pState.email || document.getElementById('publishEmail').value.trim();
        var name = document.getElementById('publishName').value.trim();
        var slug = document.getElementById('publishSlug').value.trim().toLowerCase();
        var btn = document.getElementById('publishSubmitBtn');

        if (!email || !slug) return;
        if (!pState.currentHtml) { alert('No site to publish. Generate a preview first.'); return; }

        btn.disabled = true;
        btn.textContent = 'Publishing...';

        try {
            var isUpdate = pState.publishedSlug === slug;
            var resp = await fetch('/api/publish-site', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    name: name || slug,
                    slug: slug,
                    description: pState.businessDesc || '',
                    code: pState.currentHtml,
                    email: email,
                    source: source + '-publish',
                    update: isUpdate
                })
            });
            var data = await resp.json();
            if (!data.success) throw new Error(data.error || 'Publish failed');

            // Save state
            pState.email = email;
            pState.publishedSlug = slug;
            pState.trialStarted = true; // Unlock unlimited refinements
            saveState();

            // Close publish modal, show success
            document.getElementById('publishModal').classList.remove('active');
            var url = 'https://suitegpt.app/s/' + slug;
            document.getElementById('publishedUrlText').textContent = url;
            document.getElementById('publishedLink').href = url;
            document.getElementById('publishSuccessModal').classList.add('active');

            updateCounter();
            updatePublishBtn();
            addChat('assistant', (isUpdate ? 'Site updated!' : 'Your site is live!') + ' Visit it at ' + url);

        } catch(err) {
            alert(err.message || 'Failed to publish. Please try again.');
        } finally {
            btn.disabled = false;
            btn.textContent = 'Publish';
        }
    });

    document.getElementById('publishModalSkip').addEventListener('click', function() {
        document.getElementById('publishModal').classList.remove('active');
    });
    document.getElementById('successModalClose').addEventListener('click', function() {
        document.getElementById('publishSuccessModal').classList.remove('active');
    });

    // ── Load saved state on init ──
    loadState();
    updatePublishBtn();
})();
</script>
</body>
</html>
