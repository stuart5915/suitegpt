<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuiteGPT | Your Personal App Assistant</title>
    <meta name="description" content="Tell SuiteGPT what you need, and it will recommend the perfect SUITE app for you.">
    <link rel="icon" type="image/png" href="/assets/suite-logo-new.png">

    <!-- Open Graph -->
    <meta property="og:title" content="SuiteGPT | Your Personal App Assistant">
    <meta property="og:description" content="Better than ChatGPT because it gives you real tools, not just information.">
    <meta property="og:image" content="https://getsuite.app/assets/images/1200x630-getsuite.jpg">
    <meta property="og:url" content="https://getsuite.app/suitegpt.html">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/nav.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0a0a0f;
            --bg-card: rgba(255, 255, 255, 0.03);
            --bg-card-hover: rgba(255, 255, 255, 0.06);
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --accent-tertiary: #ec4899;
            --accent-glow: rgba(99, 102, 241, 0.4);
            --text-primary: #f8fafc;
            --text-secondary: rgba(248, 250, 252, 0.7);
            --text-tertiary: rgba(248, 250, 252, 0.4);
            --border-subtle: rgba(255, 255, 255, 0.08);
            --border-hover: rgba(255, 255, 255, 0.15);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated mesh gradient background */
        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
            overflow: hidden;
        }

        .bg-gradient::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background:
                radial-gradient(ellipse 80% 50% at 20% 40%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse 50% 60% at 40% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse 40% 30% at 70% 70%, rgba(34, 211, 238, 0.08) 0%, transparent 50%);
            animation: gradientShift 20s ease-in-out infinite alternate;
        }

        @keyframes gradientShift {
            0% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(2%, -2%) rotate(1deg); }
            66% { transform: translate(-1%, 1%) rotate(-0.5deg); }
            100% { transform: translate(1%, 2%) rotate(0.5deg); }
        }

        /* Subtle grid */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 64px 64px;
            z-index: 1;
            pointer-events: none;
        }

        /* Floating orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            z-index: 0;
            pointer-events: none;
        }

        .orb-1 {
            width: 400px;
            height: 400px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            top: 10%;
            right: 10%;
            animation: float1 25s ease-in-out infinite;
        }

        .orb-2 {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #ec4899, #f43f5e);
            bottom: 20%;
            left: 5%;
            animation: float2 30s ease-in-out infinite;
        }

        .orb-3 {
            width: 250px;
            height: 250px;
            background: linear-gradient(135deg, #22d3ee, #06b6d4);
            top: 60%;
            right: 20%;
            animation: float3 20s ease-in-out infinite;
        }

        @keyframes float1 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-30px, 40px) scale(1.1); }
        }

        @keyframes float2 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(40px, -30px) scale(0.9); }
        }

        @keyframes float3 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-20px, -40px) scale(1.05); }
        }

        /* Main content */
        .main-content {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Hero Section */
        .suitegpt-hero {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 120px 24px 60px;
            text-align: center;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .suitegpt-hero.chat-active {
            flex: 0;
            padding: 100px 24px 24px;
            justify-content: flex-start;
        }

        /* Logo badge */
        .logo-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px 10px 14px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 100px;
            margin-bottom: 32px;
            backdrop-filter: blur(20px);
            animation: fadeInDown 0.6s ease;
        }

        .logo-badge-icon {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .logo-badge span {
            font-weight: 600;
            font-size: 0.9rem;
            background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .suitegpt-hero.chat-active .logo-badge {
            display: none;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            line-height: 1.1;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #fff 0%, rgba(255,255,255,0.8) 50%, #fff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 0.6s ease 0.1s backwards;
        }

        .suitegpt-hero.chat-active .hero-title {
            font-size: clamp(1.5rem, 3vw, 2rem);
            margin-bottom: 16px;
        }

        .hero-subtitle {
            font-size: 1.15rem;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 480px;
            line-height: 1.6;
            animation: fadeInUp 0.6s ease 0.2s backwards;
        }

        .suitegpt-hero.chat-active .hero-subtitle {
            display: none;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Input Container */
        .input-container {
            width: 100%;
            max-width: 680px;
            animation: fadeInUp 0.6s ease 0.3s backwards;
        }

        .chat-input-wrapper {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 8px 8px 8px 24px;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .chat-input-wrapper::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg,
                rgba(99, 102, 241, 0.1) 0%,
                transparent 50%,
                rgba(236, 72, 153, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .chat-input-wrapper:focus-within {
            border-color: var(--accent-primary);
            box-shadow:
                0 0 0 4px rgba(99, 102, 241, 0.1),
                0 20px 40px -10px rgba(0, 0, 0, 0.3);
        }

        .chat-input-wrapper:focus-within::before {
            opacity: 1;
        }

        .chat-input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 1.05rem;
            font-family: inherit;
            color: var(--text-primary);
            outline: none;
            padding: 14px 0;
            position: relative;
            z-index: 1;
        }

        .chat-input::placeholder {
            color: var(--text-tertiary);
        }

        .send-btn {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            border: none;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
            position: relative;
            z-index: 1;
        }

        .send-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
        }

        .send-btn:active:not(:disabled) {
            transform: scale(0.98);
        }

        .send-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .send-btn svg {
            width: 20px;
            height: 20px;
        }

        /* Example Prompts */
        .example-prompts {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 32px;
            max-width: 680px;
            animation: fadeInUp 0.6s ease 0.4s backwards;
        }

        .suitegpt-hero.chat-active .example-prompts {
            display: none;
        }

        .example-prompt {
            padding: 12px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 100px;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .example-prompt:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent-primary);
            color: var(--text-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.15);
        }

        /* Powered by badge */
        .powered-by {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 48px;
            font-size: 0.8rem;
            color: var(--text-tertiary);
            animation: fadeInUp 0.6s ease 0.5s backwards;
        }

        .suitegpt-hero.chat-active .powered-by {
            display: none;
        }

        .powered-by svg {
            width: 16px;
            height: 16px;
            opacity: 0.5;
        }

        /* Chat Container */
        .chat-container {
            max-width: 680px;
            margin: 0 auto;
            padding: 0 24px 40px;
            display: none;
            flex: 1;
        }

        .chat-container.active {
            display: block;
        }

        .chat-messages {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Chat Messages */
        .message {
            display: flex;
            gap: 14px;
            max-width: 90%;
            animation: messageSlide 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(16px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            flex-shrink: 0;
            border: 1px solid var(--border-subtle);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border: none;
        }

        .message.assistant .message-avatar {
            background: var(--bg-card);
        }

        .message-content {
            padding: 16px 20px;
            border-radius: 20px;
            font-size: 0.95rem;
            line-height: 1.65;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            border-bottom-right-radius: 6px;
        }

        .message.assistant .message-content {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-subtle);
            border-bottom-left-radius: 6px;
            backdrop-filter: blur(20px);
        }

        /* App Cards in Chat */
        .app-card-inline {
            display: flex;
            align-items: center;
            gap: 16px;
            background: rgba(99, 102, 241, 0.08);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 16px;
            padding: 16px 20px;
            margin-top: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .app-card-inline:hover {
            background: rgba(99, 102, 241, 0.12);
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.2);
        }

        .app-icon-inline {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .app-info-inline h4 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 3px;
            color: var(--text-primary);
        }

        .app-info-inline p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin: 0;
        }

        .app-arrow {
            margin-left: auto;
            width: 36px;
            height: 36px;
            background: rgba(99, 102, 241, 0.15);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-primary);
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .app-card-inline:hover .app-arrow {
            background: var(--accent-primary);
            color: white;
            transform: translateX(2px);
        }

        /* Loading Indicator */
        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 16px 20px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--text-tertiary);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.15s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.3s;
        }

        @keyframes typingBounce {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        /* Feedback Buttons */
        .feedback-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .feedback-btn {
            padding: 8px 14px;
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            background: transparent;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-tertiary);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .feedback-btn:hover {
            background: var(--bg-card);
            border-color: var(--border-hover);
            color: var(--text-secondary);
        }

        .feedback-btn.active-good {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.3);
            color: #22c55e;
        }

        .feedback-btn.active-bad {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }

        /* Mobile Adjustments */
        @media (max-width: 640px) {
            .suitegpt-hero {
                padding: 100px 16px 40px;
            }

            .hero-title {
                font-size: clamp(2rem, 8vw, 2.5rem);
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .chat-input-wrapper {
                padding: 6px 6px 6px 18px;
                border-radius: 16px;
            }

            .chat-input {
                font-size: 1rem;
                padding: 12px 0;
            }

            .send-btn {
                width: 46px;
                height: 46px;
                border-radius: 12px;
            }

            .example-prompt {
                padding: 10px 16px;
                font-size: 0.85rem;
            }

            .chat-container {
                padding: 0 16px 30px;
            }

            .message {
                max-width: 95%;
            }

            .message-content {
                padding: 14px 16px;
            }

            .orb {
                opacity: 0.3;
            }

            .orb-1 { width: 250px; height: 250px; }
            .orb-2 { width: 200px; height: 200px; }
            .orb-3 { display: none; }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-subtle);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--border-hover);
        }
    </style>
</head>
<body>
    <!-- Background effects -->
    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div class="main-content">
        <nav id="main-nav"></nav>
        <script src="/nav-component.js"></script>

        <!-- Hero Section with Input -->
        <section class="suitegpt-hero" id="heroSection">
            <div class="logo-badge">
                <div class="logo-badge-icon">S</div>
                <span>SuiteGPT</span>
            </div>

            <h1 class="hero-title">What can I help you with?</h1>
            <p class="hero-subtitle">Tell me what you need, and I'll find the perfect tool for you. Real apps, not just answers.</p>

            <div class="input-container">
                <div class="chat-input-wrapper">
                    <input
                        type="text"
                        class="chat-input"
                        id="chatInput"
                        placeholder="Ask anything..."
                        autocomplete="off"
                    >
                    <button class="send-btn" id="sendBtn" disabled>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M5 12h14M12 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="example-prompts" id="examplePrompts">
                <button class="example-prompt" data-prompt="I want to lose weight but hate tracking calories">Lose weight without calorie counting</button>
                <button class="example-prompt" data-prompt="Help me build a morning routine">Build a morning routine</button>
                <button class="example-prompt" data-prompt="I have back pain from sitting all day">Fix my back pain</button>
                <button class="example-prompt" data-prompt="I want to learn about DeFi and crypto">Learn about DeFi</button>
                <button class="example-prompt" data-prompt="I need to track my nutrition better">Track my nutrition</button>
            </div>

            <div class="powered-by">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                Powered by SUITE ecosystem
            </div>
        </section>

        <!-- Chat Container -->
        <div class="chat-container" id="chatContainer">
            <div class="chat-messages" id="chatMessages"></div>
        </div>
    </div>

    <script>
        // SUITE Apps Catalog
        const SUITE_APPS = [
            {
                slug: 'foodvitals',
                name: 'FoodVitals',
                description: 'Weekly meal tracking + AI nutrition insights',
                icon: 'ü•ó',
                iconBg: 'linear-gradient(135deg, #22c55e, #16a34a)',
                keywords: ['nutrition', 'diet', 'calories', 'food', 'meals', 'weight', 'eating', 'healthy', 'track meals', 'lose weight'],
                url: '/apps-subpages/physio-ai.html'
            },
            {
                slug: 'trueform',
                name: 'TrueForm AI',
                description: 'AI physiotherapy and exercise guidance',
                icon: 'üèÉ',
                iconBg: 'linear-gradient(135deg, #3b82f6, #1d4ed8)',
                keywords: ['back pain', 'posture', 'stretching', 'physical therapy', 'exercise', 'mobility', 'pain', 'sitting', 'desk', 'injury'],
                url: '/apps-subpages/physio-ai.html'
            },
            {
                slug: 'opticrep',
                name: 'OpticRep',
                description: 'AI workout trainer with form analysis',
                icon: 'üí™',
                iconBg: 'linear-gradient(135deg, #f97316, #ea580c)',
                keywords: ['workout', 'gym', 'fitness', 'exercise', 'training', 'muscle', 'strength', 'form'],
                url: '/suite-shell.html'
            },
            {
                slug: 'cheshbon',
                name: 'Cheshbon',
                description: 'Financial reflection and tracking app',
                icon: 'üí∞',
                iconBg: 'linear-gradient(135deg, #eab308, #ca8a04)',
                keywords: ['money', 'finance', 'budget', 'spending', 'savings', 'track spending', 'financial'],
                url: '/suite-shell.html'
            },
            {
                slug: 'remcast',
                name: 'RemCast',
                description: 'Smart reminder and notification system',
                icon: 'üîî',
                iconBg: 'linear-gradient(135deg, #8b5cf6, #7c3aed)',
                keywords: ['reminder', 'routine', 'morning', 'habits', 'schedule', 'notification', 'daily'],
                url: '/suite-shell.html'
            },
            {
                slug: 'defi-knowledge',
                name: 'DeFi Knowledge',
                description: 'Learn DeFi concepts and strategies',
                icon: 'üìö',
                iconBg: 'linear-gradient(135deg, #06b6d4, #0891b2)',
                keywords: ['defi', 'crypto', 'blockchain', 'learn', 'education', 'yield', 'trading'],
                url: '/suite-shell.html'
            }
        ];

        // Supabase config
        const SUPABASE_URL = 'https://rdsmdywbdiskxknluiym.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkc21keXdiZGlza3hrbmx1aXltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3ODk3MTgsImV4cCI6MjA4MzM2NTcxOH0.DcLpWs8Lf1s4Flf54J5LubokSYrd7h-XvI_X0jj6bLM';

        // DOM Elements
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const heroSection = document.getElementById('heroSection');
        const chatContainer = document.getElementById('chatContainer');
        const chatMessages = document.getElementById('chatMessages');
        const examplePrompts = document.querySelectorAll('.example-prompt');

        // Chat state
        let isLoading = false;
        let conversationHistory = [];

        // Enable/disable send button based on input
        chatInput.addEventListener('input', () => {
            sendBtn.disabled = !chatInput.value.trim() || isLoading;
        });

        // Send on Enter
        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey && !sendBtn.disabled) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Send button click
        sendBtn.addEventListener('click', sendMessage);

        // Example prompt clicks
        examplePrompts.forEach(btn => {
            btn.addEventListener('click', () => {
                chatInput.value = btn.dataset.prompt;
                sendBtn.disabled = false;
                sendMessage();
            });
        });

        // Add message to chat
        function addMessage(content, role, appRecommendation = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;

            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = role === 'user' ? 'üë§' : '‚ú®';

            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = content.replace(/\n/g, '<br>');

            // Add app card if recommended
            if (appRecommendation) {
                const app = SUITE_APPS.find(a => a.slug === appRecommendation) ||
                            SUITE_APPS.find(a => a.name.toLowerCase().includes(appRecommendation.toLowerCase()));

                if (app) {
                    const appCard = document.createElement('a');
                    appCard.href = app.url;
                    appCard.className = 'app-card-inline';
                    appCard.innerHTML = `
                        <div class="app-icon-inline" style="background: ${app.iconBg}">${app.icon}</div>
                        <div class="app-info-inline">
                            <h4>${app.name}</h4>
                            <p>${app.description}</p>
                        </div>
                        <span class="app-arrow">‚Üí</span>
                    `;
                    contentDiv.appendChild(appCard);
                }
            }

            // Add feedback buttons for assistant messages
            if (role === 'assistant') {
                const feedbackDiv = document.createElement('div');
                feedbackDiv.className = 'feedback-buttons';
                feedbackDiv.innerHTML = `
                    <button class="feedback-btn" data-feedback="good">üëç Helpful</button>
                    <button class="feedback-btn" data-feedback="bad">üëé Not helpful</button>
                `;
                contentDiv.appendChild(feedbackDiv);

                feedbackDiv.querySelectorAll('.feedback-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const feedback = btn.dataset.feedback;
                        feedbackDiv.querySelectorAll('.feedback-btn').forEach(b => {
                            b.classList.remove('active-good', 'active-bad');
                        });
                        btn.classList.add(feedback === 'good' ? 'active-good' : 'active-bad');
                        console.log('Feedback:', feedback);
                    });
                });
            }

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Add typing indicator
        function addTypingIndicator() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message assistant';
            messageDiv.id = 'typingIndicator';

            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = '‚ú®';

            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = `
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        // Send message to backend
        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message || isLoading) return;

            isLoading = true;
            sendBtn.disabled = true;
            chatInput.value = '';
            heroSection.classList.add('chat-active');
            chatContainer.classList.add('active');

            addMessage(message, 'user');
            conversationHistory.push({ role: 'user', content: message });

            addTypingIndicator();

            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/suitegpt-chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        message: message,
                        history: conversationHistory.slice(-10)
                    })
                });

                removeTypingIndicator();

                if (!response.ok) {
                    throw new Error('Failed to get response');
                }

                const data = await response.json();
                addMessage(data.response, 'assistant', data.recommendedApp);
                conversationHistory.push({ role: 'assistant', content: data.response });

            } catch (error) {
                console.error('Chat error:', error);
                removeTypingIndicator();
                const localResponse = getLocalResponse(message);
                addMessage(localResponse.response, 'assistant', localResponse.recommendedApp);
                conversationHistory.push({ role: 'assistant', content: localResponse.response });
            }

            isLoading = false;
            sendBtn.disabled = !chatInput.value.trim();
            chatInput.focus();
        }

        // Fallback local response
        function getLocalResponse(message) {
            const lowerMessage = message.toLowerCase();

            for (const app of SUITE_APPS) {
                const matchScore = app.keywords.filter(kw => lowerMessage.includes(kw)).length;
                if (matchScore > 0) {
                    return {
                        response: `I can help with that!\n\n${app.name} is perfect for what you're looking for. ${app.description}.`,
                        recommendedApp: app.slug
                    };
                }
            }

            return {
                response: "I don't have a specific tool for that yet, but the SUITE ecosystem is growing! Check out our Apps page to see what's available, or let me know more about what you're trying to accomplish.",
                recommendedApp: null
            };
        }
    </script>
</body>
</html>
