<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuiteGPT | Your Personal App Assistant</title>
    <meta name="description" content="Tell SuiteGPT what you need, and it will recommend the perfect SUITE app for you.">
    <link rel="icon" type="image/png" href="/assets/suite-logo-new.png">

    <!-- Open Graph -->
    <meta property="og:title" content="SuiteGPT | Your Personal App Assistant">
    <meta property="og:description" content="Better than ChatGPT because it gives you real tools, not just information.">
    <meta property="og:image" content="https://getsuite.app/assets/images/1200x630-getsuite.jpg">
    <meta property="og:url" content="https://getsuite.app/suitegpt.html">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/nav.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0a0a0f;
            --bg-card: rgba(255, 255, 255, 0.03);
            --bg-card-hover: rgba(255, 255, 255, 0.06);
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --accent-tertiary: #ec4899;
            --accent-glow: rgba(99, 102, 241, 0.4);
            --text-primary: #f8fafc;
            --text-secondary: rgba(248, 250, 252, 0.7);
            --text-tertiary: rgba(248, 250, 252, 0.4);
            --border-subtle: rgba(255, 255, 255, 0.08);
            --border-hover: rgba(255, 255, 255, 0.15);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated mesh gradient background */
        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
            overflow: hidden;
        }

        .bg-gradient::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background:
                radial-gradient(ellipse 80% 50% at 20% 40%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse 50% 60% at 40% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse 40% 30% at 70% 70%, rgba(34, 211, 238, 0.08) 0%, transparent 50%);
            animation: gradientShift 20s ease-in-out infinite alternate;
        }

        @keyframes gradientShift {
            0% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(2%, -2%) rotate(1deg); }
            66% { transform: translate(-1%, 1%) rotate(-0.5deg); }
            100% { transform: translate(1%, 2%) rotate(0.5deg); }
        }

        /* Subtle grid */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 64px 64px;
            z-index: 1;
            pointer-events: none;
        }

        /* Floating orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            z-index: 0;
            pointer-events: none;
        }

        .orb-1 {
            width: 400px;
            height: 400px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            top: 10%;
            right: 10%;
            animation: float1 25s ease-in-out infinite;
        }

        .orb-2 {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #ec4899, #f43f5e);
            bottom: 20%;
            left: 5%;
            animation: float2 30s ease-in-out infinite;
        }

        .orb-3 {
            width: 250px;
            height: 250px;
            background: linear-gradient(135deg, #22d3ee, #06b6d4);
            top: 60%;
            right: 20%;
            animation: float3 20s ease-in-out infinite;
        }

        @keyframes float1 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-30px, 40px) scale(1.1); }
        }

        @keyframes float2 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(40px, -30px) scale(0.9); }
        }

        @keyframes float3 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-20px, -40px) scale(1.05); }
        }

        /* Main content */
        .main-content {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Hero Section */
        .suitegpt-hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 120px 24px 40px;
            text-align: center;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .suitegpt-hero.chat-active {
            padding: 100px 24px 24px;
            justify-content: flex-start;
        }

        /* Logo badge */
        .logo-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px 10px 14px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 100px;
            margin-bottom: 32px;
            backdrop-filter: blur(20px);
            animation: fadeInDown 0.6s ease;
        }

        .logo-badge-icon {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .logo-badge span {
            font-weight: 600;
            font-size: 0.9rem;
            background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .suitegpt-hero.chat-active .logo-badge {
            display: none;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            line-height: 1.1;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #fff 0%, rgba(255,255,255,0.8) 50%, #fff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 0.6s ease 0.1s backwards;
        }

        .suitegpt-hero.chat-active .hero-title {
            font-size: clamp(1.5rem, 3vw, 2rem);
            margin-bottom: 16px;
        }

        .hero-subtitle {
            font-size: 1.15rem;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 480px;
            line-height: 1.6;
            animation: fadeInUp 0.6s ease 0.2s backwards;
        }

        .suitegpt-hero.chat-active .hero-subtitle,
        .suitegpt-hero.chat-active .powered-by {
            display: none;
        }

        .suitegpt-hero.chat-active .browse-section {
            margin-top: 32px;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Input Container */
        .input-container {
            width: 100%;
            max-width: 680px;
            animation: fadeInUp 0.6s ease 0.3s backwards;
        }

        .chat-input-wrapper {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 8px 8px 8px 24px;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .chat-input-wrapper::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg,
                rgba(99, 102, 241, 0.1) 0%,
                transparent 50%,
                rgba(236, 72, 153, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .chat-input-wrapper:focus-within {
            border-color: var(--accent-primary);
            box-shadow:
                0 0 0 4px rgba(99, 102, 241, 0.1),
                0 20px 40px -10px rgba(0, 0, 0, 0.3);
        }

        .chat-input-wrapper:focus-within::before {
            opacity: 1;
        }

        .chat-input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 1.05rem;
            font-family: inherit;
            color: var(--text-primary);
            outline: none;
            padding: 14px 0;
            position: relative;
            z-index: 1;
        }

        .chat-input::placeholder {
            color: var(--text-tertiary);
        }

        .send-btn {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            border: none;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
            position: relative;
            z-index: 1;
        }

        .send-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
        }

        .send-btn:active:not(:disabled) {
            transform: scale(0.98);
        }

        .send-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .send-btn svg {
            width: 20px;
            height: 20px;
        }

        /* Browse Section */
        .browse-section {
            width: 100%;
            max-width: 900px;
            margin-top: 48px;
            animation: fadeInUp 0.6s ease 0.4s backwards;
        }

        .browse-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .browse-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .browse-title span {
            color: var(--text-tertiary);
            font-weight: 400;
        }

        /* Category Pills */
        .category-pills {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 24px;
        }

        .category-pill {
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 100px;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .category-pill:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-hover);
        }

        .category-pill.active {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: white;
        }

        .category-pill .count {
            margin-left: 6px;
            opacity: 0.6;
        }

        /* Use Cases Grid */
        .use-cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }

        .use-case-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .use-case-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .use-case-card:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-hover);
            transform: translateY(-2px);
        }

        .use-case-card:hover::before {
            opacity: 1;
        }

        .use-case-query {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .use-case-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .use-case-app {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .use-case-app-icon {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .use-case-app-name {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .use-case-helpful {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .use-case-helpful svg {
            width: 14px;
            height: 14px;
        }

        /* Loading skeleton */
        .use-case-card.skeleton {
            pointer-events: none;
        }

        .skeleton-text {
            background: linear-gradient(90deg, var(--bg-card) 25%, var(--bg-card-hover) 50%, var(--bg-card) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Powered by badge */
        .powered-by {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 48px;
            font-size: 0.8rem;
            color: var(--text-tertiary);
        }

        .powered-by svg {
            width: 16px;
            height: 16px;
            opacity: 0.5;
        }

        /* Chat Container */
        .chat-container {
            width: 100%;
            max-width: 680px;
            margin: 32px auto 0;
            padding: 0 24px 40px;
            display: none;
        }

        .chat-container.active {
            display: block;
        }

        /* When chat is active, add some separation */
        .suitegpt-hero.chat-active .browse-section {
            border-top: 1px solid var(--border-subtle);
            padding-top: 32px;
        }

        .chat-messages {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Chat Messages */
        .message {
            display: flex;
            gap: 14px;
            max-width: 90%;
            animation: messageSlide 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            flex-shrink: 0;
            border: 1px solid var(--border-subtle);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border: none;
        }

        .message.assistant .message-avatar {
            background: var(--bg-card);
        }

        .message-content {
            padding: 16px 20px;
            border-radius: 20px;
            font-size: 0.95rem;
            line-height: 1.65;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            border-bottom-right-radius: 6px;
        }

        .message.assistant .message-content {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-subtle);
            border-bottom-left-radius: 6px;
            backdrop-filter: blur(20px);
        }

        /* App Cards in Chat */
        .app-card-inline {
            display: flex;
            align-items: center;
            gap: 16px;
            background: rgba(99, 102, 241, 0.08);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 16px;
            padding: 16px 20px;
            margin-top: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .app-card-inline:hover {
            background: rgba(99, 102, 241, 0.12);
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.2);
        }

        .app-icon-inline {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .app-info-inline h4 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 3px;
            color: var(--text-primary);
        }

        .app-info-inline p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin: 0;
        }

        .app-arrow {
            margin-left: auto;
            width: 36px;
            height: 36px;
            background: rgba(99, 102, 241, 0.15);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-primary);
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .app-card-inline:hover .app-arrow {
            background: var(--accent-primary);
            color: white;
            transform: translateX(2px);
        }

        /* Loading Indicator */
        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 16px 20px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--text-tertiary);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) { animation-delay: 0.15s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.3s; }

        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-10px); opacity: 1; }
        }

        /* Feedback Buttons */
        .feedback-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .feedback-btn {
            padding: 8px 14px;
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            background: transparent;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-tertiary);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .feedback-btn:hover {
            background: var(--bg-card);
            border-color: var(--border-hover);
            color: var(--text-secondary);
        }

        .feedback-btn.active-good {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.3);
            color: #22c55e;
        }

        .feedback-btn.active-bad {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }

        /* Mobile Adjustments */
        @media (max-width: 640px) {
            .suitegpt-hero {
                padding: 100px 16px 40px;
            }

            .hero-title {
                font-size: clamp(2rem, 8vw, 2.5rem);
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .chat-input-wrapper {
                padding: 6px 6px 6px 18px;
                border-radius: 16px;
            }

            .chat-input {
                font-size: 1rem;
                padding: 12px 0;
            }

            .send-btn {
                width: 46px;
                height: 46px;
                border-radius: 12px;
            }

            .browse-section {
                margin-top: 32px;
            }

            .category-pills {
                justify-content: flex-start;
                overflow-x: auto;
                flex-wrap: nowrap;
                padding-bottom: 8px;
                -webkit-overflow-scrolling: touch;
            }

            .category-pill {
                flex-shrink: 0;
            }

            .use-cases-grid {
                grid-template-columns: 1fr;
            }

            .chat-container {
                padding: 0 16px 30px;
            }

            .message {
                max-width: 95%;
            }

            .message-content {
                padding: 14px 16px;
            }

            .orb {
                opacity: 0.3;
            }

            .orb-1 { width: 250px; height: 250px; }
            .orb-2 { width: 200px; height: 200px; }
            .orb-3 { display: none; }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-subtle); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--border-hover); }
    </style>
</head>
<body>
    <!-- Background effects -->
    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div class="main-content">
        <nav id="main-nav"></nav>
        <script src="/nav-component.js"></script>

        <!-- Hero Section with Input -->
        <section class="suitegpt-hero" id="heroSection">
            <div class="logo-badge">
                <div class="logo-badge-icon">S</div>
                <span>SuiteGPT</span>
            </div>

            <h1 class="hero-title">What can I help you with?</h1>
            <p class="hero-subtitle">Tell me what you need, and I'll find the perfect tool for you. Real apps, not just answers.</p>

            <div class="input-container">
                <div class="chat-input-wrapper">
                    <input
                        type="text"
                        class="chat-input"
                        id="chatInput"
                        placeholder="Ask anything..."
                        autocomplete="off"
                    >
                    <button class="send-btn" id="sendBtn" disabled>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M5 12h14M12 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Chat Container (appears between input and browse) -->
            <div class="chat-container" id="chatContainer">
                <div class="chat-messages" id="chatMessages"></div>
            </div>

            <!-- Browse Section -->
            <div class="browse-section" id="browseSection">
                <div class="browse-header">
                    <div class="browse-title">Browse use cases <span id="useCaseCount"></span></div>
                </div>

                <div class="category-pills" id="categoryPills">
                    <button class="category-pill active" data-category="all">All</button>
                    <button class="category-pill" data-category="health">Health</button>
                    <button class="category-pill" data-category="fitness">Fitness</button>
                    <button class="category-pill" data-category="finance">Finance</button>
                    <button class="category-pill" data-category="productivity">Productivity</button>
                    <button class="category-pill" data-category="learning">Learning</button>
                </div>

                <div class="use-cases-grid" id="useCasesGrid">
                    <!-- Loading skeletons -->
                    <div class="use-case-card skeleton">
                        <div class="skeleton-text" style="height: 20px; width: 90%; margin-bottom: 8px;"></div>
                        <div class="skeleton-text" style="height: 20px; width: 70%; margin-bottom: 16px;"></div>
                        <div class="skeleton-text" style="height: 16px; width: 40%;"></div>
                    </div>
                    <div class="use-case-card skeleton">
                        <div class="skeleton-text" style="height: 20px; width: 85%; margin-bottom: 8px;"></div>
                        <div class="skeleton-text" style="height: 20px; width: 60%; margin-bottom: 16px;"></div>
                        <div class="skeleton-text" style="height: 16px; width: 45%;"></div>
                    </div>
                    <div class="use-case-card skeleton">
                        <div class="skeleton-text" style="height: 20px; width: 80%; margin-bottom: 8px;"></div>
                        <div class="skeleton-text" style="height: 20px; width: 65%; margin-bottom: 16px;"></div>
                        <div class="skeleton-text" style="height: 16px; width: 35%;"></div>
                    </div>
                </div>
            </div>

            <div class="powered-by">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                Powered by SUITE ecosystem
            </div>
        </section>
    </div>

    <script>
        // SUITE Apps Catalog
        const SUITE_APPS = {
            'foodvitals': {
                name: 'FoodVitals',
                description: 'Weekly meal tracking + AI nutrition insights',
                icon: 'ü•ó',
                iconBg: 'linear-gradient(135deg, #22c55e, #16a34a)',
                url: '/apps-subpages/physio-ai.html'
            },
            'trueform': {
                name: 'TrueForm AI',
                description: 'AI physiotherapy and exercise guidance',
                icon: 'üèÉ',
                iconBg: 'linear-gradient(135deg, #3b82f6, #1d4ed8)',
                url: '/apps-subpages/physio-ai.html'
            },
            'opticrep': {
                name: 'OpticRep',
                description: 'AI workout trainer with form analysis',
                icon: 'üí™',
                iconBg: 'linear-gradient(135deg, #f97316, #ea580c)',
                url: '/suite-shell.html'
            },
            'cheshbon': {
                name: 'Cheshbon',
                description: 'Financial reflection and tracking app',
                icon: 'üí∞',
                iconBg: 'linear-gradient(135deg, #eab308, #ca8a04)',
                url: '/suite-shell.html'
            },
            'remcast': {
                name: 'RemCast',
                description: 'Smart reminder and notification system',
                icon: 'üîî',
                iconBg: 'linear-gradient(135deg, #8b5cf6, #7c3aed)',
                url: '/suite-shell.html'
            },
            'defi-knowledge': {
                name: 'DeFi Knowledge',
                description: 'Learn DeFi concepts and strategies',
                icon: 'üìö',
                iconBg: 'linear-gradient(135deg, #06b6d4, #0891b2)',
                url: '/suite-shell.html'
            }
        };

        // Supabase config
        const SUPABASE_URL = 'https://rdsmdywbdiskxknluiym.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkc21keXdiZGlza3hrbmx1aXltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3ODk3MTgsImV4cCI6MjA4MzM2NTcxOH0.DcLpWs8Lf1s4Flf54J5LubokSYrd7h-XvI_X0jj6bLM';

        // DOM Elements
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const heroSection = document.getElementById('heroSection');
        const chatContainer = document.getElementById('chatContainer');
        const chatMessages = document.getElementById('chatMessages');
        const useCasesGrid = document.getElementById('useCasesGrid');
        const categoryPills = document.querySelectorAll('.category-pill');
        const useCaseCount = document.getElementById('useCaseCount');

        // State
        let isLoading = false;
        let conversationHistory = [];
        let useCases = [];
        let currentCategory = 'all';

        // Load use cases from Supabase
        async function loadUseCases() {
            try {
                const response = await fetch(
                    `${SUPABASE_URL}/rest/v1/use_cases?is_visible=eq.true&order=helpful_count.desc`,
                    {
                        headers: {
                            'apikey': SUPABASE_ANON_KEY,
                            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                        }
                    }
                );

                if (response.ok) {
                    useCases = await response.json();
                    renderUseCases();
                } else {
                    // Fallback to hardcoded examples if table doesn't exist yet
                    useCases = getHardcodedUseCases();
                    renderUseCases();
                }
            } catch (error) {
                console.error('Failed to load use cases:', error);
                useCases = getHardcodedUseCases();
                renderUseCases();
            }
        }

        // Hardcoded fallback
        function getHardcodedUseCases() {
            return [
                { query: "I want to lose weight but hate tracking calories", response: "FoodVitals takes a different approach...", recommended_app: "foodvitals", category: "health", helpful_count: 42 },
                { query: "I have back pain from sitting all day", response: "TrueForm AI has guided stretching routines...", recommended_app: "trueform", category: "fitness", helpful_count: 56 },
                { query: "Help me build a morning routine", response: "RemCast can help you build and stick to one...", recommended_app: "remcast", category: "productivity", helpful_count: 48 },
                { query: "I want to learn about DeFi and crypto", response: "DeFi Knowledge breaks down concepts...", recommended_app: "defi-knowledge", category: "learning", helpful_count: 45 },
                { query: "My posture is terrible and I want to fix it", response: "TrueForm AI can assess your movement...", recommended_app: "trueform", category: "fitness", helpful_count: 44 },
                { query: "I want to get stronger but don't know where to start", response: "OpticRep is your AI workout trainer...", recommended_app: "opticrep", category: "fitness", helpful_count: 41 },
                { query: "I keep forgetting important tasks", response: "RemCast is designed exactly for this...", recommended_app: "remcast", category: "productivity", helpful_count: 39 },
                { query: "I need to track my nutrition better", response: "FoodVitals makes nutrition tracking simple...", recommended_app: "foodvitals", category: "health", helpful_count: 38 },
                { query: "I want to get better with money", response: "Cheshbon is a financial reflection app...", recommended_app: "cheshbon", category: "finance", helpful_count: 37 }
            ];
        }

        // Render use cases
        function renderUseCases() {
            const filtered = currentCategory === 'all'
                ? useCases
                : useCases.filter(uc => uc.category === currentCategory);

            useCaseCount.textContent = `(${filtered.length})`;

            if (filtered.length === 0) {
                useCasesGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-tertiary);">
                        No use cases in this category yet.
                    </div>
                `;
                return;
            }

            useCasesGrid.innerHTML = filtered.map(uc => {
                const app = SUITE_APPS[uc.recommended_app] || {};
                return `
                    <div class="use-case-card" data-query="${encodeURIComponent(uc.query)}" data-response="${encodeURIComponent(uc.response)}" data-app="${uc.recommended_app}">
                        <div class="use-case-query">"${uc.query}"</div>
                        <div class="use-case-meta">
                            <div class="use-case-app">
                                <div class="use-case-app-icon" style="background: ${app.iconBg || 'var(--bg-card)'}">${app.icon || 'üì±'}</div>
                                <span class="use-case-app-name">${app.name || 'SUITE App'}</span>
                            </div>
                            <div class="use-case-helpful">
                                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>
                                ${uc.helpful_count || 0}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Add click handlers
            document.querySelectorAll('.use-case-card').forEach(card => {
                card.addEventListener('click', () => {
                    const query = decodeURIComponent(card.dataset.query);
                    const response = decodeURIComponent(card.dataset.response);
                    const app = card.dataset.app;

                    // Simulate sending this query
                    heroSection.classList.add('chat-active');
                    chatContainer.classList.add('active');
                    addMessage(query, 'user');
                    addMessage(response, 'assistant', app);
                    conversationHistory.push({ role: 'user', content: query });
                    conversationHistory.push({ role: 'assistant', content: response });

                    // Increment view count (fire and forget)
                    incrementViews(card.dataset.query);
                });
            });
        }

        // Category filtering
        categoryPills.forEach(pill => {
            pill.addEventListener('click', () => {
                categoryPills.forEach(p => p.classList.remove('active'));
                pill.classList.add('active');
                currentCategory = pill.dataset.category;
                renderUseCases();
            });
        });

        // Increment view count
        async function incrementViews(query) {
            try {
                // This would need an edge function to handle safely
                // For now, just log it
                console.log('View:', query);
            } catch (e) {}
        }

        // Enable/disable send button
        chatInput.addEventListener('input', () => {
            sendBtn.disabled = !chatInput.value.trim() || isLoading;
        });

        // Send on Enter
        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey && !sendBtn.disabled) {
                e.preventDefault();
                sendMessage();
            }
        });

        sendBtn.addEventListener('click', sendMessage);

        // Add message to chat
        function addMessage(content, role, appRecommendation = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;

            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = role === 'user' ? 'üë§' : '‚ú®';

            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = content.replace(/\n/g, '<br>');

            if (appRecommendation && SUITE_APPS[appRecommendation]) {
                const app = SUITE_APPS[appRecommendation];
                const appCard = document.createElement('a');
                appCard.href = app.url;
                appCard.className = 'app-card-inline';
                appCard.innerHTML = `
                    <div class="app-icon-inline" style="background: ${app.iconBg}">${app.icon}</div>
                    <div class="app-info-inline">
                        <h4>${app.name}</h4>
                        <p>${app.description}</p>
                    </div>
                    <span class="app-arrow">‚Üí</span>
                `;
                contentDiv.appendChild(appCard);
            }

            if (role === 'assistant') {
                const feedbackDiv = document.createElement('div');
                feedbackDiv.className = 'feedback-buttons';
                feedbackDiv.innerHTML = `
                    <button class="feedback-btn" data-feedback="good">üëç Helpful</button>
                    <button class="feedback-btn" data-feedback="bad">üëé Not helpful</button>
                `;
                contentDiv.appendChild(feedbackDiv);

                feedbackDiv.querySelectorAll('.feedback-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        feedbackDiv.querySelectorAll('.feedback-btn').forEach(b => b.classList.remove('active-good', 'active-bad'));
                        btn.classList.add(btn.dataset.feedback === 'good' ? 'active-good' : 'active-bad');
                    });
                });
            }

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addTypingIndicator() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message assistant';
            messageDiv.id = 'typingIndicator';

            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = '‚ú®';

            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>';

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function removeTypingIndicator() {
            document.getElementById('typingIndicator')?.remove();
        }

        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message || isLoading) return;

            isLoading = true;
            sendBtn.disabled = true;
            chatInput.value = '';
            heroSection.classList.add('chat-active');
            chatContainer.classList.add('active');

            addMessage(message, 'user');
            conversationHistory.push({ role: 'user', content: message });
            addTypingIndicator();

            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/suitegpt-chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        message: message,
                        history: conversationHistory.slice(-10)
                    })
                });

                removeTypingIndicator();

                if (!response.ok) throw new Error('Failed');

                const data = await response.json();
                addMessage(data.response, 'assistant', data.recommendedApp);
                conversationHistory.push({ role: 'assistant', content: data.response });

            } catch (error) {
                removeTypingIndicator();
                const fallback = getLocalResponse(message);
                addMessage(fallback.response, 'assistant', fallback.recommendedApp);
                conversationHistory.push({ role: 'assistant', content: fallback.response });
            }

            isLoading = false;
            sendBtn.disabled = !chatInput.value.trim();
            chatInput.focus();
        }

        function getLocalResponse(message) {
            const keywords = {
                'foodvitals': ['nutrition', 'diet', 'calories', 'food', 'meals', 'weight', 'eating', 'healthy'],
                'trueform': ['back pain', 'posture', 'stretching', 'physical therapy', 'mobility', 'pain', 'sitting'],
                'opticrep': ['workout', 'gym', 'fitness', 'exercise', 'training', 'muscle', 'strength'],
                'cheshbon': ['money', 'finance', 'budget', 'spending', 'savings', 'financial'],
                'remcast': ['reminder', 'routine', 'morning', 'habits', 'schedule', 'notification'],
                'defi-knowledge': ['defi', 'crypto', 'blockchain', 'yield', 'trading']
            };

            const lower = message.toLowerCase();
            for (const [app, words] of Object.entries(keywords)) {
                if (words.some(w => lower.includes(w))) {
                    const appData = SUITE_APPS[app];
                    return {
                        response: `I can help with that!\n\n${appData.name} is perfect for what you're looking for. ${appData.description}.`,
                        recommendedApp: app
                    };
                }
            }

            return {
                response: "I don't have a specific tool for that yet, but the SUITE ecosystem is growing! Check out our Apps page to see what's available.",
                recommendedApp: null
            };
        }

        // Initialize
        loadUseCases();
    </script>
</body>
</html>
