<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuiteGPT | Your Personal App Concierge</title>
    <meta name="description" content="Tell us what you need. We'll find it, change it, or build it for you. Real apps, not just answers.">
    <link rel="icon" type="image/png" href="/assets/suite-logo-new.png">

    <!-- Open Graph -->
    <meta property="og:title" content="SuiteGPT | Your Personal App Concierge">
    <meta property="og:description" content="Tell us what you need. We'll find it, change it, or build it for you.">
    <meta property="og:image" content="https://getsuite.app/assets/images/1200x630-getsuite.jpg">
    <meta property="og:url" content="https://getsuite.app/suitegpt.html">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/nav.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0a0a0f;
            --bg-card: rgba(255, 255, 255, 0.03);
            --bg-card-hover: rgba(255, 255, 255, 0.06);
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --accent-tertiary: #ec4899;
            --accent-glow: rgba(99, 102, 241, 0.4);
            --text-primary: #f8fafc;
            --text-secondary: rgba(248, 250, 252, 0.7);
            --text-tertiary: rgba(248, 250, 252, 0.4);
            --border-subtle: rgba(255, 255, 255, 0.08);
            --border-hover: rgba(255, 255, 255, 0.15);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated mesh gradient background */
        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
            overflow: hidden;
        }

        .bg-gradient::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background:
                radial-gradient(ellipse 80% 50% at 20% 40%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse 50% 60% at 40% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse 40% 30% at 70% 70%, rgba(34, 211, 238, 0.08) 0%, transparent 50%);
            animation: gradientShift 20s ease-in-out infinite alternate;
        }

        @keyframes gradientShift {
            0% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(2%, -2%) rotate(1deg); }
            66% { transform: translate(-1%, 1%) rotate(-0.5deg); }
            100% { transform: translate(1%, 2%) rotate(0.5deg); }
        }

        /* Subtle grid */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 64px 64px;
            z-index: 1;
            pointer-events: none;
        }

        /* Floating orbs */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            z-index: 0;
            pointer-events: none;
        }

        .orb-1 {
            width: 400px;
            height: 400px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            top: 10%;
            right: 10%;
            animation: float1 25s ease-in-out infinite;
        }

        .orb-2 {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #ec4899, #f43f5e);
            bottom: 20%;
            left: 5%;
            animation: float2 30s ease-in-out infinite;
        }

        .orb-3 {
            width: 250px;
            height: 250px;
            background: linear-gradient(135deg, #22d3ee, #06b6d4);
            top: 60%;
            right: 20%;
            animation: float3 20s ease-in-out infinite;
        }

        @keyframes float1 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-30px, 40px) scale(1.1); }
        }

        @keyframes float2 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(40px, -30px) scale(0.9); }
        }

        @keyframes float3 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-20px, -40px) scale(1.05); }
        }

        /* Main content */
        .main-content {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Hero Section */
        .suitegpt-hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 120px 24px 40px;
            text-align: center;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .suitegpt-hero.chat-active {
            padding: 100px 24px 24px;
            justify-content: flex-start;
        }

        /* Logo badge */
        .logo-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px 10px 14px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 100px;
            margin-bottom: 32px;
            backdrop-filter: blur(20px);
            animation: fadeInDown 0.6s ease;
        }

        .logo-badge-icon {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .logo-badge span {
            font-weight: 600;
            font-size: 0.9rem;
            background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .suitegpt-hero.chat-active .logo-badge {
            display: none;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            line-height: 1.1;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #fff 0%, rgba(255,255,255,0.8) 50%, #fff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 0.6s ease 0.1s backwards;
        }

        .suitegpt-hero.chat-active .hero-title {
            font-size: clamp(1.5rem, 3vw, 2rem);
            margin-bottom: 16px;
        }

        .hero-subtitle {
            font-size: 1.15rem;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 480px;
            line-height: 1.6;
            animation: fadeInUp 0.6s ease 0.2s backwards;
        }

        .suitegpt-hero.chat-active .hero-subtitle,
        .suitegpt-hero.chat-active .powered-by {
            display: none;
        }

        .suitegpt-hero.chat-active .browse-section {
            margin-top: 32px;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Input Container */
        .input-container {
            width: 100%;
            max-width: 680px;
            animation: fadeInUp 0.6s ease 0.3s backwards;
        }

        .chat-input-wrapper {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 8px 8px 8px 24px;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .chat-input-wrapper::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg,
                rgba(99, 102, 241, 0.1) 0%,
                transparent 50%,
                rgba(236, 72, 153, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .chat-input-wrapper:focus-within {
            border-color: var(--accent-primary);
            box-shadow:
                0 0 0 4px rgba(99, 102, 241, 0.1),
                0 20px 40px -10px rgba(0, 0, 0, 0.3);
        }

        .chat-input-wrapper:focus-within::before {
            opacity: 1;
        }

        .chat-input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 1.05rem;
            font-family: inherit;
            color: var(--text-primary);
            outline: none;
            padding: 14px 0;
            position: relative;
            z-index: 1;
        }

        .chat-input::placeholder {
            color: var(--text-tertiary);
        }

        .send-btn {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            border: none;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
            position: relative;
            z-index: 1;
        }

        .send-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
        }

        .send-btn:active:not(:disabled) {
            transform: scale(0.98);
        }

        .send-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .send-btn svg {
            width: 20px;
            height: 20px;
        }

        /* Browse Section */
        .browse-section {
            width: 100%;
            max-width: 900px;
            margin-top: 48px;
            animation: fadeInUp 0.6s ease 0.4s backwards;
        }

        .browse-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .browse-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .browse-title span {
            color: var(--text-tertiary);
            font-weight: 400;
        }

        /* Category Pills */
        .category-pills {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 24px;
        }

        .category-pill {
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 100px;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .category-pill:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-hover);
        }

        .category-pill.active {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: white;
        }

        .category-pill .count {
            margin-left: 6px;
            opacity: 0.6;
        }

        /* Use Cases Grid */
        .use-cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }

        .use-case-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .use-case-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .use-case-card:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-hover);
            transform: translateY(-2px);
        }

        .use-case-card:hover::before {
            opacity: 1;
        }

        .use-case-query {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .use-case-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .use-case-app {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .use-case-app-icon {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .use-case-app-name {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .use-case-helpful {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .use-case-helpful svg {
            width: 14px;
            height: 14px;
        }

        /* Loading skeleton */
        .use-case-card.skeleton {
            pointer-events: none;
        }

        .skeleton-text {
            background: linear-gradient(90deg, var(--bg-card) 25%, var(--bg-card-hover) 50%, var(--bg-card) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Powered by badge */
        .powered-by {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 48px;
            font-size: 0.8rem;
            color: var(--text-tertiary);
        }

        .powered-by svg {
            width: 16px;
            height: 16px;
            opacity: 0.5;
        }

        /* Chat Container */
        .chat-container {
            width: 100%;
            max-width: 680px;
            margin: 32px auto 0;
            padding: 0 24px 40px;
            display: none;
        }

        .chat-container.active {
            display: block;
        }

        /* When chat is active, add some separation */
        .suitegpt-hero.chat-active .browse-section {
            border-top: 1px solid var(--border-subtle);
            padding-top: 32px;
        }

        .chat-messages {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Chat Messages */
        .message {
            display: flex;
            gap: 14px;
            max-width: 90%;
            animation: messageSlide 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            flex-shrink: 0;
            border: 1px solid var(--border-subtle);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border: none;
        }

        .message.assistant .message-avatar {
            background: var(--bg-card);
        }

        .message-content {
            padding: 16px 20px;
            border-radius: 20px;
            font-size: 0.95rem;
            line-height: 1.65;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            border-bottom-right-radius: 6px;
        }

        .message.assistant .message-content {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-subtle);
            border-bottom-left-radius: 6px;
            backdrop-filter: blur(20px);
        }

        /* App Cards in Chat */
        .app-card-inline {
            display: flex;
            align-items: center;
            gap: 16px;
            background: rgba(99, 102, 241, 0.08);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 16px;
            padding: 16px 20px;
            margin-top: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .app-card-inline:hover {
            background: rgba(99, 102, 241, 0.12);
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.2);
        }

        .app-icon-inline {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .app-info-inline h4 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 3px;
            color: var(--text-primary);
        }

        .app-info-inline p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin: 0;
        }

        .app-arrow {
            margin-left: auto;
            width: 36px;
            height: 36px;
            background: rgba(99, 102, 241, 0.15);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-primary);
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .app-card-inline:hover .app-arrow {
            background: var(--accent-primary);
            color: white;
            transform: translateX(2px);
        }

        /* Loading Indicator */
        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 16px 20px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--text-tertiary);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) { animation-delay: 0.15s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.3s; }

        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-10px); opacity: 1; }
        }

        /* Feedback Buttons */
        .feedback-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .feedback-btn {
            padding: 8px 14px;
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            background: transparent;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-tertiary);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .feedback-btn:hover {
            background: var(--bg-card);
            border-color: var(--border-hover);
            color: var(--text-secondary);
        }

        .feedback-btn.active-good {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.3);
            color: #22c55e;
        }

        .feedback-btn.active-bad {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }

        /* Quick Action Buttons */
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-subtle);
        }

        .quick-action-btn {
            padding: 10px 16px;
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 12px;
            background: rgba(99, 102, 241, 0.08);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-primary);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quick-action-btn:hover {
            background: rgba(99, 102, 241, 0.15);
            border-color: var(--accent-primary);
            transform: translateY(-1px);
        }

        .quick-action-btn.primary {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border: none;
            color: white;
        }

        .quick-action-btn.primary:hover {
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);
        }

        .quick-action-btn .icon {
            font-size: 1rem;
        }

        /* Mobile Adjustments */
        @media (max-width: 640px) {
            .suitegpt-hero {
                padding: 100px 16px 40px;
            }

            .hero-title {
                font-size: clamp(2rem, 8vw, 2.5rem);
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .chat-input-wrapper {
                padding: 6px 6px 6px 18px;
                border-radius: 16px;
            }

            .chat-input {
                font-size: 1rem;
                padding: 12px 0;
            }

            .send-btn {
                width: 46px;
                height: 46px;
                border-radius: 12px;
            }

            .browse-section {
                margin-top: 32px;
            }

            .category-pills {
                justify-content: flex-start;
                overflow-x: auto;
                flex-wrap: nowrap;
                padding-bottom: 8px;
                -webkit-overflow-scrolling: touch;
            }

            .category-pill {
                flex-shrink: 0;
            }

            .use-cases-grid {
                grid-template-columns: 1fr;
            }

            .chat-container {
                padding: 0 16px 30px;
            }

            .message {
                max-width: 95%;
            }

            .message-content {
                padding: 14px 16px;
            }

            .orb {
                opacity: 0.3;
            }

            .orb-1 { width: 250px; height: 250px; }
            .orb-2 { width: 200px; height: 200px; }
            .orb-3 { display: none; }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-subtle); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--border-hover); }

        /* === CONCIERGE PATHS SECTION === */
        .paths-section {
            width: 100%;
            max-width: 900px;
            margin-top: 48px;
            animation: fadeInUp 0.6s ease 0.35s backwards;
        }

        .paths-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .paths-header h2 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }

        .paths-header p {
            font-size: 0.9rem;
            color: var(--text-tertiary);
        }

        .paths-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 16px;
        }

        .path-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 28px 24px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .path-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .path-card[data-path="find"]::before {
            background: linear-gradient(90deg, #22c55e, #16a34a);
        }

        .path-card[data-path="change"]::before {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .path-card[data-path="build"]::before {
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        }

        .path-card:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-hover);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.4);
        }

        .path-card:hover::before {
            opacity: 1;
        }

        .path-card.selected {
            border-color: var(--accent-primary);
            background: rgba(99, 102, 241, 0.08);
        }

        .path-card.selected::before {
            opacity: 1;
        }

        .path-icon {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            margin: 0 auto 16px;
            position: relative;
        }

        .path-card[data-path="find"] .path-icon {
            background: rgba(34, 197, 94, 0.15);
        }

        .path-card[data-path="change"] .path-icon {
            background: rgba(245, 158, 11, 0.15);
        }

        .path-card[data-path="build"] .path-icon {
            background: rgba(99, 102, 241, 0.15);
        }

        .path-card h3 {
            font-size: 1.05rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .path-card p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 16px;
        }

        .path-time {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 100px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-tertiary);
        }

        .path-card[data-path="find"] .path-time {
            color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }

        .path-card[data-path="change"] .path-time {
            color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        .path-card[data-path="build"] .path-time {
            color: var(--accent-primary);
            background: rgba(99, 102, 241, 0.1);
        }

        /* Hide paths when chat is active */
        .suitegpt-hero.chat-active .paths-section {
            display: none;
        }

        @media (max-width: 768px) {
            .paths-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .path-card {
                padding: 20px;
                display: flex;
                align-items: center;
                text-align: left;
                gap: 16px;
            }

            .path-icon {
                margin: 0;
                width: 48px;
                height: 48px;
                flex-shrink: 0;
            }

            .path-card-content {
                flex: 1;
            }

            .path-card h3 {
                margin-bottom: 4px;
            }

            .path-card p {
                margin-bottom: 8px;
                font-size: 0.8rem;
            }
        }

        /* === GOVERNANCE INFO MODAL === */
        .governance-info {
            display: none;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 20px 24px;
            margin-top: 16px;
            backdrop-filter: blur(20px);
            animation: fadeInUp 0.3s ease;
        }

        .governance-info.visible {
            display: block;
        }

        .governance-info h4 {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .governance-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .governance-flow {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 16px;
        }

        .governance-step {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            font-size: 0.8rem;
        }

        .governance-step.approved {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
        }

        .governance-step.private {
            background: rgba(139, 92, 246, 0.1);
            color: #8b5cf6;
        }

        .governance-arrow {
            color: var(--text-tertiary);
            font-size: 1.2rem;
        }

        .governance-close {
            background: none;
            border: none;
            color: var(--text-tertiary);
            cursor: pointer;
            padding: 4px;
            margin-left: auto;
            font-size: 1.2rem;
            line-height: 1;
        }

        .governance-close:hover {
            color: var(--text-secondary);
        }

        /* === UPDATED USE CASES === */
        .browse-section .browse-title {
            font-size: 1.05rem;
        }

        .browse-subtitle {
            font-size: 0.85rem;
            color: var(--text-tertiary);
            margin-top: 4px;
        }

        /* === CHAT IMPORT FEATURE === */
        .import-trigger {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.15));
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 24px;
        }

        .import-trigger:hover {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(139, 92, 246, 0.25));
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .import-trigger svg {
            width: 18px;
            height: 18px;
        }

        /* Import Modal */
        .import-modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }

        .import-modal-overlay.active {
            display: flex;
        }

        .import-modal {
            background: linear-gradient(180deg, #151520 0%, #0d0d14 100%);
            border: 1px solid var(--border-subtle);
            border-radius: 24px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .import-modal-header {
            padding: 28px 28px 0;
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
        }

        .import-modal-header h2 {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .import-modal-header p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .import-modal-close {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 1.2rem;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .import-modal-close:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .import-modal-body {
            padding: 28px;
        }

        /* Source Selection */
        .import-sources {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .import-source {
            background: var(--bg-card);
            border: 2px solid var(--border-subtle);
            border-radius: 16px;
            padding: 20px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .import-source:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-hover);
        }

        .import-source.selected {
            border-color: var(--accent-primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .import-source-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .import-source-name {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Drop Zone */
        .import-dropzone {
            border: 2px dashed var(--border-subtle);
            border-radius: 16px;
            padding: 40px 24px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 24px;
        }

        .import-dropzone:hover,
        .import-dropzone.dragover {
            border-color: var(--accent-primary);
            background: rgba(99, 102, 241, 0.05);
        }

        .import-dropzone-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.6;
        }

        .import-dropzone h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .import-dropzone p {
            font-size: 0.85rem;
            color: var(--text-tertiary);
            margin-bottom: 16px;
        }

        .import-dropzone-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--accent-primary);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .import-dropzone-btn:hover {
            background: var(--accent-secondary);
        }

        .import-file-input {
            display: none;
        }

        /* Instructions */
        .import-instructions {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
        }

        .import-instructions h4 {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .import-instructions ol {
            font-size: 0.8rem;
            color: var(--text-secondary);
            padding-left: 20px;
            line-height: 1.8;
        }

        .import-instructions code {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.75rem;
        }

        /* Privacy Notice */
        .import-privacy {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.2);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
        }

        .import-privacy h4 {
            font-size: 0.85rem;
            font-weight: 600;
            color: #22c55e;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .import-privacy p {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .import-consent {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        .import-consent label {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .import-consent input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            accent-color: var(--accent-primary);
            flex-shrink: 0;
        }

        /* Progress */
        .import-progress {
            display: none;
            text-align: center;
            padding: 40px 24px;
        }

        .import-progress.active {
            display: block;
        }

        .import-progress-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid var(--border-subtle);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            margin: 0 auto 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .import-progress h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .import-progress p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .import-progress-bar {
            height: 6px;
            background: var(--bg-card);
            border-radius: 3px;
            margin-top: 20px;
            overflow: hidden;
        }

        .import-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 3px;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Results */
        .import-results {
            display: none;
        }

        .import-results.active {
            display: block;
        }

        .import-results-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .import-results-header .success-icon {
            font-size: 3rem;
            margin-bottom: 12px;
        }

        .import-results-header h3 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .import-results-header p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .import-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .import-stat {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }

        .import-stat-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--accent-primary);
        }

        .import-stat-label {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            margin-top: 4px;
        }

        .import-insights {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .import-insights h4 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .import-insight-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-subtle);
        }

        .import-insight-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .import-insight-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .import-insight-content h5 {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .import-insight-content p {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .import-recommendations {
            margin-bottom: 24px;
        }

        .import-recommendations h4 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .import-app-rec {
            display: flex;
            align-items: center;
            gap: 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .import-app-rec:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-hover);
        }

        .import-app-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            flex-shrink: 0;
        }

        .import-app-info h5 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .import-app-info p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .import-app-match {
            margin-left: auto;
            padding: 6px 12px;
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 100px;
        }

        .import-cta {
            display: flex;
            gap: 12px;
        }

        .import-cta-btn {
            flex: 1;
            padding: 14px 20px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            border: none;
        }

        .import-cta-btn.primary {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
        }

        .import-cta-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
        }

        .import-cta-btn.secondary {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            color: var(--text-primary);
        }

        .import-cta-btn.secondary:hover {
            background: var(--bg-card-hover);
        }

        /* Unmatched Ideas Section */
        .import-unmatched {
            margin-bottom: 24px;
        }

        .import-unmatched h4 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .unmatched-idea {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }

        .unmatched-idea:hover {
            border-color: var(--border-hover);
            background: var(--bg-card-hover);
        }

        .unmatched-idea-text {
            font-size: 0.85rem;
            color: var(--text-primary);
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .unmatched-idea-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        .unmatched-idea-category {
            font-size: 0.7rem;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 100px;
            background: rgba(139, 92, 246, 0.15);
            color: #8b5cf6;
        }

        .unmatched-idea-request {
            font-size: 0.75rem;
            font-weight: 600;
            padding: 6px 14px;
            border-radius: 8px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .unmatched-idea-request:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .import-summary-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-top: 8px;
            padding: 12px 16px;
            background: rgba(99, 102, 241, 0.08);
            border-radius: 10px;
            border-left: 3px solid var(--accent-primary);
        }

        /* Test mode indicator */
        .test-mode-banner {
            background: rgba(245, 158, 11, 0.15);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #f59e0b;
            padding: 10px 16px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        @media (max-width: 640px) {
            .import-sources {
                grid-template-columns: 1fr;
            }

            .import-stats {
                grid-template-columns: 1fr;
            }

            .import-cta {
                flex-direction: column;
            }

            .unmatched-idea-meta {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Background effects -->
    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div class="main-content">
        <nav id="main-nav"></nav>
        <script src="/nav-component.js"></script>

        <!-- Hero Section with Input -->
        <section class="suitegpt-hero" id="heroSection">
            <div class="logo-badge">
                <div class="logo-badge-icon">S</div>
                <span>SuiteGPT</span>
            </div>

            <h1 class="hero-title">What do you need?</h1>
            <p class="hero-subtitle">Tell us what you need. We'll find it, change it, or build it for you.</p>

            <div class="input-container">
                <div class="chat-input-wrapper">
                    <input
                        type="text"
                        class="chat-input"
                        id="chatInput"
                        placeholder="Describe your problem or goal..."
                        autocomplete="off"
                    >
                    <button class="send-btn" id="sendBtn" disabled>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M5 12h14M12 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Three Paths Section -->
            <div class="paths-section" id="pathsSection">
                <div class="paths-header">
                    <h2>Here's what we can do for you</h2>
                </div>

                <div class="paths-grid">
                    <div class="path-card" data-path="find">
                        <div class="path-icon"></div>
                        <div class="path-card-content">
                            <h3>Find an App</h3>
                            <p>Browse ready-made tools built for real problems</p>
                            <span class="path-time"> Ready now</span>
                        </div>
                    </div>

                    <div class="path-card" data-path="change">
                        <div class="path-icon"></div>
                        <div class="path-card-content">
                            <h3>Request a Change</h3>
                            <p>Want something added or tweaked? Just ask.</p>
                            <span class="path-time"> ~12 hours</span>
                            <div style="font-size: 0.75rem; color: var(--text-tertiary); margin-top: 8px;">Click to learn how it works </div>
                        </div>
                    </div>

                    <div class="path-card" data-path="build">
                        <div class="path-icon"></div>
                        <div class="path-card-content">
                            <h3>Request New App</h3>
                            <p>Don't see what you need? We'll build it.</p>
                            <span class="path-time"> 1-12 hours</span>
                        </div>
                    </div>
                </div>

                <!-- Governance Info (hidden by default, shown on "change" click) -->
                <div class="governance-info" id="governanceInfo">
                    <h4>
                        <span> How changes work</span>
                        <button class="governance-close" id="governanceClose">&times;</button>
                    </h4>
                    <p>When you request a change to an existing app, here's what happens:</p>
                    <div class="governance-flow">
                        <div class="governance-step"> You submit request</div>
                        <span class="governance-arrow"></span>
                        <div class="governance-step"> We review it</div>
                        <span class="governance-arrow"></span>
                        <div class="governance-step approved"> Approved = Added for everyone</div>
                    </div>
                    <div class="governance-flow" style="margin-top: 8px;">
                        <div class="governance-step" style="opacity: 0; pointer-events: none;"> Placeholder</div>
                        <span class="governance-arrow" style="opacity: 0;"></span>
                        <div class="governance-step" style="opacity: 0; pointer-events: none;"> Placeholder</div>
                        <span class="governance-arrow"></span>
                        <div class="governance-step private"> Not approved = Private app just for you</div>
                    </div>
                    <p style="margin-top: 16px; margin-bottom: 0; color: var(--text-tertiary);">Either way, you get what you need.</p>
                </div>
            </div>

            <!-- Chat Container (appears between input and browse) -->
            <div class="chat-container" id="chatContainer">
                <div class="chat-messages" id="chatMessages"></div>
            </div>

            <!-- Browse Section -->
            <div class="browse-section" id="browseSection">
                <div class="browse-header">
                    <div>
                        <div class="browse-title">What people are asking <span id="useCaseCount"></span></div>
                        <div class="browse-subtitle">Click any to see how we helped</div>
                    </div>
                </div>

                <div class="category-pills" id="categoryPills">
                    <button class="category-pill active" data-category="all">All</button>
                    <button class="category-pill" data-category="health">Health</button>
                    <button class="category-pill" data-category="fitness">Fitness</button>
                    <button class="category-pill" data-category="finance">Finance</button>
                    <button class="category-pill" data-category="productivity">Productivity</button>
                    <button class="category-pill" data-category="learning">Learning</button>
                </div>

                <div class="use-cases-grid" id="useCasesGrid">
                    <!-- Loading skeletons -->
                    <div class="use-case-card skeleton">
                        <div class="skeleton-text" style="height: 20px; width: 90%; margin-bottom: 8px;"></div>
                        <div class="skeleton-text" style="height: 20px; width: 70%; margin-bottom: 16px;"></div>
                        <div class="skeleton-text" style="height: 16px; width: 40%;"></div>
                    </div>
                    <div class="use-case-card skeleton">
                        <div class="skeleton-text" style="height: 20px; width: 85%; margin-bottom: 8px;"></div>
                        <div class="skeleton-text" style="height: 20px; width: 60%; margin-bottom: 16px;"></div>
                        <div class="skeleton-text" style="height: 16px; width: 45%;"></div>
                    </div>
                    <div class="use-case-card skeleton">
                        <div class="skeleton-text" style="height: 20px; width: 80%; margin-bottom: 8px;"></div>
                        <div class="skeleton-text" style="height: 20px; width: 65%; margin-bottom: 16px;"></div>
                        <div class="skeleton-text" style="height: 16px; width: 35%;"></div>
                    </div>
                </div>
            </div>

            <!-- Import CTA -->
            <button class="import-trigger" id="importTrigger">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Import your AI chat history for personalized recommendations
            </button>

            <div class="powered-by">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                Powered by AI Fleet
            </div>
        </section>

        <!-- Import Modal -->
        <div class="import-modal-overlay" id="importModal">
            <div class="import-modal">
                <div class="import-modal-header">
                    <div>
                        <h2>Import Your AI History</h2>
                        <p>Your conversations reveal what you actually need. Let us analyze them and recommend the perfect tools for you.</p>
                    </div>
                    <button class="import-modal-close" id="importModalClose">&times;</button>
                </div>

                <div class="import-modal-body">
                    <!-- Step 1: Source Selection & Upload -->
                    <div class="import-step import-step-upload" id="importStepUpload">
                        <h4 style="font-size: 0.9rem; font-weight: 600; margin-bottom: 16px;">Select your source</h4>

                        <div class="import-sources">
                            <div class="import-source selected" data-source="chatgpt">
                                <div class="import-source-icon"></div>
                                <div class="import-source-name">ChatGPT</div>
                            </div>
                            <div class="import-source" data-source="claude">
                                <div class="import-source-icon"></div>
                                <div class="import-source-name">Claude</div>
                            </div>
                            <div class="import-source" data-source="gemini">
                                <div class="import-source-icon"></div>
                                <div class="import-source-name">Gemini</div>
                            </div>
                        </div>

                        <div class="import-instructions" id="importInstructions">
                            <h4> How to export from ChatGPT</h4>
                            <ol>
                                <li>Go to <code>chat.openai.com</code></li>
                                <li>Click your profile  <strong>Settings</strong></li>
                                <li>Go to <strong>Data controls</strong></li>
                                <li>Click <strong>Export data</strong></li>
                                <li>Check your email for the download link</li>
                                <li>Upload the <code>conversations.json</code> file below</li>
                            </ol>
                        </div>

                        <div class="import-dropzone" id="importDropzone">
                            <div class="import-dropzone-icon"></div>
                            <h3>Drop your export file here</h3>
                            <p>or click to browse</p>
                            <button class="import-dropzone-btn">Choose File</button>
                            <input type="file" class="import-file-input" id="importFileInput" accept=".json,.zip">
                        </div>

                        <!-- Test mode option -->
                        <div style="text-align: center; margin-bottom: 16px;">
                            <button id="loadTestData" style="background: none; border: 1px dashed var(--border-subtle); padding: 10px 20px; border-radius: 8px; color: var(--text-tertiary); font-size: 0.8rem; cursor: pointer; transition: all 0.2s ease;">
                                 Load sample data to test the flow
                            </button>
                        </div>

                        <div class="import-privacy">
                            <h4> Your data, your choice</h4>
                            <p>We analyze your conversations to understand your needs. We extract themes and topics, not personal details.</p>
                            <div class="import-consent">
                                <label>
                                    <input type="checkbox" id="consentAnalyze" checked>
                                    <span>Analyze my chats for personalized recommendations</span>
                                </label>
                                <label>
                                    <input type="checkbox" id="consentImprove" checked>
                                    <span>Help improve SUITE by sharing anonymized insights (we see WHAT problems exist, not WHO has them)</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Processing -->
                    <div class="import-progress" id="importProgress">
                        <div class="import-progress-spinner"></div>
                        <h3>Analyzing your conversations...</h3>
                        <p id="importProgressText">Reading your chat history</p>
                        <div class="import-progress-bar">
                            <div class="import-progress-fill" id="importProgressFill"></div>
                        </div>
                    </div>

                    <!-- Step 3: Results -->
                    <div class="import-results" id="importResults">
                        <div class="import-results-header">
                            <div class="success-icon"></div>
                            <h3>Analysis Complete!</h3>
                            <p>Here's what we learned about you</p>
                        </div>

                        <div class="import-stats">
                            <div class="import-stat">
                                <div class="import-stat-value" id="statConversations">0</div>
                                <div class="import-stat-label">Conversations</div>
                            </div>
                            <div class="import-stat">
                                <div class="import-stat-value" id="statMessages">0</div>
                                <div class="import-stat-label">Messages</div>
                            </div>
                            <div class="import-stat">
                                <div class="import-stat-value" id="statTopics">0</div>
                                <div class="import-stat-label">Topics Found</div>
                            </div>
                        </div>

                        <div class="import-insights">
                            <h4> Key Insights</h4>
                            <div id="insightsList">
                                <!-- Populated dynamically -->
                            </div>
                        </div>

                        <div class="import-recommendations">
                            <h4> Matched to Existing Apps</h4>
                            <div id="recommendationsList">
                                <!-- Populated dynamically -->
                            </div>
                        </div>

                        <div class="import-unmatched" id="importUnmatched" style="display: none;">
                            <h4> App Ideas We Can Build For You</h4>
                            <p style="font-size: 0.8rem; color: var(--text-tertiary); margin-bottom: 16px;">
                                These ideas from your chats don't match existing apps. Click to request!
                            </p>
                            <div id="unmatchedList">
                                <!-- Populated dynamically -->
                            </div>
                        </div>

                        <div class="import-cta">
                            <button class="import-cta-btn secondary" id="importDone">Done</button>
                            <button class="import-cta-btn primary" id="importRequestCustom">Request Custom App</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // SUITE Apps Catalog
        const SUITE_APPS = {
            'foodvitals': {
                name: 'FoodVitals',
                description: 'Weekly meal tracking + AI nutrition insights',
                icon: '',
                iconBg: 'linear-gradient(135deg, #22c55e, #16a34a)',
                url: '/apps-subpages/physio-ai.html'
            },
            'trueform': {
                name: 'TrueForm AI',
                description: 'AI physiotherapy and exercise guidance',
                icon: '',
                iconBg: 'linear-gradient(135deg, #3b82f6, #1d4ed8)',
                url: '/apps-subpages/physio-ai.html'
            },
            'opticrep': {
                name: 'OpticRep',
                description: 'AI workout trainer with form analysis',
                icon: '',
                iconBg: 'linear-gradient(135deg, #f97316, #ea580c)',
                url: '/suite-shell.html'
            },
            'cheshbon': {
                name: 'Cheshbon',
                description: 'Financial reflection and tracking app',
                icon: '',
                iconBg: 'linear-gradient(135deg, #eab308, #ca8a04)',
                url: '/suite-shell.html'
            },
            'remcast': {
                name: 'RemCast',
                description: 'Smart reminder and notification system',
                icon: '',
                iconBg: 'linear-gradient(135deg, #8b5cf6, #7c3aed)',
                url: '/suite-shell.html'
            },
            'defi-knowledge': {
                name: 'DeFi Knowledge',
                description: 'Learn DeFi concepts and strategies',
                icon: '',
                iconBg: 'linear-gradient(135deg, #06b6d4, #0891b2)',
                url: '/suite-shell.html'
            }
        };

        // Supabase config
        const SUPABASE_URL = 'https://rdsmdywbdiskxknluiym.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkc21keXdiZGlza3hrbmx1aXltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3ODk3MTgsImV4cCI6MjA4MzM2NTcxOH0.DcLpWs8Lf1s4Flf54J5LubokSYrd7h-XvI_X0jj6bLM';

        // DOM Elements
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const heroSection = document.getElementById('heroSection');
        const chatContainer = document.getElementById('chatContainer');
        const chatMessages = document.getElementById('chatMessages');
        const useCasesGrid = document.getElementById('useCasesGrid');
        const categoryPills = document.querySelectorAll('.category-pill');
        const useCaseCount = document.getElementById('useCaseCount');
        const pathCards = document.querySelectorAll('.path-card');
        const governanceInfo = document.getElementById('governanceInfo');
        const governanceClose = document.getElementById('governanceClose');

        // State
        let isLoading = false;
        let conversationHistory = [];
        let useCases = [];
        let currentCategory = 'all';
        let selectedPath = null;

        // Path card interactions
        pathCards.forEach(card => {
            card.addEventListener('click', () => {
                const path = card.dataset.path;

                // Toggle selection
                pathCards.forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                selectedPath = path;

                // Show governance info for "change" path
                if (path === 'change') {
                    governanceInfo.classList.add('visible');
                } else {
                    governanceInfo.classList.remove('visible');
                }

                // Update placeholder and focus
                if (path === 'find') {
                    chatInput.placeholder = "What problem are you trying to solve?";
                    chatInput.focus();
                } else if (path === 'change') {
                    chatInput.placeholder = "Which app and what would you like changed?";
                    chatInput.focus();
                } else if (path === 'build') {
                    chatInput.placeholder = "Describe the app you need...";
                    chatInput.focus();
                }
            });
        });

        // Close governance info
        governanceClose.addEventListener('click', (e) => {
            e.stopPropagation();
            governanceInfo.classList.remove('visible');
        });

        // Load use cases from Supabase
        async function loadUseCases() {
            try {
                const response = await fetch(
                    `${SUPABASE_URL}/rest/v1/use_cases?is_visible=eq.true&order=helpful_count.desc`,
                    {
                        headers: {
                            'apikey': SUPABASE_ANON_KEY,
                            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                        }
                    }
                );

                if (response.ok) {
                    useCases = await response.json();
                    renderUseCases();
                } else {
                    // Fallback to hardcoded examples if table doesn't exist yet
                    useCases = getHardcodedUseCases();
                    renderUseCases();
                }
            } catch (error) {
                console.error('Failed to load use cases:', error);
                useCases = getHardcodedUseCases();
                renderUseCases();
            }
        }

        // Hardcoded fallback - showcasing different request types
        function getHardcodedUseCases() {
            return [
                // Find app requests
                { query: "I want to lose weight but hate tracking calories", response: "FoodVitals takes a different approach - weekly check-ins instead of daily logging. It uses AI to give you insights without the obsessive tracking.", recommended_app: "foodvitals", category: "health", helpful_count: 42, type: "find" },
                { query: "I have back pain from sitting all day", response: "TrueForm AI has guided stretching routines specifically for desk workers. It'll assess your mobility and create a personalized plan.", recommended_app: "trueform", category: "fitness", helpful_count: 56, type: "find" },
                { query: "I want to learn about DeFi and crypto", response: "DeFi Knowledge breaks down complex concepts into digestible lessons. Start with the basics and work up to advanced strategies.", recommended_app: "defi-knowledge", category: "learning", helpful_count: 45, type: "find" },

                // Change requests
                { query: "Can FoodVitals track water intake too?", response: "Great idea! We reviewed this and added it to FoodVitals for everyone. You can now log water alongside your meals.", recommended_app: "foodvitals", category: "health", helpful_count: 67, type: "change" },
                { query: "I wish OpticRep had rest day suggestions", response: "Done! We added smart rest day recommendations based on your workout intensity. Check it out in your dashboard.", recommended_app: "opticrep", category: "fitness", helpful_count: 52, type: "change" },

                // Build requests
                { query: "I need an app to track my dog's medications", response: "We built PetMeds for this user - tracks doses, sends reminders, and logs vet visits. Now available for everyone!", recommended_app: null, category: "productivity", helpful_count: 38, type: "build" },
                { query: "Can you make a habit tracker that's not annoying?", response: "We built a minimal habit tracker that only notifies you once daily with a gentle summary. No streaks, no guilt.", recommended_app: "remcast", category: "productivity", helpful_count: 44, type: "build" },

                // More find requests
                { query: "I want to get stronger but don't know where to start", response: "OpticRep is your AI workout trainer - it watches your form, counts reps, and builds programs based on your goals.", recommended_app: "opticrep", category: "fitness", helpful_count: 41, type: "find" },
                { query: "I want to get better with money", response: "Cheshbon helps you reflect on spending patterns without judgment. Weekly prompts help you understand your relationship with money.", recommended_app: "cheshbon", category: "finance", helpful_count: 37, type: "find" }
            ];
        }

        // Render use cases
        function renderUseCases() {
            const filtered = currentCategory === 'all'
                ? useCases
                : useCases.filter(uc => uc.category === currentCategory);

            useCaseCount.textContent = `(${filtered.length})`;

            if (filtered.length === 0) {
                useCasesGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-tertiary);">
                        No use cases in this category yet.
                    </div>
                `;
                return;
            }

            useCasesGrid.innerHTML = filtered.map(uc => {
                const app = SUITE_APPS[uc.recommended_app] || {};
                const typeLabels = {
                    'find': { icon: '', label: 'Found app', color: 'rgba(34, 197, 94, 0.15)', textColor: '#22c55e' },
                    'change': { icon: '', label: 'Added feature', color: 'rgba(245, 158, 11, 0.15)', textColor: '#f59e0b' },
                    'build': { icon: '', label: 'Built custom', color: 'rgba(99, 102, 241, 0.15)', textColor: '#6366f1' }
                };
                const typeInfo = typeLabels[uc.type] || typeLabels['find'];

                return `
                    <div class="use-case-card" data-query="${encodeURIComponent(uc.query)}" data-response="${encodeURIComponent(uc.response)}" data-app="${uc.recommended_app || ''}">
                        <div class="use-case-type" style="display: inline-flex; align-items: center; gap: 6px; font-size: 0.7rem; font-weight: 600; padding: 4px 10px; border-radius: 100px; background: ${typeInfo.color}; color: ${typeInfo.textColor}; margin-bottom: 12px;">
                            <span>${typeInfo.icon}</span>
                            <span>${typeInfo.label}</span>
                        </div>
                        <div class="use-case-query">"${uc.query}"</div>
                        <div class="use-case-meta">
                            <div class="use-case-app">
                                ${uc.recommended_app ? `
                                    <div class="use-case-app-icon" style="background: ${app.iconBg || 'var(--bg-card)'}">${app.icon || ''}</div>
                                    <span class="use-case-app-name">${app.name || 'Custom App'}</span>
                                ` : `
                                    <div class="use-case-app-icon" style="background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary))"></div>
                                    <span class="use-case-app-name">Custom Built</span>
                                `}
                            </div>
                            <div class="use-case-helpful">
                                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>
                                ${uc.helpful_count || 0}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Add click handlers
            document.querySelectorAll('.use-case-card').forEach(card => {
                card.addEventListener('click', () => {
                    const query = decodeURIComponent(card.dataset.query);
                    const response = decodeURIComponent(card.dataset.response);
                    const app = card.dataset.app;

                    // Simulate sending this query
                    heroSection.classList.add('chat-active');
                    chatContainer.classList.add('active');
                    addMessage(query, 'user');
                    addMessage(response, 'assistant', app);
                    conversationHistory.push({ role: 'user', content: query });
                    conversationHistory.push({ role: 'assistant', content: response });

                    // Increment view count (fire and forget)
                    incrementViews(card.dataset.query);
                });
            });
        }

        // Category filtering
        categoryPills.forEach(pill => {
            pill.addEventListener('click', () => {
                categoryPills.forEach(p => p.classList.remove('active'));
                pill.classList.add('active');
                currentCategory = pill.dataset.category;
                renderUseCases();
            });
        });

        // Increment view count
        async function incrementViews(query) {
            try {
                // This would need an edge function to handle safely
                // For now, just log it
                console.log('View:', query);
            } catch (e) {}
        }

        // Enable/disable send button
        chatInput.addEventListener('input', () => {
            sendBtn.disabled = !chatInput.value.trim() || isLoading;
        });

        // Send on Enter
        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey && !sendBtn.disabled) {
                e.preventDefault();
                sendMessage();
            }
        });

        sendBtn.addEventListener('click', sendMessage);

        // Add message to chat
        function addMessage(content, role, appRecommendation = null, userQuery = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;

            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = role === 'user' ? '' : '';

            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = content.replace(/\n/g, '<br>');

            if (appRecommendation && SUITE_APPS[appRecommendation]) {
                const app = SUITE_APPS[appRecommendation];
                const appCard = document.createElement('a');
                appCard.href = app.url;
                appCard.className = 'app-card-inline';
                appCard.innerHTML = `
                    <div class="app-icon-inline" style="background: ${app.iconBg}">${app.icon}</div>
                    <div class="app-info-inline">
                        <h4>${app.name}</h4>
                        <p>${app.description}</p>
                    </div>
                    <span class="app-arrow"></span>
                `;
                contentDiv.appendChild(appCard);

                // Add quick action buttons for app recommendations
                const quickActionsDiv = document.createElement('div');
                quickActionsDiv.className = 'quick-actions';
                quickActionsDiv.innerHTML = `
                    <button class="quick-action-btn" data-action="use-case" data-app="${appRecommendation}">
                        <span class="icon"></span>
                        How does this help my specific case?
                    </button>
                    <button class="quick-action-btn" data-action="capabilities" data-app="${appRecommendation}">
                        <span class="icon"></span>
                        What else can it do?
                    </button>
                    <button class="quick-action-btn primary" data-action="open" data-app="${appRecommendation}" data-url="${app.url}">
                        <span class="icon"></span>
                        Open ${app.name}
                    </button>
                    <button class="quick-action-btn" data-action="request-change" data-app="${appRecommendation}">
                        <span class="icon"></span>
                        Request a feature
                    </button>
                `;
                contentDiv.appendChild(quickActionsDiv);

                // Add click handlers for quick actions
                quickActionsDiv.querySelectorAll('.quick-action-btn').forEach(btn => {
                    btn.addEventListener('click', () => handleQuickAction(btn.dataset.action, btn.dataset.app, btn.dataset.url, userQuery));
                });
            }

            if (role === 'assistant' && !appRecommendation) {
                // Only show feedback buttons if no app recommendation (which has quick actions)
                const feedbackDiv = document.createElement('div');
                feedbackDiv.className = 'feedback-buttons';
                feedbackDiv.innerHTML = `
                    <button class="feedback-btn" data-feedback="good"> Helpful</button>
                    <button class="feedback-btn" data-feedback="bad"> Not helpful</button>
                `;
                contentDiv.appendChild(feedbackDiv);

                feedbackDiv.querySelectorAll('.feedback-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        feedbackDiv.querySelectorAll('.feedback-btn').forEach(b => b.classList.remove('active-good', 'active-bad'));
                        btn.classList.add(btn.dataset.feedback === 'good' ? 'active-good' : 'active-bad');
                    });
                });
            }

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Handle quick action button clicks
        function handleQuickAction(action, appId, url, originalQuery) {
            const app = SUITE_APPS[appId];
            if (!app) return;

            switch (action) {
                case 'use-case':
                    // Ask for more specific help
                    const useCaseQuery = `Tell me specifically how ${app.name} can help with my situation`;
                    addMessage(useCaseQuery, 'user');
                    conversationHistory.push({ role: 'user', content: useCaseQuery });
                    addTypingIndicator();

                    setTimeout(() => {
                        removeTypingIndicator();
                        const response = getUseCaseResponse(app, originalQuery);
                        addMessage(response, 'assistant');
                        conversationHistory.push({ role: 'assistant', content: response });
                    }, 1200);
                    break;

                case 'capabilities':
                    // Show full capabilities
                    const capQuery = `What are all the features of ${app.name}?`;
                    addMessage(capQuery, 'user');
                    conversationHistory.push({ role: 'user', content: capQuery });
                    addTypingIndicator();

                    setTimeout(() => {
                        removeTypingIndicator();
                        const response = getCapabilitiesResponse(app);
                        addMessage(response, 'assistant');
                        conversationHistory.push({ role: 'assistant', content: response });
                    }, 1200);
                    break;

                case 'open':
                    // Open the app
                    window.location.href = url;
                    break;

                case 'request-change':
                    // Start a change request
                    const changeQuery = `I'd like to request a feature for ${app.name}`;
                    addMessage(changeQuery, 'user');
                    conversationHistory.push({ role: 'user', content: changeQuery });
                    addTypingIndicator();

                    setTimeout(() => {
                        removeTypingIndicator();
                        const response = `Great! I'd love to hear your idea for ${app.name}.\n\n` +
                            `What feature would you like us to add? Be as specific as you can - describe:\n` +
                            ` What it should do\n` +
                            ` When/how you'd use it\n` +
                            ` Any examples of how it works elsewhere\n\n` +
                            `Once you describe it, we'll review and either add it for everyone or create a private version just for you.`;
                        addMessage(response, 'assistant');
                        conversationHistory.push({ role: 'assistant', content: response });
                    }, 1200);
                    break;
            }
        }

        // Generate use-case specific response
        function getUseCaseResponse(app, originalQuery) {
            const responses = {
                'foodvitals': `Here's how FoodVitals specifically helps you:\n\n` +
                    `1. **Weekly Check-ins, Not Daily Logging** - Instead of obsessing over every meal, you do a quick weekly reflection. Less pressure, more sustainable.\n\n` +
                    `2. **AI-Powered Insights** - It analyzes your patterns and gives personalized suggestions. Not generic advice, but specific to YOUR habits.\n\n` +
                    `3. **No Calorie Counting** - Focus on how food makes you feel, not numbers. Track energy levels, mood, and satisfaction.\n\n` +
                    `4. **Smart Reminders** - Gentle nudges at meal times, not annoying notifications.\n\n` +
                    `Want to try it? Or have questions about a specific feature?`,

                'trueform': `Here's how TrueForm AI specifically helps you:\n\n` +
                    `1. **AI Posture Assessment** - Use your camera to analyze your posture and identify problem areas.\n\n` +
                    `2. **Personalized Stretching Routines** - Based on YOUR specific issues (desk work, back pain, etc.), not generic exercises.\n\n` +
                    `3. **Form Correction in Real-Time** - The AI watches you do exercises and tells you when you're doing it wrong.\n\n` +
                    `4. **Progress Tracking** - See how your mobility improves over time with measurable metrics.\n\n` +
                    `Ready to start? Or want to know more about any feature?`,

                'opticrep': `Here's how OpticRep specifically helps you:\n\n` +
                    `1. **AI Rep Counter** - Automatically counts your reps using your camera. No more losing count.\n\n` +
                    `2. **Form Analysis** - Real-time feedback on your exercise form to prevent injury and maximize gains.\n\n` +
                    `3. **Workout Programs** - AI-generated programs based on your goals (strength, hypertrophy, endurance).\n\n` +
                    `4. **Rest Timer Intelligence** - Suggests rest periods based on exercise intensity and your fatigue level.\n\n` +
                    `Want to start your first workout? Or explore more features?`,

                'cheshbon': `Here's how Cheshbon specifically helps you:\n\n` +
                    `1. **Reflection, Not Restriction** - Weekly prompts ask how you FEEL about your spending, not just track numbers.\n\n` +
                    `2. **Pattern Recognition** - Identifies emotional spending triggers without judgment.\n\n` +
                    `3. **Values Alignment** - Helps you see if your spending matches what you actually care about.\n\n` +
                    `4. **No Bank Linking Required** - Manual reflection is more mindful than automated tracking.\n\n` +
                    `Ready to start your financial reflection journey?`,

                'remcast': `Here's how RemCast specifically helps you:\n\n` +
                    `1. **Smart Reminders** - Learns when you're most likely to act on reminders, not just arbitrary times.\n\n` +
                    `2. **Gentle Habit Building** - No streaks or guilt. Just consistent, kind nudges.\n\n` +
                    `3. **Context-Aware** - Knows not to remind you during meetings or late at night.\n\n` +
                    `4. **Routine Builder** - Chain habits together into morning/evening routines.\n\n` +
                    `Ready to build better habits? Or want to explore specific features?`,

                'defi-knowledge': `Here's how DeFi Knowledge specifically helps you:\n\n` +
                    `1. **Structured Learning Path** - From basics to advanced, no jumping around.\n\n` +
                    `2. **No Shill, Just Education** - We teach concepts, not promote specific protocols.\n\n` +
                    `3. **Interactive Simulations** - Practice strategies without risking real money.\n\n` +
                    `4. **Jargon Decoder** - Built-in glossary that explains terms in plain English.\n\n` +
                    `Ready to start learning? Or curious about a specific topic?`
            };

            return responses[app.id] || `${app.name} is designed to help with exactly what you described. Let me know if you want to dive deeper into any specific feature!`;
        }

        // Generate capabilities response
        function getCapabilitiesResponse(app) {
            const capabilities = {
                'foodvitals': `**FoodVitals - Full Capabilities:**\n\n` +
                    ` **Tracking**\n Weekly meal reflections\n Energy & mood logging\n Water intake (coming soon)\n\n` +
                    ` **AI Features**\n Personalized nutrition insights\n Pattern detection\n Smart suggestions\n\n` +
                    ` **Experience**\n Clean, pressure-free interface\n Photo meal logging\n Progress charts\n\n` +
                    ` **Reminders**\n Gentle meal-time nudges\n Weekly check-in prompts`,

                'trueform': `**TrueForm AI - Full Capabilities:**\n\n` +
                    ` **Assessment**\n AI posture analysis\n Mobility screening\n Movement pattern detection\n\n` +
                    ` **Exercise**\n Guided stretching routines\n Strength exercises\n Real-time form correction\n\n` +
                    ` **Progress**\n Flexibility tracking\n Pain level monitoring\n Before/after comparisons\n\n` +
                    ` **Smart Features**\n Desk worker programs\n Custom routine builder\n Video demonstrations`,

                'opticrep': `**OpticRep - Full Capabilities:**\n\n` +
                    ` **Vision AI**\n Automatic rep counting\n Form analysis & correction\n Exercise recognition\n\n` +
                    ` **Workouts**\n AI-generated programs\n Progressive overload tracking\n Exercise library\n\n` +
                    ` **Analytics**\n Volume tracking\n Strength progression\n Workout history\n\n` +
                    ` **Smart Features**\n Rest timer optimization\n Fatigue detection\n PR celebrations`,

                'cheshbon': `**Cheshbon - Full Capabilities:**\n\n` +
                    ` **Reflection**\n Weekly money check-ins\n Spending feeling journal\n Values alignment scores\n\n` +
                    ` **Insights**\n Emotional spending patterns\n Category breakdowns\n Monthly summaries\n\n` +
                    ` **Goals**\n Value-based goal setting\n Progress visualization\n Milestone celebrations\n\n` +
                    ` **Privacy**\n No bank linking required\n Local data option\n Export anytime`,

                'remcast': `**RemCast - Full Capabilities:**\n\n` +
                    ` **Reminders**\n Smart timing optimization\n Location-based triggers\n Recurring schedules\n\n` +
                    ` **Habits**\n Routine builder\n Habit stacking\n Flexible scheduling\n\n` +
                    ` **Tracking**\n Completion rates (no streaks!)\n Best times analysis\n Weekly summaries\n\n` +
                    ` **Smart Features**\n Do-not-disturb awareness\n Calendar integration\n Snooze intelligence`,

                'defi-knowledge': `**DeFi Knowledge - Full Capabilities:**\n\n` +
                    ` **Learning**\n Structured courses\n Interactive lessons\n Quizzes & tests\n\n` +
                    ` **Practice**\n Risk-free simulations\n Strategy sandbox\n Portfolio games\n\n` +
                    ` **Reference**\n Jargon glossary\n Protocol comparisons\n Risk explanations\n\n` +
                    ` **Updates**\n Market context\n New protocol coverage\n Trend analysis`
            };

            return capabilities[app.id] || `${app.name} has many features designed to help you. What specific capability are you most interested in?`;
        }

        function addTypingIndicator() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message assistant';
            messageDiv.id = 'typingIndicator';

            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = '';

            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>';

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function removeTypingIndicator() {
            document.getElementById('typingIndicator')?.remove();
        }

        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message || isLoading) return;

            // Store the user's query for context in quick actions
            const userQuery = message;

            isLoading = true;
            sendBtn.disabled = true;
            chatInput.value = '';
            heroSection.classList.add('chat-active');
            chatContainer.classList.add('active');

            addMessage(message, 'user');
            conversationHistory.push({ role: 'user', content: message });
            addTypingIndicator();

            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/suitegpt-chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        message: message,
                        history: conversationHistory.slice(-10)
                    })
                });

                removeTypingIndicator();

                if (!response.ok) throw new Error('Failed');

                const data = await response.json();
                addMessage(data.response, 'assistant', data.recommendedApp, userQuery);
                conversationHistory.push({ role: 'assistant', content: data.response });

            } catch (error) {
                removeTypingIndicator();
                const fallback = getLocalResponse(message);
                addMessage(fallback.response, 'assistant', fallback.recommendedApp, userQuery);
                conversationHistory.push({ role: 'assistant', content: fallback.response });
            }

            isLoading = false;
            sendBtn.disabled = !chatInput.value.trim();
            chatInput.focus();
        }

        function getLocalResponse(message) {
            const keywords = {
                'foodvitals': ['nutrition', 'diet', 'calories', 'food', 'meals', 'weight', 'eating', 'healthy'],
                'trueform': ['back pain', 'posture', 'stretching', 'physical therapy', 'mobility', 'pain', 'sitting'],
                'opticrep': ['workout', 'gym', 'fitness', 'exercise', 'training', 'muscle', 'strength'],
                'cheshbon': ['money', 'finance', 'budget', 'spending', 'savings', 'financial'],
                'remcast': ['reminder', 'routine', 'morning', 'habits', 'schedule', 'notification'],
                'defi-knowledge': ['defi', 'crypto', 'blockchain', 'yield', 'trading']
            };

            const lower = message.toLowerCase();

            // Check if this is a change request
            const isChangeRequest = lower.includes('add') || lower.includes('change') ||
                                   lower.includes('feature') || lower.includes('update') ||
                                   lower.includes('modify') || lower.includes('can you make') ||
                                   selectedPath === 'change';

            // Check if this is a build request
            const isBuildRequest = lower.includes('build') || lower.includes('create') ||
                                  lower.includes('make me') || lower.includes('i need an app') ||
                                  lower.includes('new app') || selectedPath === 'build';

            // Find matching app
            let matchedApp = null;
            for (const [app, words] of Object.entries(keywords)) {
                if (words.some(w => lower.includes(w))) {
                    matchedApp = app;
                    break;
                }
            }

            // Response based on intent
            if (isChangeRequest && matchedApp) {
                const appData = SUITE_APPS[matchedApp];
                return {
                    response: `Great idea for ${appData.name}!\n\nHere's how this works:\n\n` +
                             `1. We'll review your request\n` +
                             `2. If it fits the app's purpose, we'll add it for everyone\n` +
                             `3. If not, we can build a private version just for you\n\n` +
                             `Either way, you'll have what you need within ~12 hours.\n\n` +
                             `Want to submit this request?`,
                    recommendedApp: matchedApp
                };
            }

            if (isChangeRequest && !matchedApp) {
                return {
                    response: `I'd love to help with that change!\n\n` +
                             `Which app would you like to modify? Or if you're not sure, ` +
                             `just describe what you're trying to accomplish and I'll point you in the right direction.`,
                    recommendedApp: null
                };
            }

            if (isBuildRequest) {
                return {
                    response: `I can help you build something custom!\n\n` +
                             `AI Fleet can create apps tailored to your exact needs. ` +
                             `Depending on complexity, this usually takes 1-12 hours.\n\n` +
                             `Tell me more about what you need:\n` +
                             ` What problem are you trying to solve?\n` +
                             ` Any specific features in mind?\n` +
                             ` Will this be just for you, or for others too?`,
                    recommendedApp: null
                };
            }

            // Standard app recommendation
            if (matchedApp) {
                const appData = SUITE_APPS[matchedApp];
                return {
                    response: `${appData.name} is perfect for this!\n\n${appData.description}.\n\n` +
                             ` Pro tip: If you want any feature added to this app, just ask! ` +
                             `Changes are usually live within 12 hours.`,
                    recommendedApp: matchedApp
                };
            }

            // No match - offer to build
            return {
                response: `We don't have an app for that yet, but we can build one!\n\n` +
                         `AI Fleet creates custom apps in 1-12 hours. Just describe:\n` +
                         ` What problem you're solving\n` +
                         ` Key features you need\n\n` +
                         `Want me to start a request?`,
                recommendedApp: null
            };
        }

        // Initialize
        loadUseCases();

        // ============================================
        // CHAT IMPORT FEATURE
        // ============================================

        const importTrigger = document.getElementById('importTrigger');
        const importModal = document.getElementById('importModal');
        const importModalClose = document.getElementById('importModalClose');
        const importSources = document.querySelectorAll('.import-source');
        const importInstructions = document.getElementById('importInstructions');
        const importDropzone = document.getElementById('importDropzone');
        const importFileInput = document.getElementById('importFileInput');
        const importStepUpload = document.getElementById('importStepUpload');
        const importProgress = document.getElementById('importProgress');
        const importProgressText = document.getElementById('importProgressText');
        const importProgressFill = document.getElementById('importProgressFill');
        const importResults = document.getElementById('importResults');
        const importDone = document.getElementById('importDone');
        const importRequestCustom = document.getElementById('importRequestCustom');

        let selectedSource = 'chatgpt';
        let analysisResults = null;

        // Instructions for each source
        const sourceInstructions = {
            chatgpt: {
                icon: '',
                title: 'How to export from ChatGPT',
                steps: [
                    'Go to <code>chat.openai.com</code>',
                    'Click your profile  <strong>Settings</strong>',
                    'Go to <strong>Data controls</strong>',
                    'Click <strong>Export data</strong>',
                    'Check your email for the download link',
                    'Upload the <code>conversations.json</code> file below'
                ]
            },
            claude: {
                icon: '',
                title: 'How to export from Claude',
                steps: [
                    'Go to <code>claude.ai</code>',
                    'Click your profile  <strong>Settings</strong>',
                    'Go to <strong>Account</strong> tab',
                    'Click <strong>Export Data</strong>',
                    'Download the JSON file',
                    'Upload it below'
                ]
            },
            gemini: {
                icon: '',
                title: 'How to export from Gemini',
                steps: [
                    'Go to <code>takeout.google.com</code>',
                    'Deselect all, then select <strong>Gemini Apps</strong>',
                    'Click <strong>Next step</strong>  <strong>Create export</strong>',
                    'Download when ready',
                    'Extract and upload the conversations JSON'
                ]
            }
        };

        // Open/close modal
        importTrigger.addEventListener('click', () => {
            importModal.classList.add('active');
            resetImportModal();
        });

        importModalClose.addEventListener('click', () => {
            importModal.classList.remove('active');
        });

        importModal.addEventListener('click', (e) => {
            if (e.target === importModal) {
                importModal.classList.remove('active');
            }
        });

        // Source selection
        importSources.forEach(source => {
            source.addEventListener('click', () => {
                importSources.forEach(s => s.classList.remove('selected'));
                source.classList.add('selected');
                selectedSource = source.dataset.source;
                updateInstructions();
            });
        });

        function updateInstructions() {
            const instructions = sourceInstructions[selectedSource];
            importInstructions.innerHTML = `
                <h4>${instructions.icon} ${instructions.title}</h4>
                <ol>
                    ${instructions.steps.map(step => `<li>${step}</li>`).join('')}
                </ol>
            `;
        }

        // Drag and drop
        importDropzone.addEventListener('click', () => importFileInput.click());

        importDropzone.addEventListener('dragover', (e) => {
            e.preventDefault();
            importDropzone.classList.add('dragover');
        });

        importDropzone.addEventListener('dragleave', () => {
            importDropzone.classList.remove('dragover');
        });

        importDropzone.addEventListener('drop', (e) => {
            e.preventDefault();
            importDropzone.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file) processFile(file);
        });

        importFileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) processFile(file);
        });

        // Rate limiting check
        let isTestMode = false;

        function checkRateLimit() {
            if (isTestMode) return { allowed: true };

            const lastImport = localStorage.getItem('suitegpt_last_import');
            if (lastImport) {
                const lastTime = new Date(lastImport);
                const now = new Date();
                const hoursSince = (now - lastTime) / (1000 * 60 * 60);

                if (hoursSince < 24) {
                    const hoursLeft = Math.ceil(24 - hoursSince);
                    return { allowed: false, hoursLeft };
                }
            }
            return { allowed: true };
        }

        function setRateLimitTimestamp() {
            if (!isTestMode) {
                localStorage.setItem('suitegpt_last_import', new Date().toISOString());
            }
        }

        // Load test data
        const loadTestDataBtn = document.getElementById('loadTestData');
        loadTestDataBtn.addEventListener('click', async () => {
            isTestMode = true;
            loadTestDataBtn.textContent = ' Loading test data...';

            try {
                const response = await fetch('/test-data/sample-chatgpt-export.json');
                if (!response.ok) throw new Error('Could not load test data');

                const testData = await response.json();

                // Create a fake file from the test data
                const blob = new Blob([JSON.stringify(testData)], { type: 'application/json' });
                const fakeFile = new File([blob], 'test-conversations.json', { type: 'application/json' });

                // Process it
                processFile(fakeFile);
            } catch (error) {
                console.error('Error loading test data:', error);
                alert('Could not load test data. Try uploading your own file.');
                loadTestDataBtn.textContent = ' Load sample data to test the flow';
            }
        });

        // Reset test mode on modal close
        const originalResetImportModal = resetImportModal;
        resetImportModal = function() {
            originalResetImportModal();
            isTestMode = false;
            loadTestDataBtn.textContent = ' Load sample data to test the flow';
        };

        // Process the uploaded file
        async function processFile(file) {
            // Check rate limit
            const rateCheck = checkRateLimit();
            if (!rateCheck.allowed) {
                alert(`You can only import once per day. Please try again in ${rateCheck.hoursLeft} hours.\n\nThis helps us manage costs while keeping the service free.`);
                return;
            }

            const consentAnalyze = document.getElementById('consentAnalyze').checked;
            if (!consentAnalyze) {
                alert('Please consent to analysis to continue.');
                return;
            }

            // Show progress
            importStepUpload.style.display = 'none';
            importProgress.classList.add('active');
            updateProgress(10, 'Reading file...');

            try {
                let conversations = [];

                if (file.name.endsWith('.zip')) {
                    // Handle zip file (ChatGPT export comes as zip)
                    updateProgress(20, 'Extracting zip file...');
                    const JSZip = await loadJSZip();
                    const zip = await JSZip.loadAsync(file);
                    const conversationsFile = zip.file('conversations.json');
                    if (conversationsFile) {
                        const content = await conversationsFile.async('string');
                        conversations = JSON.parse(content);
                    } else {
                        throw new Error('conversations.json not found in zip');
                    }
                } else {
                    // Handle direct JSON
                    const content = await file.text();
                    conversations = JSON.parse(content);
                }

                updateProgress(40, 'Parsing conversations...');

                // Extract messages based on source
                const extractedData = extractMessages(conversations, selectedSource);

                updateProgress(60, 'Analyzing patterns...');

                // Send to API for analysis
                const analysis = await analyzeChats(extractedData);

                updateProgress(100, 'Complete!');

                // Set rate limit timestamp
                setRateLimitTimestamp();

                // Show results
                setTimeout(() => {
                    displayResults(analysis, extractedData);
                }, 500);

            } catch (error) {
                console.error('Import error:', error);
                alert('Error processing file: ' + error.message);
                resetImportModal();
            }
        }

        // Load JSZip dynamically if needed
        async function loadJSZip() {
            if (window.JSZip) return window.JSZip;

            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
                script.onload = () => resolve(window.JSZip);
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        // Extract messages from different formats
        function extractMessages(data, source) {
            let messages = [];
            let conversationCount = 0;

            if (source === 'chatgpt') {
                // ChatGPT format
                if (Array.isArray(data)) {
                    conversationCount = data.length;
                    data.forEach(conv => {
                        if (conv.mapping) {
                            Object.values(conv.mapping).forEach(node => {
                                if (node.message && node.message.author && node.message.author.role === 'user') {
                                    const content = node.message.content;
                                    if (content && content.parts) {
                                        messages.push(...content.parts.filter(p => typeof p === 'string'));
                                    }
                                }
                            });
                        }
                    });
                }
            } else if (source === 'claude') {
                // Claude format (adjust based on actual export format)
                if (Array.isArray(data)) {
                    conversationCount = data.length;
                    data.forEach(conv => {
                        if (conv.messages) {
                            conv.messages.forEach(msg => {
                                if (msg.role === 'human' || msg.role === 'user') {
                                    messages.push(msg.content || msg.text);
                                }
                            });
                        }
                    });
                }
            } else if (source === 'gemini') {
                // Gemini format
                if (Array.isArray(data)) {
                    conversationCount = data.length;
                    data.forEach(conv => {
                        if (conv.parts) {
                            conv.parts.forEach(part => {
                                if (part.role === 'user') {
                                    messages.push(part.text);
                                }
                            });
                        }
                    });
                }
            }

            return {
                source,
                conversationCount,
                messageCount: messages.length,
                messages: messages.filter(m => m && m.length > 0)
            };
        }

        // Analyze chats with AI
        async function analyzeChats(extractedData) {
            const consentImprove = document.getElementById('consentImprove').checked;

            // Take a sample of messages (to reduce API cost)
            const sampleSize = Math.min(extractedData.messages.length, 200);
            const sampledMessages = extractedData.messages
                .sort(() => Math.random() - 0.5)
                .slice(0, sampleSize);

            // Create a condensed summary for analysis
            const messagesSummary = sampledMessages.join('\n---\n').slice(0, 50000); // Limit tokens

            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/analyze-chat-history`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        messages: messagesSummary,
                        source: extractedData.source,
                        messageCount: extractedData.messageCount,
                        conversationCount: extractedData.conversationCount,
                        storeInsights: consentImprove
                    })
                });

                if (!response.ok) {
                    throw new Error('Analysis API failed');
                }

                return await response.json();
            } catch (error) {
                console.error('API Error, using local analysis:', error);
                // Fallback to local analysis
                return localAnalysis(extractedData);
            }
        }

        // Local fallback analysis - enhanced to extract app ideas
        function localAnalysis(extractedData) {
            const messages = extractedData.messages;
            const allText = messages.join(' ').toLowerCase();

            // Topic detection
            const topics = {
                'Health & Fitness': ['workout', 'exercise', 'diet', 'nutrition', 'weight', 'health', 'fitness', 'gym', 'muscle', 'calories', 'sleep', 'water', 'hydration'],
                'Finance & Money': ['money', 'budget', 'invest', 'savings', 'financial', 'income', 'expenses', 'crypto', 'trading', 'subscription', 'spending'],
                'Productivity': ['productivity', 'schedule', 'task', 'todo', 'organize', 'time management', 'habit', 'routine', 'reminder', 'focus', 'distraction', 'project'],
                'Learning & Education': ['learn', 'study', 'course', 'tutorial', 'understand', 'explain', 'how to', 'education', 'reading', 'book', 'language'],
                'Programming & Tech': ['code', 'programming', 'javascript', 'python', 'api', 'database', 'software', 'app', 'website'],
                'Writing & Content': ['write', 'essay', 'blog', 'content', 'article', 'email', 'story', 'creative', 'journal'],
                'Career & Work': ['job', 'career', 'interview', 'resume', 'work', 'professional', 'business', 'meeting'],
                'Lifestyle': ['cooking', 'wardrobe', 'clothes', 'outfit', 'social', 'introvert', 'pet', 'dog', 'cat', 'travel']
            };

            const detectedTopics = [];
            for (const [topic, keywords] of Object.entries(topics)) {
                const count = keywords.reduce((acc, keyword) => {
                    const regex = new RegExp(keyword, 'gi');
                    const matches = allText.match(regex);
                    return acc + (matches ? matches.length : 0);
                }, 0);
                if (count > 2) {
                    detectedTopics.push({ topic, count });
                }
            }
            detectedTopics.sort((a, b) => b.count - a.count);

            // Extract app ideas - look for specific patterns
            const appIdeaPatterns = [
                /i need an? app that ([^.!?]+)/gi,
                /i wish there was an? app ([^.!?]+)/gi,
                /i want an? app that ([^.!?]+)/gi,
                /i need something that ([^.!?]+)/gi,
                /i want something that ([^.!?]+)/gi,
                /an app that ([^.!?]+) would be/gi,
                /would be (cool|great|amazing|awesome) if ([^.!?]+)/gi,
                /i keep forgetting ([^.!?]+)/gi,
                /i can't ([^.!?]+)/gi,
                /i hate ([^.!?]+)/gi,
                /i struggle with ([^.!?]+)/gi,
                /help me ([^.!?]+)/gi,
                /track my ([^.!?]+)/gi,
                /remind me ([^.!?]+)/gi
            ];

            const extractedIdeas = [];
            const seenIdeas = new Set();

            messages.forEach(msg => {
                appIdeaPatterns.forEach(pattern => {
                    const matches = msg.matchAll(pattern);
                    for (const match of matches) {
                        const idea = match[1] || match[2];
                        if (idea && idea.length > 10 && idea.length < 200) {
                            const normalized = idea.toLowerCase().trim();
                            if (!seenIdeas.has(normalized)) {
                                seenIdeas.add(normalized);
                                extractedIdeas.push({
                                    text: idea.trim(),
                                    fullMessage: msg,
                                    category: categorizeIdea(idea)
                                });
                            }
                        }
                    }
                });
            });

            // Map topics to app recommendations
            const appMappings = {
                'Health & Fitness': ['foodvitals', 'trueform', 'opticrep'],
                'Finance & Money': ['cheshbon', 'defi-knowledge'],
                'Productivity': ['remcast'],
                'Learning & Education': ['defi-knowledge'],
                'Programming & Tech': [],
                'Writing & Content': [],
                'Career & Work': [],
                'Lifestyle': []
            };

            const recommendedApps = [];
            const matchedIdeas = [];
            const unmatchedIdeas = [];

            // Try to match ideas to existing apps
            extractedIdeas.forEach(idea => {
                const ideaLower = idea.text.toLowerCase();
                let matched = false;

                // Check for specific app matches
                if (ideaLower.includes('nutrition') || ideaLower.includes('meal') || ideaLower.includes('food') || ideaLower.includes('diet') || ideaLower.includes('calorie')) {
                    if (!recommendedApps.find(a => a.id === 'foodvitals')) {
                        recommendedApps.push({ id: 'foodvitals', ...SUITE_APPS['foodvitals'], matchScore: 90, matchedIdea: idea.text });
                    }
                    matchedIdeas.push({ ...idea, matchedApp: 'FoodVitals' });
                    matched = true;
                }
                if (ideaLower.includes('workout') || ideaLower.includes('exercise') || ideaLower.includes('gym') || ideaLower.includes('strength')) {
                    if (!recommendedApps.find(a => a.id === 'opticrep')) {
                        recommendedApps.push({ id: 'opticrep', ...SUITE_APPS['opticrep'], matchScore: 88, matchedIdea: idea.text });
                    }
                    matchedIdeas.push({ ...idea, matchedApp: 'OpticRep' });
                    matched = true;
                }
                if (ideaLower.includes('back pain') || ideaLower.includes('posture') || ideaLower.includes('stretch') || ideaLower.includes('physio')) {
                    if (!recommendedApps.find(a => a.id === 'trueform')) {
                        recommendedApps.push({ id: 'trueform', ...SUITE_APPS['trueform'], matchScore: 92, matchedIdea: idea.text });
                    }
                    matchedIdeas.push({ ...idea, matchedApp: 'TrueForm AI' });
                    matched = true;
                }
                if (ideaLower.includes('budget') || ideaLower.includes('money') || ideaLower.includes('spending') || ideaLower.includes('financial')) {
                    if (!recommendedApps.find(a => a.id === 'cheshbon')) {
                        recommendedApps.push({ id: 'cheshbon', ...SUITE_APPS['cheshbon'], matchScore: 85, matchedIdea: idea.text });
                    }
                    matchedIdeas.push({ ...idea, matchedApp: 'Cheshbon' });
                    matched = true;
                }
                if (ideaLower.includes('reminder') || ideaLower.includes('habit') || ideaLower.includes('routine') || ideaLower.includes('schedule')) {
                    if (!recommendedApps.find(a => a.id === 'remcast')) {
                        recommendedApps.push({ id: 'remcast', ...SUITE_APPS['remcast'], matchScore: 82, matchedIdea: idea.text });
                    }
                    matchedIdeas.push({ ...idea, matchedApp: 'RemCast' });
                    matched = true;
                }
                if (ideaLower.includes('defi') || ideaLower.includes('crypto') || ideaLower.includes('yield') || ideaLower.includes('blockchain')) {
                    if (!recommendedApps.find(a => a.id === 'defi-knowledge')) {
                        recommendedApps.push({ id: 'defi-knowledge', ...SUITE_APPS['defi-knowledge'], matchScore: 91, matchedIdea: idea.text });
                    }
                    matchedIdeas.push({ ...idea, matchedApp: 'DeFi Knowledge' });
                    matched = true;
                }

                if (!matched) {
                    unmatchedIdeas.push(idea);
                }
            });

            return {
                topics: detectedTopics.slice(0, 5),
                insights: detectedTopics.slice(0, 3).map(({ topic, count }) => ({
                    category: topic,
                    description: `You frequently discuss ${topic.toLowerCase()} topics (${count}+ mentions)`,
                    icon: getTopicIcon(topic)
                })),
                recommendations: recommendedApps.slice(0, 4),
                extractedIdeas: extractedIdeas.slice(0, 20),
                matchedIdeas: matchedIdeas.slice(0, 10),
                unmatchedIdeas: unmatchedIdeas.slice(0, 10),
                summary: `Based on ${extractedData.messageCount} messages, we found ${extractedIdeas.length} potential app ideas. ${matchedIdeas.length} match existing SUITE apps, and ${unmatchedIdeas.length} could be custom built for you.`
            };
        }

        function categorizeIdea(idea) {
            const lower = idea.toLowerCase();
            if (lower.includes('workout') || lower.includes('fitness') || lower.includes('health') || lower.includes('nutrition')) return 'Health & Fitness';
            if (lower.includes('money') || lower.includes('budget') || lower.includes('financial')) return 'Finance';
            if (lower.includes('habit') || lower.includes('remind') || lower.includes('schedule') || lower.includes('task')) return 'Productivity';
            if (lower.includes('learn') || lower.includes('study') || lower.includes('read')) return 'Learning';
            return 'Other';
        }

        function getTopicIcon(topic) {
            const icons = {
                'Health & Fitness': '',
                'Finance & Money': '',
                'Productivity': '',
                'Learning & Education': '',
                'Programming & Tech': '',
                'Writing & Content': '',
                'Career & Work': ''
            };
            return icons[topic] || '';
        }

        function updateProgress(percent, text) {
            importProgressFill.style.width = percent + '%';
            importProgressText.textContent = text;
        }

        function displayResults(analysis, extractedData) {
            analysisResults = analysis;

            // Hide progress, show results
            importProgress.classList.remove('active');
            importResults.classList.add('active');

            // Update stats
            document.getElementById('statConversations').textContent = extractedData.conversationCount.toLocaleString();
            document.getElementById('statMessages').textContent = extractedData.messageCount.toLocaleString();
            document.getElementById('statTopics').textContent = (analysis.extractedIdeas?.length || analysis.topics?.length || 0);

            // Update third stat label to show ideas count
            document.querySelector('#statTopics').nextElementSibling.textContent = 'App Ideas Found';

            // Display summary
            const insightsList = document.getElementById('insightsList');
            let insightsHtml = '';

            if (analysis.summary) {
                insightsHtml += `<div class="import-summary-text">${analysis.summary}</div>`;
            }

            insightsHtml += (analysis.insights || []).map(insight => `
                <div class="import-insight-item">
                    <div class="import-insight-icon" style="background: rgba(99, 102, 241, 0.15);">
                        ${insight.icon || ''}
                    </div>
                    <div class="import-insight-content">
                        <h5>${insight.category}</h5>
                        <p>${insight.description}</p>
                    </div>
                </div>
            `).join('');

            insightsList.innerHTML = insightsHtml;

            // Display matched recommendations
            const recommendationsList = document.getElementById('recommendationsList');
            if (analysis.recommendations && analysis.recommendations.length > 0) {
                recommendationsList.innerHTML = analysis.recommendations.map(app => `
                    <a href="${app.url || '#'}" class="import-app-rec">
                        <div class="import-app-icon" style="background: ${app.iconBg || 'var(--bg-card)'}">
                            ${app.icon || ''}
                        </div>
                        <div class="import-app-info">
                            <h5>${app.name}</h5>
                            <p>${app.matchedIdea ? `"${app.matchedIdea.slice(0, 60)}${app.matchedIdea.length > 60 ? '...' : ''}"` : app.description}</p>
                        </div>
                        <div class="import-app-match">${app.matchScore || 85}% match</div>
                    </a>
                `).join('');
            } else {
                recommendationsList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: var(--text-tertiary);">
                        <p>No exact matches found, but we can build something custom!</p>
                    </div>
                `;
            }

            // Display unmatched ideas
            const unmatchedSection = document.getElementById('importUnmatched');
            const unmatchedList = document.getElementById('unmatchedList');

            if (analysis.unmatchedIdeas && analysis.unmatchedIdeas.length > 0) {
                unmatchedSection.style.display = 'block';
                unmatchedList.innerHTML = analysis.unmatchedIdeas.map((idea, index) => `
                    <div class="unmatched-idea">
                        <div class="unmatched-idea-text">"${idea.text}"</div>
                        <div class="unmatched-idea-meta">
                            <span class="unmatched-idea-category">${idea.category}</span>
                            <button class="unmatched-idea-request" data-idea="${encodeURIComponent(idea.text)}">
                                Request This App 
                            </button>
                        </div>
                    </div>
                `).join('');

                // Add click handlers for request buttons
                unmatchedList.querySelectorAll('.unmatched-idea-request').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const idea = decodeURIComponent(btn.dataset.idea);
                        requestAppIdea(idea);
                    });
                });
            } else {
                unmatchedSection.style.display = 'none';
            }
        }

        // Handle requesting an app from an extracted idea
        function requestAppIdea(idea) {
            importModal.classList.remove('active');

            // Pre-fill the chat with the request
            heroSection.classList.add('chat-active');
            chatContainer.classList.add('active');

            const message = `I'd like to request an app that: ${idea}`;

            addMessage(message, 'user');
            conversationHistory.push({ role: 'user', content: message });

            // Trigger response
            addTypingIndicator();
            setTimeout(() => {
                removeTypingIndicator();
                const response = `Great idea! We can build this for you.\n\n` +
                    `Here's how it works:\n` +
                    `1. We'll review your request\n` +
                    `2. AI Fleet will design and build the app\n` +
                    `3. You'll have it within 1-12 hours\n\n` +
                    `Want to submit this request? If so, tell me:\n` +
                    ` Any specific features you'd want?\n` +
                    ` Should this be private (just for you) or public?`;
                addMessage(response, 'assistant');
                conversationHistory.push({ role: 'assistant', content: response });
            }, 1500);
        }

        function resetImportModal() {
            importStepUpload.style.display = 'block';
            importProgress.classList.remove('active');
            importResults.classList.remove('active');
            importProgressFill.style.width = '0%';
            importFileInput.value = '';
        }

        // Done button
        importDone.addEventListener('click', () => {
            importModal.classList.remove('active');
        });

        // Request custom app
        importRequestCustom.addEventListener('click', () => {
            importModal.classList.remove('active');

            // Pre-fill the chat with a request based on analysis
            if (analysisResults && analysisResults.summary) {
                heroSection.classList.add('chat-active');
                chatContainer.classList.add('active');

                const message = `Based on my chat history, I'm interested in: ${analysisResults.topics?.slice(0, 3).map(t => t.topic).join(', ')}. Can you help me find or build something for this?`;

                addMessage(message, 'user');
                conversationHistory.push({ role: 'user', content: message });

                // Trigger response
                addTypingIndicator();
                setTimeout(() => {
                    removeTypingIndicator();
                    const response = `Great! Based on your interests, I can see you're focused on ${analysisResults.topics?.[0]?.topic?.toLowerCase() || 'several areas'}.\n\nWe can either:\n1. Set you up with existing apps that match your needs\n2. Build something custom tailored to your specific workflow\n\nWhat sounds better to you?`;
                    addMessage(response, 'assistant');
                    conversationHistory.push({ role: 'assistant', content: response });
                }, 1500);
            }
        });
    </script>
</body>
</html>
