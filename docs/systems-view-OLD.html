<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Systems Architecture | SUITE</title>
    <link rel="icon" type="image/png" href="../assets/suite-token.png">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../nav.css">
    <style>
        /* Base styles */
        * {
            box-sizing: border-box;
        }

        /* Fix nav logo image size */
        .nav-logo img {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            object-fit: contain;
        }

        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #fff5eb 0%, #ffe4d4 20%, #ffd4e3 50%, #e8d5f9 80%, #d4e5ff 100%);
            min-height: 100vh;
            color: #2d1b4e;
        }

        /* Canvas Container */
        .canvas-container {
            width: 100%;
            min-height: 100vh;
            padding: 90px 24px 40px 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Main docs wrapper */
        .docs-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 32px;
            box-shadow: 0 16px 80px rgba(0, 0, 0, 0.08);
            padding: 30px;
            width: 100%;
            max-width: 1200px;
            display: flex;
            gap: 30px;
        }

        /* Sidebar */
        .docs-sidebar {
            width: 220px;
            flex-shrink: 0;
            border-right: 1px solid rgba(0, 0, 0, 0.06);
            padding-right: 24px;
        }

        .sidebar-section {
            margin-bottom: 24px;
        }

        .sidebar-title {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #9ca3af;
            margin-bottom: 12px;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            color: #2d1b4e;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s;
            margin-bottom: 4px;
        }

        .sidebar-link:hover {
            background: rgba(255, 149, 0, 0.1);
            color: #ff9500;
        }

        .sidebar-link.active {
            background: linear-gradient(135deg, #ff9500, #ff6b9d);
            color: white;
        }

        /* Main content */
        .docs-content {
            flex: 1;
            min-width: 0;
        }

        .system-card {
            background: white;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .system-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: #2d1b4e;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .system-desc {
            color: #666;
            margin-bottom: 24px;
            font-size: 1rem;
        }

        /* Side-by-side layout: image left, dropdowns right */
        .system-layout {
            display: flex;
            gap: 24px;
            align-items: flex-start;
        }

        .system-diagram {
            flex: 1;
            min-width: 0;
        }

        .system-details {
            flex: 1;
            min-width: 280px;
            max-height: 500px;
            overflow-y: auto;
            overflow-x: visible;
        }

        .diagram-img {
            width: 100%;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        /* Tooltip for terms */
        .term-tooltip {
            position: relative;
            color: #ff9500;
            font-weight: 700;
            cursor: help;
            border-bottom: 1px dashed #ff9500;
        }

        .term-tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: #1a1a2e;
            color: white;
            padding: 10px 14px;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 500;
            max-width: 280px;
            white-space: normal;
            text-align: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease;
            z-index: 99999;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
            pointer-events: none;
        }

        .term-tooltip:hover::after {
            opacity: 1;
            visibility: visible;
        }

        /* Allow tooltips to overflow the scrollable container */
        .expand-section {
            overflow: visible;
        }

        .expand-content {
            overflow: visible;
        }

        /* Stack on mobile */
        @media (max-width: 900px) {
            .system-layout {
                flex-direction: column;
            }

            .system-details {
                max-height: none;
            }
        }

        .expand-section {
            border: 1px solid #eee;
            border-radius: 12px;
            margin-bottom: 12px;
            overflow: hidden;
        }

        .expand-section summary {
            padding: 16px 20px;
            cursor: pointer;
            font-weight: 700;
            color: #2d1b4e;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .expand-section summary:hover {
            background: #f0f0f5;
        }

        .expand-section[open] summary {
            border-bottom: 1px solid #eee;
            background: linear-gradient(135deg, #ff9500, #ff6b9d);
            color: white;
        }

        .expand-content {
            padding: 20px;
            background: white;
            color: #444;
            line-height: 1.7;
        }

        .expand-content code {
            background: #f5f5f5;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .expand-content pre {
            background: #1a1a2e;
            color: #e0e0e0;
            padding: 16px;
            border-radius: 8px;
            font-size: 0.85rem;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-x: hidden;
        }

        .phase-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-right: 8px;
        }

        .phase-research {
            background: #dbeafe;
            color: #1d4ed8;
        }

        .phase-build {
            background: #dcfce7;
            color: #16a34a;
        }

        .phase-deploy {
            background: #fef3c7;
            color: #d97706;
        }

        .toc {
            background: rgba(255, 149, 0, 0.08);
            border: 2px solid rgba(255, 149, 0, 0.2);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 40px;
        }

        .toc h3 {
            margin: 0 0 16px;
            color: #ff9500;
        }

        .toc-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
        }

        .toc-list a {
            color: #2d1b4e;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .toc-list a:hover {
            background: rgba(255, 149, 0, 0.1);
            color: #ff9500;
        }
    </style>
</head>

<body>
    <!-- Nav placeholder -->
    <nav class="nav">
        <div class="nav-inner">
            <a href="../index.html" class="nav-logo">
                <img src="../assets/suite-token.png" alt="SUITE">SUITE
            </a>
            <div class="nav-links">
                <a href="../apps.html">Apps</a>
                <a href="../developer-portal.html">Build</a>
                <a href="index.html">Docs</a>
                <a href="../start-building.html" class="nav-cta">üöÄ Start Building</a>
            </div>
        </div>
    </nav>

    <div class="canvas-container">
        <div class="docs-container">
            <!-- Sidebar -->
            <aside class="docs-sidebar"></aside>

            <!-- Main Content -->
            <main class="docs-content">
                <h1 style="font-size: 2.5rem; margin-bottom: 8px;">üèóÔ∏è Systems Architecture</h1>
                <p style="color: #666; font-size: 1.1rem; margin-bottom: 32px;">
                    Bird's-eye view of every system in the SUITE ecosystem. Click any step to see the logic behind it.
                </p>

                <!-- Table of Contents -->
                <div class="toc">
                    <h3>üìã Jump to System</h3>
                    <div class="toc-list">
                        <a href="#ai-fleet">ü§ñ AI Fleet</a>
                        <a href="#watcher-bot">üì° Watcher Bot</a>
                        <a href="#pc-laptop-sync">üîÑ PC-Laptop Sync</a>
                        <a href="#treasury">üí∞ Treasury</a>
                        <a href="#app-store">üè™ App Store</a>
                        <a href="#content-marketplace">üì∏ Content Marketplace</a>
                        <a href="#discord-integration">üí¨ Discord Integration</a>
                        <a href="#auth-system">üîê Authentication</a>
                    </div>
                </div>

                <!-- AI FLEET SYSTEM -->
                <div class="system-card" id="ai-fleet">
                    <h2 class="system-title">ü§ñ Autonomous App Creation</h2>
                    <p class="system-desc">Fully autonomous system that researches, designs, and builds complete apps
                        24/7 without human intervention. Uses 50-prompt staged builds with automatic testing and bug
                        loops.</p>

                    <div class="system-layout">
                        <div class="system-diagram">
                            <img src="diagrams/ai-fleet.png" alt="AI Fleet System Diagram" class="diagram-img">
                        </div>
                        <div class="system-details">
                            <!-- PHASE 1: IDEA GENERATION -->
                            <details class="expand-section">
                                <summary><span class="phase-badge phase-research">PHASE 1</span> Intelligent Batch
                                    Ideation</summary>
                                <div class="expand-content">
                                    <p><strong>Generates 5 diverse app ideas</strong> using:</p>
                                    <ul>
                                        <li>üìÖ <strong>30-day history</strong> ‚Äî Avoids repeating recent ideas</li>
                                        <li>‚ùå <strong>Rejection patterns</strong> ‚Äî Learns from rejected concepts</li>
                                        <li>‚úÖ <strong>Success patterns</strong> ‚Äî Does more of what gets approved</li>
                                        <li>üå∏ <strong>Seasonal context</strong> ‚Äî January = resolutions, October =
                                            Halloween, etc.</li>
                                    </ul>
                                    <p>You pick ONE idea to build, or enter a "New Direction" to regenerate.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Human requests? ‚Üí DO THOSE FIRST</summary>
                                <div class="expand-content">
                                    <p>When a human submits a bug report or feature request via Discord, drop everything
                                        and handle it first. Human priority always beats autonomous work.</p>
                                </div>
                            </details>

                            <!-- PHASE 2: STAGED BUILD -->
                            <details class="expand-section">
                                <summary><span class="phase-badge phase-build">PHASE 2</span> Staged Build (50 Prompts)
                                </summary>
                                <div class="expand-content">
                                    <p><strong>App built across 50 intelligent prompts in stages:</strong></p>
                                    <pre>
STAGE 0: Init (Prompts 1-2)
‚îú‚îÄ‚îÄ Create Expo app
‚îî‚îÄ‚îÄ Set up navigation, theme, base screens

STAGE 1: Core Build (Prompts 3-10)
‚îú‚îÄ‚îÄ Build core features from approved idea
‚îú‚îÄ‚îÄ Implement main screens
‚îî‚îÄ‚îÄ ‚îÄ‚îÄ‚îÄ CHECKPOINT: Test, capture bugs ‚îÄ‚îÄ‚îÄ
    ‚îî‚îÄ‚îÄ BUG LOOP: Keep prompting until 0 errors

STAGE 2: Reframe + Enhance (Prompts 11-20)
‚îú‚îÄ‚îÄ AI re-analyzes what exists
‚îú‚îÄ‚îÄ Decides TOP 5 most valuable additions
‚îú‚îÄ‚îÄ Builds those features
‚îî‚îÄ‚îÄ ‚îÄ‚îÄ‚îÄ CHECKPOINT: Test, fix bugs ‚îÄ‚îÄ‚îÄ

STAGE 3: Polish (Prompts 21-35)
‚îú‚îÄ‚îÄ Animations, transitions
‚îú‚îÄ‚îÄ Error handling, edge cases
‚îú‚îÄ‚îÄ Loading states, empty states
‚îî‚îÄ‚îÄ ‚îÄ‚îÄ‚îÄ CHECKPOINT: Test, fix bugs ‚îÄ‚îÄ‚îÄ

STAGE 4: Final Touches (Prompts 36-45)
‚îú‚îÄ‚îÄ App icon + splash screen
‚îú‚îÄ‚îÄ Performance optimization
‚îú‚îÄ‚îÄ Store screenshots
‚îî‚îÄ‚îÄ ‚îÄ‚îÄ‚îÄ CHECKPOINT: Test, fix bugs ‚îÄ‚îÄ‚îÄ

STAGE 5: Buffer (Prompts 46-50)
‚îú‚îÄ‚îÄ Unexpected issues
‚îú‚îÄ‚îÄ Final refinements
‚îî‚îÄ‚îÄ Write build_complete.json
                                    </pre>
                                </div>
                            </details>

                            <!-- CHECKPOINTS -->
                            <details class="expand-section">
                                <summary>üîç Checkpoint Testing</summary>
                                <div class="expand-content">
                                    <p>After each stage, the system:</p>
                                    <ol>
                                        <li>Opens browser / runs <code>npm start</code></li>
                                        <li>Captures console logs and errors</li>
                                        <li>Takes screenshots</li>
                                        <li>AI analyzes: What works? What's broken?</li>
                                    </ol>
                                </div>
                            </details>

                            <!-- BUG LOOP -->
                            <details class="expand-section">
                                <summary>üêõ Bug Loop (Until Clean)</summary>
                                <div class="expand-content">
                                    <p><strong>Critical:</strong> Don't proceed with broken code!</p>
                                    <pre>
while (errors.length > 0) {
    prompt("Fix these errors: " + errors);
    test();
    errors = captureConsoleErrors();
}
// Only continue when bugs = 0
                                    </pre>
                                    <p>AI keeps fixing until zero console errors detected.</p>
                                </div>
                            </details>

                            <!-- REFRAMING -->
                            <details class="expand-section">
                                <summary>üîÑ Stage Reframing</summary>
                                <div class="expand-content">
                                    <p>Every ~10 prompts, AI gets a fresh perspective prompt:</p>
                                    <blockquote>
                                        "Look at what currently exists in this app. Based on the current state, what are
                                        the TOP 5 features that would add the MOST value? Consider user experience gaps,
                                        missing functionality, polish opportunities."
                                    </blockquote>
                                    <p>This prevents tunnel vision and lets AI adapt as the app grows.</p>
                                </div>
                            </details>

                            <!-- PROGRESS TRACKING -->
                            <details class="expand-section">
                                <summary>üìä Progress Tracking</summary>
                                <div class="expand-content">
                                    <p>Throughout the build:</p>
                                    <ul>
                                        <li><code>PROGRESS.md</code> ‚Äî Written after each stage</li>
                                        <li>Git commits ‚Äî After each successful stage (rollback points)</li>
                                        <li>Screenshots ‚Äî Captured at each checkpoint</li>
                                        <li>Prompt counter ‚Äî Tracks 1-50 progress</li>
                                    </ul>
                                </div>
                            </details>

                            <!-- COMPLETION -->
                            <details class="expand-section">
                                <summary><span class="phase-badge phase-deploy">PHASE 3</span> Completion ‚Üí Review Queue
                                </summary>
                                <div class="expand-content">
                                    <p>After prompt 50:</p>
                                    <ol>
                                        <li>AI writes <code>build_complete.json</code> with summary</li>
                                        <li>Status changes to "review"</li>
                                        <li>App appears in your dashboard "Ready for Review"</li>
                                        <li>You can: <strong>Deploy</strong> / <strong>Refine</strong> /
                                            <strong>Scrap</strong>
                                        </li>
                                    </ol>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>D) REPEAT ‚Üí Back to Ideation</summary>
                                <div class="expand-content">
                                    <p>After deployment, cycle back to generate the next batch of 5 ideas. The fleet
                                        never stops!</p>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- WATCHER BOT -->
                <div class="system-card" id="watcher-bot">
                    <h2 class="system-title">üì° Watcher Bot</h2>
                    <p class="system-desc">Processes prompts from Discord/Supabase and injects them into Antigravity IDE
                        windows.</p>

                    <div class="system-layout">
                        <div class="system-diagram">
                            <img src="diagrams/watcher-bot.png" alt="Watcher Bot System Diagram" class="diagram-img">
                        </div>
                        <div class="system-details">
                            <details class="expand-section">
                                <summary>Poll Supabase for prompts</summary>
                                <div class="expand-content">
                                    <p>Every 5 seconds, check for pending prompts in the database.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Slot allocation (round-robin across 3 IDE windows)</summary>
                                <div class="expand-content">
                                    <p>Distribute prompts evenly across 3 Antigravity IDE windows to maximize
                                        throughput.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Click chat input</summary>
                                <div class="expand-content">
                                    <p>Focus the chat input field in the target IDE window.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Type prompt (<span class="term-tooltip"
                                        data-tooltip="Python library for GUI automation - simulates keyboard and mouse">pyautogui</span>)
                                </summary>
                                <div class="expand-content">
                                    <p>Use pyautogui to type the prompt text into the IDE at ~100 chars/second.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Press Enter</summary>
                                <div class="expand-content">
                                    <p>Submit the prompt to the AI agent.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Mark slot as busy</summary>
                                <div class="expand-content">
                                    <p>Flag the slot so background workers don't interfere while the AI is processing.
                                    </p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Click Accept buttons on all windows</summary>
                                <div class="expand-content">
                                    <p>Background worker clicks Accept buttons to approve AI changes every 60 seconds.
                                    </p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Git pull + push to sync changes</summary>
                                <div class="expand-content">
                                    <p>Automatically sync code changes via Git between PC and laptop.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Update .last_push timestamp</summary>
                                <div class="expand-content">
                                    <p>Write timestamp to file so the UI can show when the last push occurred.</p>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- PC-LAPTOP SYNC -->
                <div class="system-card" id="pc-laptop-sync">
                    <h2 class="system-title">üîÑ PC-Laptop Sync</h2>
                    <p class="system-desc">Bidirectional file sync between your PC and laptop via GitHub.</p>

                    <div class="system-layout">
                        <div class="system-diagram">
                            <img src="diagrams/pc-laptop-sync.png" alt="PC-Laptop Sync System Diagram"
                                class="diagram-img">
                        </div>
                        <div class="system-details">
                            <details class="expand-section">
                                <summary>Laptop (You code)</summary>
                                <div class="expand-content">
                                    <p>Your laptop where you manually code and review changes.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>PC (AI codes)</summary>
                                <div class="expand-content">
                                    <p>Your PC running the AI agent that automatically writes code.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>git push (from Laptop)</summary>
                                <div class="expand-content">
                                    <p>Push your manual changes from laptop to GitHub.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>git push (from PC)</summary>
                                <div class="expand-content">
                                    <p>watcher.py auto-pushes AI changes every 60 seconds.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>GitHub (stuart-hollinger-landing)</summary>
                                <div class="expand-content">
                                    <p>Central repository that syncs changes between your machines.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>git pull (to Laptop)</summary>
                                <div class="expand-content">
                                    <p>Pull latest AI changes to your laptop via server.py.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>git pull (to PC)</summary>
                                <div class="expand-content">
                                    <p>watcher.py auto-pulls your manual changes to the PC.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>server.py - Manual pull / Auto-pull toggle</summary>
                                <div class="expand-content">
                                    <p>Control laptop sync via localhost:3000 UI with manual or auto-pull options.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>watcher.py - Auto push/pull every 60s</summary>
                                <div class="expand-content">
                                    <p>Background worker on PC that automatically syncs every 60 seconds.</p>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- TREASURY & TOKENOMICS -->
                <div class="system-card" id="treasury">
                    <h2 class="system-title">üí∞ Treasury & Tokenomics</h2>
                    <p class="system-desc">$SUITE token economy: floor price guarantee, yield distribution, and giving.
                    </p>

                    <div class="system-layout">
                        <div class="system-diagram">
                            <img src="diagrams/treasury.png" alt="Treasury System Diagram" class="diagram-img">
                        </div>
                        <div class="system-details">
                            <details class="expand-section">
                                <summary>SUITE TREASURY</summary>
                                <div class="expand-content">
                                    <p>The central smart contract holding all treasury funds backing $SUITE tokens.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>USER DEPOSITS</summary>
                                <div class="expand-content">
                                    <p>Users deposit ETH (or any ERC-20 via 0x swap) into the Treasury Contract.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>ETH ‚Üí Treasury Contract (Any ERC-20 via 0x swap)</summary>
                                <div class="expand-content">
                                    <p>Deposits accepted in any token, automatically swapped to ETH via 0x aggregator.
                                    </p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Mint $SUITE tokens (1:1 backed)</summary>
                                <div class="expand-content">
                                    <p>For each deposit, proportional $SUITE tokens are minted to the user, always
                                        backed by ETH.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>TREASURY ALLOCATION</summary>
                                <div class="expand-content">
                                    <p>How the treasury funds are distributed and invested.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Under $100k ‚Üí 100% reinvest</summary>
                                <div class="expand-content">
                                    <p>When treasury is under $100k, all yield is reinvested for growth.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Over $100k ‚Üí 90% reinvest / 10% giving</summary>
                                <div class="expand-content">
                                    <p>When treasury exceeds $100k, 90% reinvested and 10% goes to Giving Fund for
                                        charity votes.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>USER WITHDRAWALS</summary>
                                <div class="expand-content">
                                    <p>Users can withdraw their share at any time by burning $SUITE tokens.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>$SUITE ‚Üí Burn tokens ‚Üí Receive ETH</summary>
                                <div class="expand-content">
                                    <p>Burn your $SUITE to receive proportional ETH at the floor price guaranteed.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>FLOOR PRICE = Treasury ETH Balance / Total $SUITE Supply</summary>
                                <div class="expand-content">
                                    <p>The guaranteed minimum value of each $SUITE token. Users can ALWAYS withdraw at
                                        floor price.</p>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- APP STORE -->
                <div class="system-card" id="app-store">
                    <h2 class="system-title">üè™ App Store</h2>
                    <p class="system-desc">Discovery, deployment, and distribution of SUITE apps.</p>

                    <div class="system-layout">
                        <div class="system-diagram">
                            <img src="diagrams/app-store.png" alt="App Store System Diagram" class="diagram-img">
                        </div>
                        <div class="system-details">
                            <details class="expand-section">
                                <summary>SUITE APP STORE</summary>
                                <div class="expand-content">
                                    <p>The central marketplace for all SUITE ecosystem apps.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Developer (You)</summary>
                                <div class="expand-content">
                                    <p>You build apps using Cadence AI or code manually.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Submit App via FORGE</summary>
                                <div class="expand-content">
                                    <p>Use /submit-app command in Discord to submit your app for review.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Review & Approval (Quality check)</summary>
                                <div class="expand-content">
                                    <p>Community reviewers check app quality, safety, and functionality.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>APP LISTING</summary>
                                <div class="expand-content">
                                    <p>Your approved app appears in the store listing.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>App Name / Description / Screenshots</summary>
                                <div class="expand-content">
                                    <p>Basic app info displayed on the store page.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Category / Rating / Developer</summary>
                                <div class="expand-content">
                                    <p>Discovery metadata to help users find your app.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Price (SUITE) / Downloads / Last Updated</summary>
                                <div class="expand-content">
                                    <p>Pricing and stats shown on the app listing.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>USER PURCHASES</summary>
                                <div class="expand-content">
                                    <p>Users pay in $SUITE to access premium features.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>User ‚Üí Pay $SUITE ‚Üí 70% to Developer</summary>
                                <div class="expand-content">
                                    <p>Developer receives 70% of each purchase.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>20% to Treasury</summary>
                                <div class="expand-content">
                                    <p>Platform sustainability fee to back the treasury.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>10% to Giving Fund</summary>
                                <div class="expand-content">
                                    <p>Charitable contribution to community-voted causes.</p>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- CONTENT MARKETPLACE -->
                <div class="system-card" id="content-marketplace">
                    <h2 class="system-title">üì∏ Content Marketplace</h2>
                    <p class="system-desc">Community-driven content creation. Post bounties, submit work, earn SUITE.
                    </p>

                    <div class="system-layout">
                        <div class="system-diagram">
                            <img src="diagrams/content-marketplace.png" alt="Content Marketplace System Diagram"
                                class="diagram-img">
                        </div>
                        <div class="system-details">
                            <details class="expand-section">
                                <summary>CONTENT MARKETPLACE</summary>
                                <div class="expand-content">
                                    <p>Buy and sell digital content with SUITE tokens.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>CREATORS</summary>
                                <div class="expand-content">
                                    <p>Content creators who build and sell digital assets.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Templates / Themes / Datasets</summary>
                                <div class="expand-content">
                                    <p>Reusable assets creators can sell: app templates, visual themes, training data.
                                    </p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Guides / Audio / Graphics / Video / Tools</summary>
                                <div class="expand-content">
                                    <p>Educational content, sound packs, design assets, videos, and utilities.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Upload + Set Price</summary>
                                <div class="expand-content">
                                    <p>Creators upload their content and set a price in SUITE tokens.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>MARKETPLACE LISTING</summary>
                                <div class="expand-content">
                                    <p>Content appears in the marketplace with preview, reviews, and pricing.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Preview / Reviews (4 Stars) / License Terms</summary>
                                <div class="expand-content">
                                    <p>Buyers can preview, read reviews, and check licensing before purchase.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Buy Now - 5 SUITE</summary>
                                <div class="expand-content">
                                    <p>One-click purchase with SUITE tokens.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Purchase</summary>
                                <div class="expand-content">
                                    <p>User completes the transaction and receives the content.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>REVENUE SPLIT</summary>
                                <div class="expand-content">
                                    <p>Revenue automatically distributed after each sale.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Creator: 80%</summary>
                                <div class="expand-content">
                                    <p>Majority of the sale goes directly to the content creator.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Treasury: 15%</summary>
                                <div class="expand-content">
                                    <p>Platform fee to sustain the ecosystem.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Giving: 5%</summary>
                                <div class="expand-content">
                                    <p>Charitable contribution to community-voted causes.</p>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- DISCORD INTEGRATION -->
                <div class="system-card" id="discord-integration">
                    <h2 class="system-title">üí¨ FORGE Discord Bot</h2>
                    <p class="system-desc">Queue prompts, manage apps, and get notifications - all from Discord.</p>

                    <div class="system-layout">
                        <div class="system-diagram">
                            <img src="diagrams/forge-discord-bot.png" alt="FORGE Discord Bot System Diagram"
                                class="diagram-img">
                        </div>
                        <div class="system-details">
                            <details class="expand-section">
                                <summary>FORGE BOT (Discord)</summary>
                                <div class="expand-content">
                                    <p>The central Discord bot that bridges community commands to the SUITE AI pipeline.
                                        Runs 24/7 listening for slash commands.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Discord Server (SUITE Community)</summary>
                                <div class="expand-content">
                                    <p>The main hub where users interact with FORGE. Includes channels for #prompts,
                                        #new-apps, #support, and #announcements.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>/addition {prompt} ‚Üí Queue for AI</summary>
                                <div class="expand-content">
                                    <p>Main command to submit work. User types their request and FORGE inserts it into
                                        the Supabase prompts table with status='pending'.</p>
                                    <pre>/addition Fix the login button on FoodVitals</pre>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>/create-app {name} ‚Üí Start new project</summary>
                                <div class="expand-content">
                                    <p>Creates a new app scaffold in the ecosystem. Initializes repo, adds to suite_apps
                                        table, and sets up basic structure.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>/status ‚Üí Check watcher/server status</summary>
                                <div class="expand-content">
                                    <p>Returns live status of the PC watcher, available IDE slots, and pending prompt
                                        count. Shows last sync time.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>/balance ‚Üí Check SUITE balance</summary>
                                <div class="expand-content">
                                    <p>Queries the user's wallet balance and governance points directly from Discord.
                                    </p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>prompts table (Supabase)</summary>
                                <div class="expand-content">
                                    <p>Central queue where all prompts are stored. Fields include: prompt, status,
                                        discord_user_id, discord_channel_id, target (app slug), created_at.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>watcher.py polls for pending prompts</summary>
                                <div class="expand-content">
                                    <p>PC Watcher queries Supabase every 5 seconds for prompts with status='pending'.
                                        Human requests (bugs, features) get priority over TELOS tasks.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Inject into Antigravity IDE</summary>
                                <div class="expand-content">
                                    <p>Watcher uses pyautogui to type the prompt into the chat input of an available IDE
                                        window, then presses Enter to submit.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>Git push ‚Üí Notify user via DM</summary>
                                <div class="expand-content">
                                    <p>After AI completes the task, changes are pushed to GitHub. FORGE sends a DM to
                                        the original requester with commit link and summary.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>üîî DM Notifications</summary>
                                <div class="expand-content">
                                    <p>FORGE sends DMs for:</p>
                                    <ul>
                                        <li>‚úÖ Prompt completed (with git commit link)</li>
                                        <li>‚ùì AI asked a question (with screenshot)</li>
                                        <li>‚ùå Error occurred (with details)</li>
                                        <li>üìä Daily summary stats</li>
                                    </ul>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- AUTHENTICATION -->
                <div class="system-card" id="auth-system">
                    <h2 class="system-title">üîê SUITE Authentication</h2>
                    <p class="system-desc">Multi-method login with unified user profiles and encrypted data.</p>

                    <div class="system-layout">
                        <div class="system-diagram">
                            <img src="diagrams/suite-authentication.png" alt="SUITE Authentication System Diagram"
                                class="diagram-img">
                        </div>
                        <div class="system-details">
                            <details class="expand-section">
                                <summary>SUITE AUTHENTICATION</summary>
                                <div class="expand-content">
                                    <p>Unified auth system that connects Discord, wallet, and email identities into a
                                        single user profile.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>üéÆ Discord OAuth</summary>
                                <div class="expand-content">
                                    <p>Primary login method for FORGE users. Uses Discord OAuth2 to authenticate,
                                        fetching user ID, username, and avatar.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>üí≥ Wallet Connect</summary>
                                <div class="expand-content">
                                    <p>Connect MetaMask or WalletConnect for token holders. Links wallet address to
                                        profile for on-chain SUITE balance tracking.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>üìß Email (Magic Link)</summary>
                                <div class="expand-content">
                                    <p>Supabase magic link for general users without Discord or crypto wallet. Sends
                                        one-time login link to email.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>‚Üí Unified User Profile (suite_users)</summary>
                                <div class="expand-content">
                                    <p>All auth methods merge into one profile. Links discord_id, wallet_address, and
                                        email to a single user record.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>üë§ User Profile Data</summary>
                                <div class="expand-content">
                                    <pre>{
  "discord_id": "123456789",
  "wallet_address": "0x...",
  "email": "user@example.com",
  "suite_balance": 1500,
  "gov_points": 25,
  "owned_apps": ["FoodVitals", "LifeHub"],
  "role": "contributor"
}</pre>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>üí∞ SUITE Balance</summary>
                                <div class="expand-content">
                                    <p>User's current $SUITE token balance. Synced from on-chain wallet or earned
                                        through platform activities (watching ads, referrals).</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>üó≥Ô∏è Governance Points</summary>
                                <div class="expand-content">
                                    <p>Non-transferable points earned by contributing to the ecosystem. Used for voting
                                        on Giving Fund allocations and platform decisions.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>üîí Session Management</summary>
                                <div class="expand-content">
                                    <p>JWT tokens stored in localStorage. Sessions auto-refresh and persist across page
                                        loads. Logout clears all stored credentials.</p>
                                </div>
                            </details>

                            <details class="expand-section">
                                <summary>üëë Role-Based Access</summary>
                                <div class="expand-content">
                                    <p>Roles: user, contributor, developer, admin, owner. Higher roles unlock features
                                        like Treasury dashboard and AI Fleet config.</p>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <script src="sidebar.js"></script>
    <script>
        // JavaScript tooltip handler - creates floating tooltip that works with scrollable containers
        (function () {
            const tooltip = document.createElement('div');
            tooltip.id = 'floating-tooltip';
            tooltip.style.cssText = `
                position: fixed;
                background: #1a1a2e;
                color: white;
                padding: 12px 16px;
                border-radius: 10px;
                font-size: 0.85rem;
                font-weight: 500;
                max-width: 300px;
                text-align: center;
                z-index: 999999;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
                pointer-events: none;
                opacity: 0;
                transition: opacity 0.15s ease;
            `;
            document.body.appendChild(tooltip);

            document.querySelectorAll('.term-tooltip').forEach(el => {
                el.addEventListener('mouseenter', (e) => {
                    const text = el.getAttribute('data-tooltip');
                    if (!text) return;

                    tooltip.textContent = text;
                    tooltip.style.opacity = '1';

                    const rect = el.getBoundingClientRect();
                    tooltip.style.left = (rect.left + rect.width / 2 - tooltip.offsetWidth / 2) + 'px';
                    tooltip.style.top = (rect.top - tooltip.offsetHeight - 10) + 'px';
                });

                el.addEventListener('mouseleave', () => {
                    tooltip.style.opacity = '0';
                });
            });
        })();
    </script>
</body>

</html>
